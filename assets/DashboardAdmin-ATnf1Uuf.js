const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./OverviewTab-DPIHbM1J.js","./index-BbFP9mZ6.js","./plus-CbcI9svQ.js","./clipboard-check-C4n582tC.js","./settings-ClJdFUzM.js","./clipboard-list-B0ijCAS9.js","./ClassesTab-BGc7OdaC.js","./layout-grid-DJbwdigK.js","./plus-circle-cgeLuSWT.js","./trash-2-BJvm3PC3.js","./arrow-right-left-CqaFNKs4.js","./AssessmentsTab-DI8U8cw5.js","./pen-square-B1gDATRO.js","./clock-DOcut-Un.js","./target-GnAmfPcD.js","./FeesTab-D_R_mawu.js","./printer-Dof97X9n.js","./SettingsTab-C9H55inE.js","./user-x-8erTmheE.js","./save-CmdTa-a8.js","./pen-Bmx6AF63.js","./hard-drive-DxY5uiIX.js","./BillingTab-CUIfOerD.js","./ReportsTab-SpMtqyQc.js","./PromotionTab-C9FGRD6L.js","./TimetableTab-DV31OX9B.js","./CalendarTab-TmYeKt_d.js"])))=>i.map(i=>d[i]);
import{c as P,u as me,r as t,a as g,j as e,s as Pe,t as De,v as Me,X as _,G as w,H as xe,M as he,b as B,d as S,R as Te,h as _e,l as Q,w as Ae,x as Re,D as Ie,g as ue,A as Le,B as Oe,y as Fe,U as Ue,o as $e,W as Be,Z as Ge,z as f,E as Ve,_ as j,I as He,J as We}from"./index-BbFP9mZ6.js";import{R as qe,S as Je}from"./settings-ClJdFUzM.js";import{C as Qe}from"./clipboard-list-B0ijCAS9.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=P("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=P("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=P("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=P("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=P("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=P("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=P("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),st=({config:o,onNoticeClick:r})=>{const m=me(),[a,u]=t.useState(""),[i,d]=t.useState([]),[n,v]=t.useState(!1),C=t.useRef(null);t.useEffect(()=>{const c=setTimeout(async()=>{if(a.length>=2){v(!0);const z=await g.searchAllStudents(a);d(z),v(!1)}else d([])},400);return()=>clearTimeout(c)},[a]),t.useEffect(()=>{const c=z=>{C.current&&!C.current.contains(z.target)&&d([])};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const D=c=>{d([]),u(""),alert(`Found Student ID: ${c}. (View Profile coming soon)`)};return e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4 bg-white dark:bg-slate-950 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm relative z-30",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-100 dark:border-blue-900/50 text-blue-600 dark:text-blue-400",children:o.logoUrl?e.jsx("img",{src:o.logoUrl,className:"w-8 h-8 object-contain",alt:"Logo"}):e.jsx(Pe,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white leading-tight tracking-tight",children:o.schoolName}),e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-wide mt-1",children:[e.jsx("span",{children:o.place}),e.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),e.jsx("span",{className:o.isPro?"text-emerald-600 flex items-center gap-1":"text-slate-400",children:o.isPro?e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"w-3 h-3"})," PRO CAMPUS"]}):"FREE PLAN"})]})]})]}),e.jsxs("div",{className:"relative w-full md:w-64",ref:C,children:[e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),e.jsx("input",{className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg pl-9 pr-8 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 dark:text-slate-200",placeholder:"Search Student...",value:a,onChange:c=>u(c.target.value)}),a&&e.jsx("button",{onClick:()=>{u(""),d([])},className:"absolute right-2 top-2 text-slate-400 hover:text-slate-600 p-0.5 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:e.jsx(_,{className:"w-3 h-3"})})]}),i.length>0&&e.jsx("div",{className:"absolute top-12 left-0 w-full bg-white dark:bg-slate-900 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50 max-h-64 overflow-y-auto custom-scrollbar animate-fade-in-up",children:i.map(c=>e.jsxs("div",{onClick:()=>D(c.id),className:"p-3 border-b border-slate-100 dark:border-slate-800 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors",children:[e.jsx("p",{className:"font-bold text-sm text-slate-800 dark:text-white",children:c.name}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-[10px] bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-1.5 py-0.5 rounded font-bold",children:c.className}),e.jsx("span",{className:"text-[10px] font-mono text-slate-400",children:c.regNo})]})]},c.id))}),a.length>=2&&!n&&i.length===0&&e.jsx("div",{className:"absolute top-12 left-0 w-full bg-white dark:bg-slate-900 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 p-4 text-center text-xs text-slate-500 z-50",children:"No students found."})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs(w,{onClick:()=>m(`/school/${o.slug||o.id}`),variant:"secondary",className:"flex-1 md:flex-none flex justify-center items-center gap-2 text-xs border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 hover:text-blue-600",children:[e.jsx(xe,{className:"w-4 h-4"})," Public Page"]}),e.jsxs(w,{onClick:r,className:"flex-1 md:flex-none flex justify-center items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-500/20",children:[e.jsx(he,{className:"w-4 h-4"})," Post Notice"]})]})]})},at=({onClose:o,data:r,setData:m,scheduleTime:a,setScheduleTime:u,onSubmit:i,loading:d})=>e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(B,{className:"w-full max-w-md border-t-4 border-t-slate-900 relative",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-4 mb-6 pb-4 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-zinc-900 rounded-full flex items-center justify-center shrink-0",children:e.jsx(he,{className:"w-6 h-6 text-slate-900 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white leading-tight",children:"Post Notice"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Broadcast to campus"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{placeholder:"Title (Optional)",value:r.title,onChange:n=>m({...r,title:n.target.value})}),e.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-lg p-3 text-sm h-32 resize-none outline-none focus:ring-2 focus:ring-slate-900",placeholder:"Message content...",value:r.message,onChange:n=>m({...r,message:n.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Schedule (Optional)"}),e.jsx(S,{type:"datetime-local",value:a,onChange:n=>u(n.target.value)})]}),e.jsx(w,{onClick:i,className:"w-full bg-slate-900 text-white hover:bg-slate-800",children:a?"Schedule Post":"Post Now"})]})]})}),lt=({onClose:o,date:r,setDate:m,onSubmit:a,loading:u})=>e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(B,{className:"max-w-md w-full relative border-t-4 border-emerald-600",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-50 dark:bg-emerald-900/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-emerald-100 dark:border-emerald-800",children:e.jsx(Te,{className:"w-8 h-8 text-emerald-600"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Publish Results"}),e.jsx("p",{className:"text-zinc-500 text-sm",children:"Make marks visible to public."})]}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Schedule Date (Optional)"}),e.jsx(S,{type:"datetime-local",value:r,onChange:i=>m(i.target.value)}),e.jsx("p",{className:"text-[10px] text-zinc-400 mt-1",children:"Leave empty for immediate release."})]})}),e.jsx(w,{onClick:a,disabled:u,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg shadow-emerald-900/20",children:u?"Processing...":r?"Schedule Publish":"Publish Now"})]})}),rt=({onClose:o,mode:r,setMode:m,classId:a,setClassId:u,classes:i,newStudent:d,setNewStudent:n,onSubmit:v,onCsv:C,setCsv:D,loading:c,saved:z,schoolId:A})=>{const[R,G]=t.useState([]),[M,I]=t.useState({});t.useEffect(()=>{(async()=>{var x;const b=await g.getSchoolConfig();b&&((x=b.admissionConfig)!=null&&x.customFields)&&G(b.admissionConfig.customFields)})()},[]),t.useEffect(()=>{n(s=>({...s,customData:M}))},[M]);const L=(s,b)=>{I(x=>({...x,[s]:b}))};return e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(B,{className:"max-w-md w-full relative h-[85vh] flex flex-col p-0 overflow-hidden bg-zinc-50 dark:bg-zinc-900",children:[e.jsxs("div",{className:"p-6 pb-2 bg-white dark:bg-zinc-950 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-zinc-900 rounded-full flex items-center justify-center shrink-0 border border-zinc-200 dark:border-zinc-800",children:e.jsx(_e,{className:"w-6 h-6 text-slate-900 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white leading-tight",children:"Add Students"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Manage admission"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(Q,{value:a,onChange:s=>u(s.target.value),children:[e.jsx("option",{value:"",children:"-- Choose Class --"}),i.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsx("div",{className:"flex bg-zinc-100 dark:bg-zinc-900 p-1 rounded-lg border border-zinc-200 dark:border-zinc-800",children:["PUBLIC","DELEGATE","BULK","SINGLE"].map(s=>e.jsx("button",{onClick:()=>m(s),className:`flex-1 py-1.5 px-1 rounded text-[10px] font-bold whitespace-nowrap transition-all ${r===s?"bg-white dark:bg-zinc-800 shadow text-slate-900 dark:text-white":"text-zinc-500"}`,children:s==="DELEGATE"?"Invite":s},s))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 pt-4",children:[r==="PUBLIC"&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl border border-blue-100 dark:border-blue-900/50 mb-4",children:[e.jsx(Ae,{className:"w-10 h-10 text-blue-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Self Registration"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Share link for parents to apply."}),e.jsx("div",{className:"p-2 bg-white dark:bg-zinc-950 rounded border border-zinc-200 dark:border-zinc-800 text-[10px] text-zinc-500 font-mono mb-4 break-all",children:a?`${window.location.origin}#/register?schoolId=${A}&classId=${a}`:"Select Class First"}),e.jsx(w,{onClick:()=>{a&&navigator.clipboard.writeText(`${window.location.origin}#/register?schoolId=${A}&classId=${a}`)},className:"w-full bg-blue-600 text-white hover:bg-blue-700",children:"Copy Link"})]})}),r==="DELEGATE"&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs("div",{className:"bg-zinc-100 dark:bg-zinc-800 p-6 rounded-xl border border-zinc-200 dark:border-zinc-700",children:[e.jsx(Re,{className:"w-10 h-10 text-zinc-500 mx-auto mb-2"}),e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Invite Teacher"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Let the teacher manage admissions."}),e.jsx(w,{onClick:()=>{a&&navigator.clipboard.writeText(`${window.location.origin}#/login?invite=${a}`)},variant:"secondary",className:"w-full bg-white dark:bg-zinc-950 border border-zinc-300 dark:border-zinc-700",children:"Copy Invite"})]})}),r==="BULK"&&e.jsxs("div",{className:"space-y-4 pt-4 text-center",children:[e.jsxs("a",{href:"data:text/csv;charset=utf-8,Name,RegNo,Gender,DOB\\nStudent Name,1001,Male,2008-05-20",download:"template.csv",className:"text-xs font-bold text-blue-600 underline flex items-center justify-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"})," Download Template"]}),e.jsxs("div",{className:"border-2 border-dashed border-zinc-300 dark:border-zinc-700 rounded-xl p-6 bg-zinc-50 dark:bg-zinc-900",children:[e.jsx(Ke,{className:"w-10 h-10 text-emerald-600 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Upload CSV (Name, RegNo, Gender, DOB)"}),e.jsx("input",{type:"file",accept:".csv",onChange:s=>{var b;return D(((b=s.target.files)==null?void 0:b[0])||null)},className:"text-xs w-full"})]}),e.jsx(w,{onClick:C,disabled:c,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white",children:c?"Uploading...":"Upload CSV"})]}),r==="SINGLE"&&e.jsxs("form",{onSubmit:v,className:"space-y-4 pt-2 relative",children:[z&&e.jsxs("div",{className:"absolute -top-4 right-0 text-[10px] text-green-600 font-bold flex gap-1",children:[e.jsx(ue,{className:"w-3 h-3"})," Saved Draft"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Name"}),e.jsx(S,{value:d.name,onChange:s=>n({...d,name:s.target.value.toUpperCase()}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Reg No"}),e.jsx(S,{value:d.regNo,onChange:s=>n({...d,regNo:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Roll No"}),e.jsx(S,{value:d.rollNo,onChange:s=>n({...d,rollNo:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Gender"}),e.jsxs(Q,{value:d.gender,onChange:s=>n({...d,gender:s.target.value}),children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"DOB"}),e.jsx(S,{type:"date",value:d.dob,onChange:s=>n({...d,dob:s.target.value})})]})]}),R.length>0&&e.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-3 mt-2",children:[e.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase mb-2",children:"Additional Info"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:R.map(s=>{var b;return e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:s.label}),s.type==="SELECT"?e.jsxs(Q,{value:M[s.id]||"",onChange:x=>L(s.id,x.target.value),children:[e.jsx("option",{value:"",children:"Select"}),(b=s.options)==null?void 0:b.map(x=>e.jsx("option",{value:x,children:x},x))]}):e.jsx(S,{type:s.type==="NUMBER"?"number":s.type==="DATE"?"date":"text",value:M[s.id]||"",onChange:x=>L(s.id,x.target.value)})]},s.id)})})]}),e.jsx(w,{type:"submit",disabled:c,className:"w-full mt-4 bg-slate-900 text-white hover:bg-slate-800",children:c?"Saving...":"Save Student"})]})]})]})})};class it extends t.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,m){console.error("Uncaught error:",r,m)}render(){var r;return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900 p-4",children:e.jsxs(B,{className:"max-w-md w-full text-center border-t-4 border-red-500",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Le,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"The application encountered an unexpected error. Please try reloading to resolve the issue."}),e.jsx("div",{className:"bg-slate-100 dark:bg-slate-950 p-3 rounded-lg text-xs font-mono text-red-500 text-left mb-6 overflow-auto max-h-32 border border-slate-200 dark:border-slate-800",children:((r=this.state.error)==null?void 0:r.message)||"Unknown Error"}),e.jsxs(w,{onClick:()=>window.location.reload(),className:"w-full flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-500/20",children:[e.jsx(qe,{className:"w-4 h-4"})," Reload Application"]})]})}):this.props.children}}const nt={home:{title:"Dashboard Overview",description:"Welcome to the Control Center. Here you get a bird's-eye view of your campus.",steps:["Check 'Crowd Radar' for holiday trends in your district.","Use 'Quick Launchpad' for common tasks like adding students.","Review 'Pending Admissions' to approve new students."],tips:"Click 'Publish Result' to make marks visible to parents instantly."},classes:{title:"Class Management",description:"Create and manage classrooms. You can create single classes or generate bulk batches.",steps:["Use 'Smart Batch Wizard' to create Class 1 to 10 in one click.","Use 'Manual Create' for specific courses like '+1 Science'.","Click 'Manage / Split' on a class card to move students between divisions."],tips:"Share the 'Invite Link' with teachers so they can set their own passwords."},promotion:{title:"Smart Promotion Engine",description:"Move students to the next academic year efficiently. Supports shuffling and merit balancing.",steps:["Step 1: Select 'Source' (Current Classes) and 'Target' (Next Year Classes).","Step 2: Choose 'Merit Balancing' if you want to distribute top scorers evenly.","Step 3: Review the 'Workbench'. Drag & drop students to adjust manually.","Step 4: Click 'Commit' to save changes permanently."],tips:"Always save a 'Draft' if you need to discuss the list with the Principal before finalizing."},fees:{title:"Fee Management",description:"Track student payments and generate digital receipts.",steps:["Create a 'Fee Structure' (e.g., Term 1 Fee - ₹500).","Click on the Fee Name to open the collection list.","Click 'Pay' next to a student to record a cash/UPI payment.","Download PDF receipts instantly."],tips:"You can set a 'Due Date' to automatically mark fees as Overdue."},assessments:{title:"Behavior & Skills",description:"Track non-academic performance like Discipline, Hygiene, or Reading Logs.",steps:["Create a Program (e.g., 'Daily Prayer Tracker').","Choose Evaluation Type: Stars, Emojis, or Marks.","Assign to Teachers or Parents.","View Leaderboards to see top performers."],tips:"Use 'Star Rating' for younger kids to keep them motivated."},timetable:{title:"AI Scheduler",description:"Generate conflict-free timetables automatically.",steps:["Setup: Define working days and school timings.","Staff: Add teachers and their subjects.","Map: Assign how many periods each subject needs per week.","Generate: Let AI build the schedule."],tips:"If generation fails, try reducing the workload or adding more teachers."},settings:{title:"System Configuration",description:"Control how your school portal behaves.",steps:["Update School Name, Logo, and Address.","Toggle 'Public Admission' to open/close registrations.","Enable 'Principal Login' to give view-only access.","Use 'Data Management' to backup or clean junk data."],tips:"Choose a 'Theme' (Modern/Classic) to change how the public result page looks."},billing:{title:"Wallet & Credits",description:"Manage credits for premium AI features.",steps:["View your current credit balance.","Purchase credit packs for AI Generation or SMS.","View transaction history."],tips:"Result publishing for the first 50 students is always FREE."}},ot=({context:o})=>{const[r,m]=t.useState(!1),[a,u]=t.useState([]);t.useEffect(()=>{!a.includes(o)&&["promotion","timetable"].includes(o)},[o]);const i=nt[o]||{title:"Help Guide",description:"Select a feature to see instructions.",steps:[]},d=()=>{m(!r),r||u(n=>[...n,o])};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:d,className:`fixed bottom-24 right-4 z-40 p-3.5 rounded-full shadow-2xl transition-all duration-300 flex items-center justify-center border-4 border-white dark:border-slate-800 hover:scale-110 active:scale-95 ${r?"bg-slate-800 text-white rotate-45 opacity-0 pointer-events-none":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white animate-bounce-slow"}`,title:"Help & Guide",children:e.jsx(Xe,{className:"w-6 h-6"})}),e.jsx("div",{className:`fixed inset-0 bg-black/40 backdrop-blur-sm z-40 transition-opacity duration-300 ${r?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:()=>m(!1)}),e.jsxs("div",{className:`fixed z-50 bg-white dark:bg-slate-900 shadow-2xl transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) flex flex-col
                ${r?"translate-y-0 md:translate-x-0":"translate-y-full md:translate-y-0 md:translate-x-full"}
                
                /* Mobile Styles (Bottom Sheet) */
                bottom-0 left-0 right-0 w-full h-[70vh] rounded-t-[2rem] border-t border-slate-200 dark:border-slate-800
                
                /* Desktop Styles (Right Sidebar Drawer) */
                md:top-0 md:right-0 md:left-auto md:bottom-0 md:w-96 md:h-full md:rounded-l-3xl md:rounded-tr-none md:border-l md:border-t-0
            `,children:[e.jsx("div",{className:"w-full flex justify-center pt-3 pb-1 md:hidden",onClick:()=>m(!1),children:e.jsx("div",{className:"w-12 h-1.5 bg-slate-300 dark:bg-slate-700 rounded-full"})}),e.jsxs("div",{className:"p-6 pb-4 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 mb-1",children:[e.jsx(Oe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"ResultMate Guide"})]}),e.jsx("h3",{className:"text-2xl font-black text-slate-800 dark:text-white leading-tight",children:i.title})]}),e.jsx("button",{onClick:()=>m(!1),className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:e.jsx(_,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 pt-0 space-y-6 custom-scrollbar",children:[e.jsx("div",{className:"bg-slate-50 dark:bg-slate-950/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed font-medium",children:i.description})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"How to use"}),i.steps.map((n,v)=>e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"min-w-[24px] h-6 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center text-xs font-bold mt-0.5 group-hover:bg-blue-600 group-hover:text-white transition-colors",children:v+1}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:n})]},v))]}),i.tips&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-5 rounded-2xl border border-amber-100 dark:border-amber-800/50 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(ce,{className:"w-24 h-24 text-amber-500 fill-amber-500"})}),e.jsxs("h4",{className:"text-amber-700 dark:text-amber-400 text-sm font-bold flex items-center gap-2 mb-2 relative z-10",children:[e.jsx(ce,{className:"w-4 h-4 fill-current"})," Pro Tip"]}),e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200 italic relative z-10 leading-relaxed",children:['"',i.tips,'"']})]})]}),e.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-950/30 text-center md:rounded-bl-3xl",children:e.jsxs("a",{href:"https://wa.me/919744884223",target:"_blank",rel:"noreferrer",className:"text-xs font-bold text-slate-500 hover:text-blue-600 flex items-center justify-center gap-2 transition-colors",children:[e.jsx(et,{className:"w-3 h-3"})," Need human help? Contact Support"]})})]})]})},dt=f.lazy(()=>j(()=>import("./OverviewTab-DPIHbM1J.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),ct=f.lazy(()=>j(()=>import("./ClassesTab-BGc7OdaC.js"),__vite__mapDeps([6,1,7,8,9,10]),import.meta.url)),mt=f.lazy(()=>j(()=>import("./AssessmentsTab-DI8U8cw5.js"),__vite__mapDeps([11,1,5,9,2,12,13,14]),import.meta.url)),xt=f.lazy(()=>j(()=>import("./FeesTab-D_R_mawu.js"),__vite__mapDeps([15,1,2,16]),import.meta.url)),ht=f.lazy(()=>j(()=>import("./SettingsTab-C9H55inE.js"),__vite__mapDeps([17,1,18,19,20,9,8,21]),import.meta.url)),ut=f.lazy(()=>j(()=>import("./BillingTab-CUIfOerD.js"),__vite__mapDeps([22,1,2,4]),import.meta.url)),bt=f.lazy(()=>j(()=>import("./ReportsTab-SpMtqyQc.js"),__vite__mapDeps([23,1,4,16]),import.meta.url)),pt=f.lazy(()=>j(()=>import("./PromotionTab-C9FGRD6L.js"),__vite__mapDeps([24,1,7,19,16]),import.meta.url)),gt=f.lazy(()=>j(()=>import("./TimetableTab-DV31OX9B.js"),__vite__mapDeps([25,1,2,9,16,4,5]),import.meta.url)),ft=f.lazy(()=>j(()=>import("./CalendarTab-TmYeKt_d.js"),__vite__mapDeps([26,1,2,9]),import.meta.url)),jt=()=>{const o=me(),[r,m]=t.useState(!0),[a,u]=t.useState("home"),[i,d]=t.useState(null),[n,v]=t.useState([]),[C,D]=t.useState([]),[c,z]=t.useState([]),[A,R]=t.useState([]),[G,M]=t.useState(null),[I,L]=t.useState({fees:!0,assessments:!0}),[s,b]=t.useState(!1),[x,Y]=t.useState({title:"",message:""}),[V,be]=t.useState(""),[pe,Z]=t.useState(!1),[ge,H]=t.useState(!1),[K,X]=t.useState(""),[fe,ee]=t.useState(!1),[W,q]=t.useState(!1),[te,je]=t.useState("PUBLIC"),[E,se]=t.useState(""),[k,J]=t.useState({name:"",regNo:"",rollNo:"",dob:"",gender:"Male",fatherName:"",motherName:"",photoUrl:""}),[ve,O]=t.useState(!1),[ae,le]=t.useState(null),[Ne,re]=t.useState(!1),[ie,y]=t.useState(""),[vt,we]=t.useState(null),[h,ne]=t.useState(null);t.useEffect(()=>{N(),g.runAutoMaintenance().then(l=>{l&&console.log("System optimized automatically.")})},[]),t.useEffect(()=>{const l=localStorage.getItem("student_draft");if(l)try{const p=JSON.parse(l);J(p),p.classId&&se(p.classId)}catch{}},[]),t.useEffect(()=>{if(W&&te==="SINGLE"&&k.name){localStorage.setItem("student_draft",JSON.stringify({...k,classId:E})),re(!0);const l=setTimeout(()=>re(!1),2e3);return()=>clearTimeout(l)}},[k,E,W]);const N=async()=>{m(!0);const[l,p]=await Promise.all([g.getSchoolConfig(),g.getGlobalSettings()]);if(!l){o("/login");return}d(l),L({fees:p.MODULE_FEES!=="FALSE",assessments:p.MODULE_ASSESSMENTS!=="FALSE"}),l.scheduledPublishDate&&X(l.scheduledPublishDate.slice(0,16));const[F,T,U,$]=await Promise.all([g.getClasses(),g.getAssessmentPrograms(),g.getFeeStructures(),g.getSchoolPendingAdmissions()]);v(F),D(T),R(U),z($),m(!1)},ke=async()=>{if(!x.message)return alert("Message required");Z(!0);const l=await g.createCampusPost(i.id,i.schoolName,x.message,"ADMIN","NOTICE",x.title,V?new Date(V).toISOString():void 0);Z(!1),l.success?(b(!1),Y({title:"",message:""}),y("Notice Posted!"),setTimeout(()=>y(""),2e3)):alert(l.message)},ye=async()=>{ee(!0);const l=K||new Date(Date.now()-6e4).toISOString(),p=await g.updateSchoolSettings({scheduledPublishDate:l});ee(!1),p.success&&(d({...i,scheduledPublishDate:l}),H(!1),y("Results Published!"),setTimeout(()=>y(""),2e3))},Se=async l=>{if(l.preventDefault(),!E||!k.name||!k.regNo)return alert("Missing info");O(!0);const p=await g.createStudent(E,{...k,addedBy:"Admin"});O(!1),p.success?(y(`${k.name} Added`),setTimeout(()=>y(""),2e3),J({name:"",regNo:"",rollNo:"",dob:"",gender:"Male",fatherName:"",motherName:"",photoUrl:""}),localStorage.removeItem("student_draft"),N()):alert(p.message)},Ce=async()=>{if(!ae||!E)return alert("Select File & Class");O(!0);const p=(await ae.text()).split(`
`);let F=0;for(let T=1;T<p.length;T++){const[U,$,oe,de]=He(p[T]);U&&$&&(await g.createStudent(E,{name:U.trim(),regNo:$.trim(),gender:oe?oe.trim():"Male",dob:de?We(de.trim()):"2000-01-01",fatherName:"-",motherName:"-",addedBy:"CSV"}),F++)}O(!1),le(null),q(!1),N(),y(`${F} Students Imported`),setTimeout(()=>y(""),2e3)},ze=()=>{if(!h)return;const l=`*FEE RECEIPT*

Student: *${h.studentName}*
Class: ${h.className}
Fee: ${h.feeName}
Amount Paid: ₹${h.paidAmount}
Status: ${h.status}

Date: ${h.date}
Txn ID: ${h.txnId}

*${h.schoolName}*`;window.open(`https://wa.me/?text=${encodeURIComponent(l)}`,"_blank")};if(r)return e.jsx(Fe,{});if(!i)return null;const Ee=[{id:"home",label:"Overview",icon:xe},{id:"classes",label:"Classes",icon:Ue},{id:"timetable",label:"Timetable",icon:Ze},{id:"calendar",label:"Calendar",icon:$e},{id:"reports",label:"Reports",icon:tt},...I.assessments?[{id:"assessments",label:"Assessments",icon:Qe}]:[],...I.fees?[{id:"fees",label:"Fees",icon:Be}]:[],{id:"settings",label:"Settings",icon:Je},{id:"billing",label:"Credits",icon:Ge},{id:"promotion",label:"Promotion",icon:Ye}];return e.jsx(it,{children:e.jsxs("div",{className:"pb-20 animate-fade-in-up relative",children:[ie&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-slate-900/90 text-white px-6 py-4 rounded-xl shadow-2xl flex flex-col items-center animate-fade-in-up",children:[e.jsx(ue,{className:"w-10 h-10 text-emerald-500 mb-2"}),e.jsx("span",{className:"font-bold",children:ie})]})}),e.jsx(st,{config:i,onNoticeClick:()=>b(!0)}),e.jsx("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-xl mb-6 overflow-x-auto border border-slate-200 dark:border-slate-800 custom-scrollbar",children:Ee.map(l=>e.jsxs("button",{onClick:()=>u(l.id),className:`flex-1 px-4 py-2.5 rounded-lg text-xs font-bold transition-all flex justify-center items-center gap-2 whitespace-nowrap ${a===l.id?"bg-white dark:bg-slate-800 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(l.icon,{className:`w-4 h-4 ${l.id==="billing"?"fill-current":""}`})," ",l.label]},l.id))}),e.jsxs(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center py-20 text-slate-400 text-sm",children:"Loading..."}),children:[a==="home"&&e.jsx(dt,{setActiveTab:u,stats:G,classes:n,pendingAdmissions:c,onRefresh:N,setShowPublishModal:H,setShowStudentEntryModal:q}),a==="classes"&&e.jsx(ct,{classes:n,onRefresh:N,onShowShare:l=>we(l)}),a==="timetable"&&e.jsx(gt,{classes:n,onRefresh:N,schoolName:i.schoolName}),a==="calendar"&&e.jsx(ft,{}),a==="reports"&&e.jsx(bt,{}),a==="assessments"&&e.jsx(mt,{assessments:C,classes:n,onRefresh:N}),a==="fees"&&e.jsx(xt,{feeStructures:A,classes:n,schoolConfig:i,onRefresh:N,onShowReceipt:ne}),a==="settings"&&e.jsx(ht,{schoolConfig:i,onUpdate:d}),a==="billing"&&e.jsx(ut,{schoolConfig:i}),a==="promotion"&&e.jsx(pt,{classes:n,onRefresh:N})]}),s&&e.jsx(at,{onClose:()=>b(!1),data:x,setData:Y,scheduleTime:V,setScheduleTime:be,onSubmit:ke,loading:pe}),ge&&e.jsx(lt,{onClose:()=>H(!1),date:K,setDate:X,onSubmit:ye,loading:fe}),W&&e.jsx(rt,{onClose:()=>q(!1),mode:te,setMode:je,classId:E,setClassId:se,classes:n,newStudent:k,setNewStudent:J,onSubmit:Se,onCsv:Ce,setCsv:le,loading:ve,saved:Ne,schoolId:i.id}),h&&e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-full max-w-sm relative",children:[e.jsx("button",{onClick:()=>ne(null),className:"absolute top-2 right-2 text-slate-400 hover:text-slate-600 font-bold",children:"✕"}),e.jsx("h3",{className:"font-bold text-center border-b pb-2 mb-4 text-slate-900",children:"FEE RECEIPT"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:"font-bold text-lg text-slate-800",children:h.schoolName}),e.jsx("p",{className:"text-xs text-gray-500",children:h.place})]}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Name:"}),e.jsx("span",{className:"font-bold",children:h.studentName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Class:"}),e.jsx("span",{children:h.className})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fee:"}),e.jsx("span",{children:h.feeName})]}),e.jsxs("div",{className:"border-t my-2 pt-2 flex justify-between font-bold text-lg text-slate-900",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["₹",h.amount||h.paidAmount]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsxs("button",{onClick:ze,className:"flex-1 bg-[#25D366] hover:bg-[#20bd5a] text-white py-2.5 rounded-lg text-xs font-bold flex items-center justify-center gap-2 shadow-lg shadow-green-500/20",children:[e.jsx(Ve,{className:"w-4 h-4"})," WhatsApp"]}),e.jsx("button",{onClick:()=>window.print(),className:"flex-1 bg-slate-900 hover:bg-slate-800 text-white py-2.5 rounded-lg text-xs font-bold no-print",children:"Print"})]})]})}),e.jsx(ot,{context:a})]})})},yt=Object.freeze(Object.defineProperty({__proto__:null,default:jt},Symbol.toStringTag,{value:"Module"}));export{Ze as C,yt as D,et as I};
