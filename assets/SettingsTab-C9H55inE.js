import{c as M,r as l,a as x,j as e,b as u,s as Ie,ak as Ue,ab as Me,G as I,d as i,Y as U,l as re,X as Ge,F as Oe,$ as qe,f as Be}from"./index-BbFP9mZ6.js";import{D as de,A as _e,U as $e}from"./user-x-8erTmheE.js";import{S as He}from"./save-CmdTa-a8.js";import{P as Xe}from"./pen-Bmx6AF63.js";import{T as S}from"./trash-2-BJvm3PC3.js";import{P as ne}from"./plus-circle-cgeLuSWT.js";import{H as Ye}from"./hard-drive-DxY5uiIX.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=M("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=M("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=M("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),os=({schoolConfig:f,onUpdate:ie})=>{var se,te;const[p,oe]=l.useState("GENERAL"),[t,n]=l.useState(f),[xe,G]=l.useState(!1),[g,O]=l.useState(((se=f.admissionConfig)==null?void 0:se.customFields)||[]),[c,j]=l.useState({label:"",type:"TEXT",required:!1}),[C,be]=l.useState([]),[ue,Ke]=l.useState(f.masterSubjects||[]),[We,ze]=l.useState(""),[L,q]=l.useState(""),[B,_]=l.useState(""),[$,H]=l.useState(!1),[N,E]=l.useState(null),[o,X]=l.useState(""),[m,A]=l.useState({}),[h,T]=l.useState({name:"",max:50,pass:18}),[me,Y]=l.useState(!1),[he,V]=l.useState(!1),[pe,D]=l.useState(!1),[ge,R]=l.useState(!1),[Qe,Ze]=l.useState(""),[es,ss]=l.useState(!1),[je,ts]=l.useState(f.teacherDailyLimit||50),[P,F]=l.useState(!1),[J,fe]=l.useState({ghosts:0,oldPosts:0,staleRequests:0,oldLogs:0}),[K,W]=l.useState(null),[z,Ne]=l.useState([]);l.useEffect(()=>{Q(),v()},[]),l.useEffect(()=>{p==="DATA"&&Z()},[p]);const v=async()=>{const s=await x.getGlobalSyllabi();be(s)};l.useEffect(()=>{n(s=>({...s,admissionConfig:{...s.admissionConfig,customFields:g}}))},[g]);const Q=async()=>{const s=await x.getSchoolDetailedHealthStats();fe(s)},Z=async()=>{const s=await x.getAuditLogs();Ne(s)},ve=async()=>{const s={...t,masterSubjects:ue,teacherDailyLimit:je};(await x.updateSchoolSettings(s)).success?(ie(s),alert("Settings Saved Successfully!")):alert("Failed to update settings.")},ye=async s=>{const a=s.target.value.replace(/[^0-9]/g,"").slice(0,6);if(n({...t,pincode:a}),a.length===6){G(!0);try{const d=await(await fetch(`https://api.postalpincode.in/pincode/${a}`)).json();if(d&&d[0]&&d[0].Status==="Success"){const b=d[0].PostOffice[0];n(w=>({...w,pincode:a,district:b.District,state:b.State}))}}catch(r){console.error(r)}G(!1)}},ee=async(s,a)=>{if(!s.target.files||s.target.files.length===0)return;const r=s.target.files[0];a==="logo"?Y(!0):V(!0);const d=await x.uploadImage(r,"logos");a==="logo"?Y(!1):V(!1),d.success&&d.publicUrl?a==="logo"?(n(b=>({...b,logoUrl:d.publicUrl})),D(!1)):(n(b=>({...b,coverPhoto:d.publicUrl})),R(!1)):alert("Upload failed: "+d.message)},ke=async s=>{if(!window.confirm("Are you sure? This action cannot be undone."))return;W(s);const a=await x.cleanSpecificJunk(s);W(null),a.success?Q():alert("Cleanup Failed: "+a.message)},we=()=>{x.exportSchoolData()},Se=async s=>{var d;const a=(d=s.target.files)==null?void 0:d[0];if(!a)return;if(!window.confirm("WARNING: This will OVERWRITE existing data. Continue?")){s.target.value="";return}F(!0);const r=new FileReader;r.onload=async b=>{var w;try{const ae=JSON.parse((w=b.target)==null?void 0:w.result),le=await x.restoreSchoolData(ae);F(!1),le.success?(alert("Restore Successful! Refreshing..."),window.location.reload()):alert("Restore Failed: "+le.message)}catch{F(!1),alert("Invalid Backup File")}},r.readAsText(a)},Ce=s=>{const a=s.target.value;n({...t,syllabusProviderId:a})},Le=async()=>{if(!L)return alert("Syllabus name required");const s=B.split(",").map(r=>r.trim()).filter(r=>r);if(s.length===0)return alert("Enter class names separated by comma (e.g. 1, 2, 10)");H(!0);const a=await x.createCustomSyllabus(L,s);H(!1),a.success?(q(""),_(""),v(),alert("Custom Syllabus Created! Now Edit it to add subjects.")):alert("Failed: "+a.message)},Ee=async s=>{confirm("Delete this syllabus?")&&(await x.deleteCustomSyllabus(s),v())},Ae=s=>{const a=C.find(r=>r.id===s);a&&(E(s),A(a.subjects||{}),a.classRanges.length>0&&X(a.classRanges[0]))},Te=()=>{if(!o||!h.name)return;const a=[...m[o]||[],{name:h.name,maxMarks:h.max,passMarks:h.pass}];A({...m,[o]:a}),T({name:"",max:50,pass:18})},De=s=>{const r=(m[o]||[]).filter((d,b)=>b!==s);A({...m,[o]:r})},Re=async()=>{if(!N)return;(await x.updateSyllabusStructure(N,m)).success?(alert("Syllabus Structure Updated!"),v(),E(null)):alert("Failed to save syllabus")},Pe=()=>{var r;if(!c.label)return alert("Field label required");const s=c.label.toLowerCase().replace(/[^a-z0-9]/g,"_");if(g.some(d=>d.id===s))return alert("Field already exists");const a={id:s,label:c.label,type:c.type||"TEXT",required:c.required||!1,options:c.type==="SELECT"?(r=c.options)==null?void 0:r.split(",").map(d=>d.trim()):void 0};O([...g,a]),j({label:"",type:"TEXT",required:!1})},Fe=s=>{confirm("Remove this field? Existing data may be hidden from forms.")&&O(a=>a.filter(r=>r.id!==s))},y=({id:s,label:a,icon:r})=>e.jsxs("button",{onClick:()=>oe(s),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${p===s?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx(r,{className:"w-4 h-4"})," ",a]}),k=({id:s,name:a,color:r})=>{const d=(t.layoutTemplate||"MODERN")===s;return e.jsxs("button",{onClick:()=>n({...t,layoutTemplate:s}),className:`relative p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${d?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300"}`,children:[e.jsx("div",{className:`w-full h-16 rounded-lg ${r} shadow-inner`}),e.jsx("span",{className:`text-xs font-bold ${d?"text-blue-600":"text-slate-500"}`,children:a}),d&&e.jsx("div",{className:"absolute top-2 right-2 bg-blue-600 text-white rounded-full p-0.5",children:e.jsx(Be,{className:"w-3 h-3"})})]})};return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 animate-fade-in-up h-full",children:[e.jsxs("div",{className:"md:w-64 flex-shrink-0",children:[e.jsxs(u,{className:"p-2 space-y-1 bg-white dark:bg-slate-900",children:[e.jsx("p",{className:"px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Configuration"}),e.jsx(y,{id:"GENERAL",label:"General & Branding",icon:Ie}),e.jsx(y,{id:"ACADEMIC",label:"Academic Setup",icon:Ue}),e.jsx(y,{id:"ACCESS",label:"Access & Admission",icon:Me}),e.jsx(y,{id:"DATA",label:"Data Management",icon:de})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(I,{onClick:ve,className:"w-full bg-green-600 hover:bg-green-700 flex items-center justify-center gap-2 py-3 shadow-lg shadow-green-500/20",children:[e.jsx(He,{className:"w-4 h-4"})," Save All Changes"]})})]}),e.jsxs("div",{className:"flex-1 space-y-6",children:[p==="GENERAL"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(u,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"General Information"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"School Name"}),e.jsx(i,{value:t.schoolName,onChange:s=>n({...t,schoolName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Phone Number"}),e.jsx(i,{value:t.phone||"",onChange:s=>n({...t,phone:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-700 rounded-lg px-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-blue-500",rows:2,value:t.description||"",onChange:s=>n({...t,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Pincode"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{value:t.pincode||"",onChange:ye,maxLength:6}),xe&&e.jsx(U,{className:"absolute right-3 top-3 w-4 h-4 animate-spin text-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"District"}),e.jsx(i,{value:t.district||"",readOnly:!0,className:"bg-slate-100 dark:bg-slate-800 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"State"}),e.jsx(i,{value:t.state||"",readOnly:!0,className:"bg-slate-100 dark:bg-slate-800 cursor-not-allowed"})]})]})]})]}),e.jsxs(u,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"Public Profile & Branding"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-3 flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4"})," Public Page Theme"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(k,{id:"MODERN",name:"Modern (Default)",color:"bg-gradient-to-br from-blue-500 to-indigo-600"}),e.jsx(k,{id:"CLASSIC",name:"Classic Academic",color:"bg-slate-100 border-t-4 border-blue-900"}),e.jsx(k,{id:"VIBRANT",name:"Vibrant Kids",color:"bg-gradient-to-r from-pink-400 to-orange-400"}),e.jsx(k,{id:"DARK",name:"Cyber Dark",color:"bg-slate-900 border border-slate-700"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"School Logo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-lg flex items-center justify-center border border-slate-200 dark:border-slate-700 overflow-hidden",children:t.logoUrl?e.jsx("img",{src:t.logoUrl,className:"w-full h-full object-contain"}):e.jsx(ce,{className:"w-6 h-6 text-slate-400"})}),e.jsx("div",{className:"flex-1 space-y-2",children:pe?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:"flex-1 bg-slate-200 dark:bg-slate-800 py-1.5 rounded text-[10px] font-bold text-center cursor-pointer",children:[me?"...":"Select File",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:s=>ee(s,"logo")})]}),e.jsx("button",{onClick:()=>D(!1),className:"text-[10px] text-red-500",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"h-8 text-xs",placeholder:"Image URL",value:t.logoUrl||"",onChange:s=>n({...t,logoUrl:s.target.value})}),e.jsx("button",{onClick:()=>D(!0),className:"text-[10px] text-blue-600 font-bold hover:underline",children:"Upload File instead"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Cover Photo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-lg flex items-center justify-center border border-slate-200 dark:border-slate-700 overflow-hidden",children:t.coverPhoto?e.jsx("img",{src:t.coverPhoto,className:"w-full h-full object-cover"}):e.jsx(ce,{className:"w-6 h-6 text-slate-400"})}),e.jsx("div",{className:"flex-1 space-y-2",children:ge?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:"flex-1 bg-slate-200 dark:bg-slate-800 py-1.5 rounded text-[10px] font-bold text-center cursor-pointer",children:[he?"...":"Select File",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:s=>ee(s,"cover")})]}),e.jsx("button",{onClick:()=>R(!1),className:"text-[10px] text-red-500",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"h-8 text-xs",placeholder:"Image URL",value:t.coverPhoto||"",onChange:s=>n({...t,coverPhoto:s.target.value})}),e.jsx("button",{onClick:()=>R(!0),className:"text-[10px] text-blue-600 font-bold hover:underline",children:"Upload File instead"})]})})]})]})]})]})]})]}),p==="ACADEMIC"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(u,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"Syllabus & Curriculum"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Active Syllabus Standard"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(re,{value:t.syllabusProviderId||"",onChange:Ce,className:"flex-1",children:[e.jsx("option",{value:"",children:"-- Custom / Not Selected --"}),C.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),t.syllabusProviderId&&!["samastha","scert","cbse"].includes(t.syllabusProviderId)&&e.jsxs("button",{onClick:()=>Ae(t.syllabusProviderId),className:"px-3 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 flex items-center gap-1",title:"Edit Syllabus Subjects",children:[e.jsx(Xe,{className:"w-4 h-4"})," Edit"]}),e.jsx("button",{onClick:()=>Ee(t.syllabusProviderId||""),className:"px-3 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",disabled:!t.syllabusProviderId||["samastha","scert","cbse"].includes(t.syllabusProviderId),title:"Delete Custom Syllabus",children:e.jsx(S,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"This setting controls the default subjects when creating new classes."})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/10 p-4 rounded-xl border border-purple-100 dark:border-purple-800",children:[e.jsxs("h4",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"})," Create Custom Syllabus"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3 mb-3",children:[e.jsx(i,{placeholder:"Syllabus Name (e.g. My School Special)",className:"h-9 text-xs",value:L,onChange:s=>q(s.target.value)}),e.jsx(i,{placeholder:"Classes (e.g. 1, 2, 3, +1, +2)",className:"h-9 text-xs",value:B,onChange:s=>_(s.target.value)})]}),e.jsx(I,{onClick:Le,disabled:$,className:"w-full bg-purple-600 hover:bg-purple-700 h-9 text-xs",children:$?"Creating...":"Add New Syllabus"})]})]})]}),N&&e.jsxs(u,{className:"border-t-4 border-blue-500 relative bg-slate-50 dark:bg-slate-900",children:[e.jsx("button",{onClick:()=>E(null),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:e.jsx(Ge,{className:"w-5 h-5"})}),e.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"Edit Syllabus Content"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"w-32 border-r border-slate-200 dark:border-slate-700 pr-4",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"Class Level"}),e.jsx("div",{className:"space-y-1",children:(te=C.find(s=>s.id===N))==null?void 0:te.classRanges.map(s=>e.jsxs("button",{onClick:()=>X(s),className:`w-full text-left px-3 py-1.5 rounded text-xs font-bold transition-all ${o===s?"bg-blue-600 text-white":"text-slate-600 hover:bg-slate-200 dark:text-slate-300 dark:hover:bg-slate-800"}`,children:["Class ",s]},s))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:["Subjects for Class ",o]}),e.jsxs("div",{className:"bg-white dark:bg-slate-950 rounded-lg border border-slate-200 dark:border-slate-800 p-2 mb-3 max-h-48 overflow-y-auto custom-scrollbar",children:[(m[o]||[]).map((s,a)=>e.jsxs("div",{className:"flex justify-between items-center p-2 border-b border-slate-100 dark:border-slate-800 last:border-0",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[10px] text-slate-400",children:["Max: ",s.maxMarks]}),e.jsx("button",{onClick:()=>De(a),className:"text-red-400 hover:text-red-600",children:e.jsx(S,{className:"w-3 h-3"})})]})]},a)),(!m[o]||m[o].length===0)&&e.jsxs("p",{className:"text-center text-xs text-slate-400 py-4",children:["No subjects added for Class ",o]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{className:"flex-[2] h-8 text-xs",placeholder:"Subject Name",value:h.name,onChange:s=>T({...h,name:s.target.value})}),e.jsx(i,{className:"flex-1 h-8 text-xs text-center",type:"number",placeholder:"Max",value:h.max,onChange:s=>T({...h,max:parseInt(s.target.value)})}),e.jsx("button",{onClick:Te,className:"bg-green-600 text-white px-3 rounded-lg text-xs font-bold hover:bg-green-700",children:"Add"})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(I,{onClick:Re,className:"bg-blue-600 hover:bg-blue-700 text-white text-xs",children:"Save Syllabus Changes"})})]}),e.jsxs(u,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"Result Configuration"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Academic Year"}),e.jsx(i,{value:t.academicYear||"",onChange:s=>n({...t,academicYear:s.target.value}),placeholder:"e.g. 2024-25"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Current Exam Name"}),e.jsx(i,{value:t.examName||"",onChange:s=>n({...t,examName:s.target.value}),placeholder:"e.g. Term 1 Examination"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Result Display Style"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{id:"PASS_FAIL",label:"Pass / Fail"},{id:"GRADE_ONLY",label:"Grades Only"},{id:"CLASS_DISTINCTION",label:"Distinction"},{id:"PERCENTAGE",label:"Percentage"}].map(s=>e.jsx("button",{onClick:()=>n({...t,resultDisplayType:s.id}),className:`p-3 rounded-xl border text-xs font-bold transition-all ${t.resultDisplayType===s.id?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-300":"border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:s.label},s.id))})]}),e.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Show Ranks on Public Result"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:t.showRank,onChange:s=>n({...t,showRank:s.target.checked})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Show Pass/Fail Status Badge"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:t.showPassFailStatus!==!1,onChange:s=>n({...t,showPassFailStatus:s.target.checked})})]})]})]})]})]}),p==="ACCESS"&&e.jsx("div",{className:"space-y-6 animate-fade-in-up",children:e.jsxs(u,{className:"border border-blue-200 dark:border-blue-900/50 bg-blue-50 dark:bg-blue-900/10",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-blue-700 dark:text-blue-400 uppercase flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"})," Custom Fields Manager"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Add new data columns to student profiles."}),e.jsxs("div",{className:"space-y-2 mb-4",children:[g.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-slate-900 p-3 rounded-lg border border-blue-100 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white",children:s.label}),e.jsx("span",{className:"text-[10px] bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded text-slate-500",children:s.type}),s.required&&e.jsx("span",{className:"text-[10px] text-red-500 font-bold",children:"*Required"})]}),e.jsx("button",{onClick:()=>Fe(s.id),className:"text-red-400 hover:text-red-600",children:e.jsx(S,{className:"w-4 h-4"})})]},s.id)),g.length===0&&e.jsx("p",{className:"text-xs text-slate-400 italic text-center py-2",children:"No custom fields added."})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-3 rounded-lg border border-blue-100 dark:border-blue-800 flex gap-2 items-center flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[120px]",children:e.jsx(i,{className:"h-9 text-xs",placeholder:"Field Name",value:c.label,onChange:s=>j({...c,label:s.target.value})})}),e.jsx("div",{className:"w-28",children:e.jsxs(re,{className:"h-9 text-xs py-0",value:c.type,onChange:s=>j({...c,type:s.target.value}),children:[e.jsx("option",{value:"TEXT",children:"Text"}),e.jsx("option",{value:"NUMBER",children:"Number"}),e.jsx("option",{value:"DATE",children:"Date"}),e.jsx("option",{value:"SELECT",children:"Dropdown"})]})}),c.type==="SELECT"&&e.jsx("div",{className:"flex-1 min-w-[120px]",children:e.jsx(i,{className:"h-9 text-xs",placeholder:"Options (comma separated)",value:c.options,onChange:s=>j({...c,options:s.target.value})})}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:c.required,onChange:s=>j({...c,required:s.target.checked}),className:"w-4 h-4 accent-blue-600"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"Req."})]}),e.jsx("button",{onClick:Pe,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700",children:e.jsx(ne,{className:"w-4 h-4"})})]})]})}),p==="DATA"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(u,{className:"border border-indigo-200 dark:border-indigo-900/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-sm text-indigo-700 dark:text-indigo-400 uppercase flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"})," System Audit Trail (V7)"]}),e.jsx("button",{onClick:Z,className:"text-xs text-blue-600 hover:underline",children:"Refresh"})]}),e.jsx("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 h-64 overflow-y-auto custom-scrollbar p-1",children:z.length>0?e.jsx("div",{className:"space-y-1",children:z.map(s=>e.jsxs("div",{className:"text-xs p-2 bg-white dark:bg-slate-800 rounded border border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:`font-bold mr-2 ${s.action==="UPDATE"?"text-blue-500":"text-slate-500"}`,children:s.action}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300 mr-2",children:s.entity_type}),e.jsxs("span",{className:"text-slate-400",children:[s.entity_id.split("-")[0],"..."]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-slate-500",children:new Date(s.created_at).toLocaleString()}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:["By: ",s.changed_by||"System"]})]})]},s.id))}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[e.jsx(Oe,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-xs",children:"No audit logs found."})]})})]}),e.jsxs(u,{className:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-slate-700 dark:text-white uppercase flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4"})," Maintenance Console"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700 flex flex-col justify-between h-32 relative group",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 p-1.5 rounded-lg text-orange-600 dark:text-orange-400",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-xl font-black text-slate-800 dark:text-white",children:J.ghosts})]}),e.jsx("p",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 leading-tight",children:"Ghost Admissions"})]}),e.jsxs("button",{onClick:()=>ke("GHOSTS"),disabled:J.ghosts===0||K==="GHOSTS",className:"w-full py-1.5 rounded text-[10px] font-bold bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:bg-red-50 hover:text-red-600 transition-colors flex items-center justify-center gap-1",children:[K==="GHOSTS"?e.jsx(U,{className:"w-3 h-3 animate-spin"}):e.jsx(S,{className:"w-3 h-3"})," Clear"]})]})})]}),e.jsxs(u,{className:"border border-green-200 dark:border-green-900/50 bg-green-50 dark:bg-green-900/10",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-green-700 dark:text-green-400 uppercase flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"})," Backup & Restore"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-green-100 dark:border-green-900/30",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white mb-1",children:"Backup Data"}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Download a full JSON copy of your campus data."}),e.jsx("button",{onClick:we,className:"w-full py-2 bg-green-600 hover:bg-green-700 text-white text-xs font-bold rounded-lg flex items-center justify-center gap-2",children:"Download Backup"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-green-100 dark:border-green-900/30",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white mb-1",children:"Restore Data"}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Overwrite current data with a backup file."}),e.jsxs("label",{className:"w-full py-2 bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 text-slate-700 dark:text-slate-300 text-xs font-bold rounded-lg flex items-center justify-center gap-2 cursor-pointer",children:[P?e.jsx(U,{className:"w-3 h-3 animate-spin"}):e.jsx(qe,{className:"w-3 h-3"})," ",P?"Restoring...":"Select File",e.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:Se,disabled:P})]})]})]})]})]})]})]})};export{os as default};
