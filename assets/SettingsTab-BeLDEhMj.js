import{c as T,r as c,a as x,j as e,b,s as De,ac as Te,aa as Re,G as te,d as i,Y as D,l as le,B as Pe,F as Fe,$ as Ie,f as Ue}from"./index-CGGgVCBT.js";import{D as re,A as Me,U as Ge}from"./user-x-BT64dA61.js";import{S as Oe}from"./save-C8bWBG82.js";import{T as y}from"./trash-2-Bn0NpOPD.js";import{P as ce}from"./plus-circle-NNIeaS5n.js";import{H as Be}from"./hard-drive-CJ1ywbHL.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=T("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=T("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=T("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),es=({schoolConfig:j,onUpdate:ie})=>{var z,Q,Z,ee;const[m,ne]=c.useState("GENERAL"),[a,d]=c.useState(j),[oe,R]=c.useState(!1),[u,P]=c.useState(((z=j.admissionConfig)==null?void 0:z.customFields)||[]),[n,g]=c.useState({label:"",type:"TEXT",required:!1}),[F,xe]=c.useState([]),[h,k]=c.useState(j.masterSubjects||[]),[f,I]=c.useState(""),[w,U]=c.useState(""),[M,G]=c.useState(""),[O,B]=c.useState(!1),[be,q]=c.useState(!1),[me,$]=c.useState(!1),[he,S]=c.useState(!1),[ue,C]=c.useState(!1),[He,_e]=c.useState(""),[Ye,Xe]=c.useState(!1),[pe,Ve]=c.useState(j.teacherDailyLimit||50),[L,A]=c.useState(!1),[H,ge]=c.useState({ghosts:0,oldPosts:0,staleRequests:0,oldLogs:0}),[_,Y]=c.useState(null),[X,je]=c.useState([]);c.useEffect(()=>{V(),E()},[]),c.useEffect(()=>{m==="DATA"&&J()},[m]);const E=async()=>{const s=await x.getGlobalSyllabi();xe(s)};c.useEffect(()=>{d(s=>({...s,admissionConfig:{...s.admissionConfig,customFields:u}}))},[u]);const V=async()=>{const s=await x.getSchoolDetailedHealthStats();ge(s)},J=async()=>{const s=await x.getAuditLogs();je(s)},fe=async()=>{const s={...a,masterSubjects:h,teacherDailyLimit:pe};(await x.updateSchoolSettings(s)).success?(ie(s),alert("Settings Saved Successfully!")):alert("Failed to update settings.")},Ne=async s=>{const t=s.target.value.replace(/[^0-9]/g,"").slice(0,6);if(d({...a,pincode:t}),t.length===6){R(!0);try{const r=await(await fetch(`https://api.postalpincode.in/pincode/${t}`)).json();if(r&&r[0]&&r[0].Status==="Success"){const o=r[0].PostOffice[0];d(p=>({...p,pincode:t,district:o.District,state:o.State}))}}catch(l){console.error(l)}R(!1)}},K=async(s,t)=>{if(!s.target.files||s.target.files.length===0)return;const l=s.target.files[0];t==="logo"?q(!0):$(!0);const r=await x.uploadImage(l,"logos");t==="logo"?q(!1):$(!1),r.success&&r.publicUrl?t==="logo"?(d(o=>({...o,logoUrl:r.publicUrl})),S(!1)):(d(o=>({...o,coverPhoto:r.publicUrl})),C(!1)):alert("Upload failed: "+r.message)},ve=async s=>{if(!window.confirm("Are you sure? This action cannot be undone."))return;Y(s);const t=await x.cleanSpecificJunk(s);Y(null),t.success?V():alert("Cleanup Failed: "+t.message)},ye=()=>{x.exportSchoolData()},ke=async s=>{var r;const t=(r=s.target.files)==null?void 0:r[0];if(!t)return;if(!window.confirm("WARNING: This will OVERWRITE existing data. Continue?")){s.target.value="";return}A(!0);const l=new FileReader;l.onload=async o=>{var p;try{const se=JSON.parse((p=o.target)==null?void 0:p.result),ae=await x.restoreSchoolData(se);A(!1),ae.success?(alert("Restore Successful! Refreshing..."),window.location.reload()):alert("Restore Failed: "+ae.message)}catch{A(!1),alert("Invalid Backup File")}},l.readAsText(t)},W=()=>{f&&(h.includes(f)||k([...h,f]),I(""))},we=s=>{k(t=>t.filter(l=>l!==s))},Se=s=>{const t=s.target.value;if(d({...a,syllabusProviderId:t}),t){const l=F.find(r=>r.id===t);if(l&&confirm(`Import standard subjects from ${l.name} to your library?`)){const r=new Set(h);Object.values(l.subjects).forEach(o=>{o.forEach(p=>r.add(p.name))}),k(Array.from(r))}}},Ce=async()=>{if(!w)return alert("Syllabus name required");const s=M.split(",").map(l=>l.trim()).filter(l=>l);if(s.length===0)return alert("Enter class names separated by comma (e.g. 1, 2, 10)");B(!0);const t=await x.createCustomSyllabus(w,s);B(!1),t.success?(U(""),G(""),E(),alert("Custom Syllabus Created! You can now select it.")):alert("Failed: "+t.message)},Le=async s=>{confirm("Delete this syllabus?")&&(await x.deleteCustomSyllabus(s),E())},Ae=()=>{var l;if(!n.label)return alert("Field label required");const s=n.label.toLowerCase().replace(/[^a-z0-9]/g,"_");if(u.some(r=>r.id===s))return alert("Field already exists");const t={id:s,label:n.label,type:n.type||"TEXT",required:n.required||!1,options:n.type==="SELECT"?(l=n.options)==null?void 0:l.split(",").map(r=>r.trim()):void 0};P([...u,t]),g({label:"",type:"TEXT",required:!1})},Ee=s=>{confirm("Remove this field? Existing data may be hidden from forms.")&&P(t=>t.filter(l=>l.id!==s))},N=({id:s,label:t,icon:l})=>e.jsxs("button",{onClick:()=>ne(s),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${m===s?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx(l,{className:"w-4 h-4"})," ",t]}),v=({id:s,name:t,color:l})=>{const r=(a.layoutTemplate||"MODERN")===s;return e.jsxs("button",{onClick:()=>d({...a,layoutTemplate:s}),className:`relative p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${r?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300"}`,children:[e.jsx("div",{className:`w-full h-16 rounded-lg ${l} shadow-inner`}),e.jsx("span",{className:`text-xs font-bold ${r?"text-blue-600":"text-slate-500"}`,children:t}),r&&e.jsx("div",{className:"absolute top-2 right-2 bg-blue-600 text-white rounded-full p-0.5",children:e.jsx(Ue,{className:"w-3 h-3"})})]})};return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 animate-fade-in-up h-full",children:[e.jsxs("div",{className:"md:w-64 flex-shrink-0",children:[e.jsxs(b,{className:"p-2 space-y-1 bg-white dark:bg-slate-900",children:[e.jsx("p",{className:"px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Configuration"}),e.jsx(N,{id:"GENERAL",label:"General & Branding",icon:De}),e.jsx(N,{id:"ACADEMIC",label:"Academic Setup",icon:Te}),e.jsx(N,{id:"ACCESS",label:"Access & Admission",icon:Re}),e.jsx(N,{id:"DATA",label:"Data Management",icon:re})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(te,{onClick:fe,className:"w-full bg-green-600 hover:bg-green-700 flex items-center justify-center gap-2 py-3 shadow-lg shadow-green-500/20",children:[e.jsx(Oe,{className:"w-4 h-4"})," Save All Changes"]})})]}),e.jsxs("div",{className:"flex-1 space-y-6",children:[m==="GENERAL"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(b,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"General Information"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"School Name"}),e.jsx(i,{value:a.schoolName,onChange:s=>d({...a,schoolName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Phone Number"}),e.jsx(i,{value:a.phone||"",onChange:s=>d({...a,phone:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-700 rounded-lg px-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-blue-500",rows:2,value:a.description||"",onChange:s=>d({...a,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Pincode"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{value:a.pincode||"",onChange:Ne,maxLength:6}),oe&&e.jsx(D,{className:"absolute right-3 top-3 w-4 h-4 animate-spin text-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"District"}),e.jsx(i,{value:a.district||"",readOnly:!0,className:"bg-slate-100 dark:bg-slate-800 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"State"}),e.jsx(i,{value:a.state||"",readOnly:!0,className:"bg-slate-100 dark:bg-slate-800 cursor-not-allowed"})]})]})]})]}),e.jsxs(b,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"Public Profile & Branding"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-3 flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"})," Public Page Theme"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(v,{id:"MODERN",name:"Modern (Default)",color:"bg-gradient-to-br from-blue-500 to-indigo-600"}),e.jsx(v,{id:"CLASSIC",name:"Classic Academic",color:"bg-slate-100 border-t-4 border-blue-900"}),e.jsx(v,{id:"VIBRANT",name:"Vibrant Kids",color:"bg-gradient-to-r from-pink-400 to-orange-400"}),e.jsx(v,{id:"DARK",name:"Cyber Dark",color:"bg-slate-900 border border-slate-700"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"School Logo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-lg flex items-center justify-center border border-slate-200 dark:border-slate-700 overflow-hidden",children:a.logoUrl?e.jsx("img",{src:a.logoUrl,className:"w-full h-full object-contain"}):e.jsx(de,{className:"w-6 h-6 text-slate-400"})}),e.jsx("div",{className:"flex-1 space-y-2",children:he?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:"flex-1 bg-slate-200 dark:bg-slate-800 py-1.5 rounded text-[10px] font-bold text-center cursor-pointer",children:[be?"...":"Select File",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:s=>K(s,"logo")})]}),e.jsx("button",{onClick:()=>S(!1),className:"text-[10px] text-red-500",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"h-8 text-xs",placeholder:"Image URL",value:a.logoUrl||"",onChange:s=>d({...a,logoUrl:s.target.value})}),e.jsx("button",{onClick:()=>S(!0),className:"text-[10px] text-blue-600 font-bold hover:underline",children:"Upload File instead"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Cover Photo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-lg flex items-center justify-center border border-slate-200 dark:border-slate-700 overflow-hidden",children:a.coverPhoto?e.jsx("img",{src:a.coverPhoto,className:"w-full h-full object-cover"}):e.jsx(de,{className:"w-6 h-6 text-slate-400"})}),e.jsx("div",{className:"flex-1 space-y-2",children:ue?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:"flex-1 bg-slate-200 dark:bg-slate-800 py-1.5 rounded text-[10px] font-bold text-center cursor-pointer",children:[me?"...":"Select File",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:s=>K(s,"cover")})]}),e.jsx("button",{onClick:()=>C(!1),className:"text-[10px] text-red-500",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"h-8 text-xs",placeholder:"Image URL",value:a.coverPhoto||"",onChange:s=>d({...a,coverPhoto:s.target.value})}),e.jsx("button",{onClick:()=>C(!0),className:"text-[10px] text-blue-600 font-bold hover:underline",children:"Upload File instead"})]})})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-800",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Links & Socials"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Custom Page Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-400",children:"resultmate.com/#/school/"}),e.jsx(i,{className:"h-9 text-sm",placeholder:"my-school-name",value:a.slug||"",onChange:s=>d({...a,slug:s.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Website URL"}),e.jsx(i,{className:"h-9 text-sm",placeholder:"https://myschool.com",value:((Q=a.socials)==null?void 0:Q.website)||"",onChange:s=>d({...a,socials:{...a.socials,website:s.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Instagram Link"}),e.jsx(i,{className:"h-9 text-sm",placeholder:"https://instagram.com/...",value:((Z=a.socials)==null?void 0:Z.instagram)||"",onChange:s=>d({...a,socials:{...a.socials,instagram:s.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Facebook Link"}),e.jsx(i,{className:"h-9 text-sm",placeholder:"https://facebook.com/...",value:((ee=a.socials)==null?void 0:ee.facebook)||"",onChange:s=>d({...a,socials:{...a.socials,facebook:s.target.value}})})]})]})]})]})]})]}),m==="ACADEMIC"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(b,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"Syllabus & Curriculum"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Syllabus Standard"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(le,{value:a.syllabusProviderId||"",onChange:Se,className:"flex-1",children:[e.jsx("option",{value:"",children:"-- Custom / Not Selected --"}),F.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("button",{onClick:()=>Le(a.syllabusProviderId||""),className:"px-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",disabled:!a.syllabusProviderId||["samastha","scert","cbse"].includes(a.syllabusProviderId),title:"Delete Custom Syllabus",children:e.jsx(y,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Select a standard (e.g., Samastha, State) to auto-populate subjects during class creation."})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/10 p-4 rounded-xl border border-purple-100 dark:border-purple-800",children:[e.jsxs("h4",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 mb-3 flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"})," Create Custom Syllabus"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3 mb-3",children:[e.jsx(i,{placeholder:"Syllabus Name (e.g. My School Special)",className:"h-9 text-xs",value:w,onChange:s=>U(s.target.value)}),e.jsx(i,{placeholder:"Classes (e.g. 1, 2, 3, +1, +2)",className:"h-9 text-xs",value:M,onChange:s=>G(s.target.value)})]}),e.jsx(te,{onClick:Ce,disabled:O,className:"w-full bg-purple-600 hover:bg-purple-700 h-9 text-xs",children:O?"Creating...":"Add New Syllabus"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"})," Master Subject Library"]}),e.jsxs("span",{className:"text-[10px] text-slate-400",children:[h.length," Subjects"]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(i,{placeholder:"Add Subject (e.g. Maths)",className:"h-8 text-sm",value:f,onChange:s=>I(s.target.value),onKeyDown:s=>s.key==="Enter"&&W()}),e.jsx("button",{onClick:W,className:"bg-blue-600 text-white px-3 rounded-lg text-xs font-bold hover:bg-blue-700",children:"Add"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto custom-scrollbar",children:[h.map(s=>e.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded border border-slate-200 dark:border-slate-700 text-xs font-bold text-slate-600 dark:text-slate-300",children:[s,e.jsx("button",{onClick:()=>we(s),className:"text-slate-400 hover:text-red-500",children:e.jsx(y,{className:"w-3 h-3"})})]},s)),h.length===0&&e.jsx("p",{className:"text-xs text-slate-400 italic",children:"No subjects in library."})]})]})]})]}),e.jsxs(b,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"Result Configuration"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Academic Year"}),e.jsx(i,{value:a.academicYear||"",onChange:s=>d({...a,academicYear:s.target.value}),placeholder:"e.g. 2024-25"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Current Exam Name"}),e.jsx(i,{value:a.examName||"",onChange:s=>d({...a,examName:s.target.value}),placeholder:"e.g. Term 1 Examination"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Result Display Style"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{id:"PASS_FAIL",label:"Pass / Fail"},{id:"GRADE_ONLY",label:"Grades Only"},{id:"CLASS_DISTINCTION",label:"Distinction"},{id:"PERCENTAGE",label:"Percentage"}].map(s=>e.jsx("button",{onClick:()=>d({...a,resultDisplayType:s.id}),className:`p-3 rounded-xl border text-xs font-bold transition-all ${a.resultDisplayType===s.id?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-300":"border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:s.label},s.id))})]}),e.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Show Ranks on Public Result"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:a.showRank,onChange:s=>d({...a,showRank:s.target.checked})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Show Pass/Fail Status Badge"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:a.showPassFailStatus!==!1,onChange:s=>d({...a,showPassFailStatus:s.target.checked})})]})]})]})]})]}),m==="ACCESS"&&e.jsx("div",{className:"space-y-6 animate-fade-in-up",children:e.jsxs(b,{className:"border border-blue-200 dark:border-blue-900/50 bg-blue-50 dark:bg-blue-900/10",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-blue-700 dark:text-blue-400 uppercase flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"})," Custom Fields Manager"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Add new data columns to student profiles."}),e.jsxs("div",{className:"space-y-2 mb-4",children:[u.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-slate-900 p-3 rounded-lg border border-blue-100 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white",children:s.label}),e.jsx("span",{className:"text-[10px] bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded text-slate-500",children:s.type}),s.required&&e.jsx("span",{className:"text-[10px] text-red-500 font-bold",children:"*Required"})]}),e.jsx("button",{onClick:()=>Ee(s.id),className:"text-red-400 hover:text-red-600",children:e.jsx(y,{className:"w-4 h-4"})})]},s.id)),u.length===0&&e.jsx("p",{className:"text-xs text-slate-400 italic text-center py-2",children:"No custom fields added."})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-3 rounded-lg border border-blue-100 dark:border-blue-800 flex gap-2 items-center flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[120px]",children:e.jsx(i,{className:"h-9 text-xs",placeholder:"Field Name",value:n.label,onChange:s=>g({...n,label:s.target.value})})}),e.jsx("div",{className:"w-28",children:e.jsxs(le,{className:"h-9 text-xs py-0",value:n.type,onChange:s=>g({...n,type:s.target.value}),children:[e.jsx("option",{value:"TEXT",children:"Text"}),e.jsx("option",{value:"NUMBER",children:"Number"}),e.jsx("option",{value:"DATE",children:"Date"}),e.jsx("option",{value:"SELECT",children:"Dropdown"})]})}),n.type==="SELECT"&&e.jsx("div",{className:"flex-1 min-w-[120px]",children:e.jsx(i,{className:"h-9 text-xs",placeholder:"Options (comma separated)",value:n.options,onChange:s=>g({...n,options:s.target.value})})}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:n.required,onChange:s=>g({...n,required:s.target.checked}),className:"w-4 h-4 accent-blue-600"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"Req."})]}),e.jsx("button",{onClick:Ae,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700",children:e.jsx(ce,{className:"w-4 h-4"})})]})]})}),m==="DATA"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(b,{className:"border border-indigo-200 dark:border-indigo-900/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-sm text-indigo-700 dark:text-indigo-400 uppercase flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4"})," System Audit Trail (V7)"]}),e.jsx("button",{onClick:J,className:"text-xs text-blue-600 hover:underline",children:"Refresh"})]}),e.jsx("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 h-64 overflow-y-auto custom-scrollbar p-1",children:X.length>0?e.jsx("div",{className:"space-y-1",children:X.map(s=>e.jsxs("div",{className:"text-xs p-2 bg-white dark:bg-slate-800 rounded border border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:`font-bold mr-2 ${s.action==="UPDATE"?"text-blue-500":"text-slate-500"}`,children:s.action}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300 mr-2",children:s.entity_type}),e.jsxs("span",{className:"text-slate-400",children:[s.entity_id.split("-")[0],"..."]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-slate-500",children:new Date(s.created_at).toLocaleString()}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:["By: ",s.changed_by||"System"]})]})]},s.id))}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[e.jsx(Fe,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-xs",children:"No audit logs found."})]})})]}),e.jsxs(b,{className:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-slate-700 dark:text-white uppercase flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"})," Maintenance Console"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700 flex flex-col justify-between h-32 relative group",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 p-1.5 rounded-lg text-orange-600 dark:text-orange-400",children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-xl font-black text-slate-800 dark:text-white",children:H.ghosts})]}),e.jsx("p",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 leading-tight",children:"Ghost Admissions"})]}),e.jsxs("button",{onClick:()=>ve("GHOSTS"),disabled:H.ghosts===0||_==="GHOSTS",className:"w-full py-1.5 rounded text-[10px] font-bold bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:bg-red-50 hover:text-red-600 transition-colors flex items-center justify-center gap-1",children:[_==="GHOSTS"?e.jsx(D,{className:"w-3 h-3 animate-spin"}):e.jsx(y,{className:"w-3 h-3"})," Clear"]})]})})]}),e.jsxs(b,{className:"border border-green-200 dark:border-green-900/50 bg-green-50 dark:bg-green-900/10",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-green-700 dark:text-green-400 uppercase flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"})," Backup & Restore"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-green-100 dark:border-green-900/30",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white mb-1",children:"Backup Data"}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Download a full JSON copy of your campus data."}),e.jsx("button",{onClick:ye,className:"w-full py-2 bg-green-600 hover:bg-green-700 text-white text-xs font-bold rounded-lg flex items-center justify-center gap-2",children:"Download Backup"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-green-100 dark:border-green-900/30",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white mb-1",children:"Restore Data"}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Overwrite current data with a backup file."}),e.jsxs("label",{className:"w-full py-2 bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 text-slate-700 dark:text-slate-300 text-xs font-bold rounded-lg flex items-center justify-center gap-2 cursor-pointer",children:[L?e.jsx(D,{className:"w-3 h-3 animate-spin"}):e.jsx(Ie,{className:"w-3 h-3"})," ",L?"Restoring...":"Select File",e.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:ke,disabled:L})]})]})]})]})]})]})]})};export{es as default};
