import{c as B,r,i as p,j as e,G as x,v as oe,O as ie,ag as ce,e as de,d as c,a4 as U,aw as q,m as k,ax as G,Z as xe,h as O,aj as he,F as me,J as ue,K as pe}from"./index-DETpqC_j.js";import{D as be,A as ge}from"./database-CBJAgNur.js";import{S as fe}from"./save-Ds9LJsOp.js";import{T as je}from"./trash-2-BpDurroK.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=B("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=B("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),Re=({schoolConfig:b,onUpdate:K,initialSection:f})=>{var M;const[h,C]=r.useState(f||"GENERAL"),[t,o]=r.useState(b),[Y,S]=r.useState(!1),[A,_]=r.useState(null),[m,T]=r.useState(((M=b.admissionConfig)==null?void 0:M.customFields)||[]),[i,g]=r.useState({label:"",type:"TEXT",required:!1}),[d,E]=r.useState(b.teacherQuota||{limit:50,frequency:"DAILY"}),[$,L]=r.useState(!1),[H,R]=r.useState(!1),[W,v]=r.useState(!1),[X,y]=r.useState(!1),[ye,we]=r.useState(!1),[ke,Q]=r.useState({ghosts:0,oldPosts:0,staleRequests:0,oldLogs:0}),[Ce,Se]=r.useState(null),[D,V]=r.useState([]),[w,F]=r.useState(!1);r.useEffect(()=>{Z(),z()},[]),r.useEffect(()=>{f&&C(f)},[f]),r.useEffect(()=>{h==="DATA"&&P()},[h]),r.useEffect(()=>{o(s=>({...s,admissionConfig:{...s.admissionConfig,customFields:m}}))},[m]),r.useEffect(()=>{o(s=>({...s,teacherQuota:d}))},[d]);const Z=async()=>{const s=await p.getSchoolDetailedHealthStats();Q(s)},z=async()=>{const s=await p.getMarketingConfig();_(s)},P=async()=>{const s=await p.getAuditLogs();V(s)},J=async()=>{const s={...t};(await p.updateSchoolSettings(s)).success?(K(s),alert("Settings Saved Successfully!")):alert("Failed to update settings.")},ee=async s=>{const a=s.target.value.replace(/[^0-9]/g,"").slice(0,6);if(o({...t,pincode:a}),a.length===6){S(!0);try{const n=await(await fetch(`https://api.postalpincode.in/pincode/${a}`)).json();if(n&&n[0]&&n[0].Status==="Success"){const u=n[0].PostOffice[0];o(ne=>({...ne,pincode:a,district:u.District,state:u.State}))}}catch(l){console.error(l)}S(!1)}},I=async(s,a)=>{if(!s.target.files||s.target.files.length===0)return;const l=s.target.files[0];a==="logo"?L(!0):R(!0);const n=await p.uploadImage(l,"logos");a==="logo"?L(!1):R(!1),n.success&&n.publicUrl?a==="logo"?(o(u=>({...u,logoUrl:n.publicUrl})),v(!1)):(o(u=>({...u,coverPhoto:n.publicUrl})),y(!1)):alert("Upload failed: "+n.message)},se=async()=>{if(!confirm(`âš ï¸ CRITICAL WARNING 1/3

This will DELETE ALL ACADEMIC DATA including Students, Classes, Marks, and Fees.

Are you absolutely sure you want to continue?`)||!confirm(`âš ï¸ FINAL WARNING 2/3

This action cannot be undone. This is like formatting your phone. All data will be lost forever.

Do you want to proceed?`))return;const s=prompt(`ðŸ”’ SECURITY CHECK 3/3

Please enter your Master Recovery Key to confirm Factory Reset:`);if(!s)return;F(!0);const a=await p.factoryResetSchool(s);F(!1),a.success?(alert(`âœ… Factory Reset Complete.

Your school account is now fresh. The page will reload.`),window.location.reload()):alert("âŒ Reset Failed: "+a.message)},te=()=>{var l;if(!i.label)return alert("Field label required");const s=i.label.toLowerCase().replace(/[^a-z0-9]/g,"_");if(m.some(n=>n.id===s))return alert("Field already exists");const a={id:s,label:i.label,type:i.type||"TEXT",required:i.required||!1,options:i.type==="SELECT"?(l=i.options)==null?void 0:l.split(",").map(n=>n.trim()):void 0};T([...m,a]),g({label:"",type:"TEXT",required:!1})},ae=s=>{confirm("Remove this field? Existing data may be hidden from forms.")&&T(a=>a.filter(l=>l.id!==s))},le=s=>{o(a=>{const l=a.resultDisplayType||[];return l.includes(s)?{...a,resultDisplayType:l.filter(n=>n!==s)}:{...a,resultDisplayType:[...l,s]}})},re=()=>{if(!A||!b.planType)return!1;const s=b.planType.toLowerCase();return(A.planFeatures[s]||[]).some(l=>l.includes("Mobile App"))},j=({id:s,label:a,icon:l})=>e.jsxs("button",{onClick:()=>C(s),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${h===s?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx(l,{className:"w-4 h-4"})," ",a]}),N=({id:s,name:a,color:l})=>{const n=(t.layoutTemplate||"MODERN")===s;return e.jsxs("button",{onClick:()=>o({...t,layoutTemplate:s}),className:`relative p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${n?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300"}`,children:[e.jsx("div",{className:`w-full h-16 rounded-lg ${l} shadow-inner`}),e.jsx("span",{className:`text-xs font-bold ${n?"text-blue-600":"text-slate-500"}`,children:a}),n&&e.jsx("div",{className:"absolute top-2 right-2 bg-blue-600 text-white rounded-full p-0.5",children:e.jsx(k,{className:"w-3 h-3"})})]})};return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 animate-fade-in-up h-full",children:[e.jsxs("div",{className:"md:w-64 flex-shrink-0",children:[e.jsxs(x,{className:"p-2 space-y-1 bg-white dark:bg-slate-900",children:[e.jsx("p",{className:"px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Configuration"}),e.jsx(j,{id:"GENERAL",label:"General & Branding",icon:oe}),e.jsx(j,{id:"ACADEMIC",label:"Academic Setup",icon:ie}),e.jsx(j,{id:"ACCESS",label:"Access & Admission",icon:ce}),e.jsx(j,{id:"DATA",label:"Data Management",icon:be})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(de,{onClick:J,className:"w-full bg-green-600 hover:bg-green-700 flex items-center justify-center gap-2 py-3 shadow-lg shadow-green-500/20",children:[e.jsx(fe,{className:"w-4 h-4"})," Save All Changes"]})})]}),e.jsxs("div",{className:"flex-1 space-y-6",children:[h==="GENERAL"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(x,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"General Information"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"School Name"}),e.jsx(c,{value:t.schoolName,onChange:s=>o({...t,schoolName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Phone Number"}),e.jsx(c,{value:t.phone||"",onChange:s=>o({...t,phone:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-700 rounded-lg px-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-blue-500",rows:2,value:t.description||"",onChange:s=>o({...t,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Pincode"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{value:t.pincode||"",onChange:ee,maxLength:6}),Y&&e.jsx(U,{className:"absolute right-3 top-3 w-4 h-4 animate-spin text-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"District"}),e.jsx(c,{value:t.district||"",onChange:s=>o({...t,district:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"State"}),e.jsx(c,{value:t.state||"",onChange:s=>o({...t,state:s.target.value})})]})]})]})]}),e.jsxs(x,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"Public Profile & Branding"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-900 to-indigo-900 p-6 rounded-2xl text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute right-0 top-0 opacity-10",children:e.jsx(q,{className:"w-32 h-32"})}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(q,{className:"w-6 h-6"})," Own Branded App?"]}),e.jsxs("p",{className:"text-sm text-purple-200 mt-1 max-w-md",children:["Get a custom ",e.jsx("b",{children:"Installable App (PWA/APK)"})," for your institution."]})]}),re()?e.jsxs("span",{className:"bg-white/20 px-4 py-2 rounded-lg font-bold text-sm border border-white/30 backdrop-blur-sm flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"})," Active in your Plan"]}):e.jsx("a",{href:"#/partner",className:"bg-white text-purple-900 px-6 py-3 rounded-xl font-bold text-sm shadow-lg hover:bg-purple-50 transition-colors",children:"Upgrade Plan"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-3 flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"})," Public Page Theme"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(N,{id:"MODERN",name:"Modern (Default)",color:"bg-gradient-to-br from-blue-500 to-indigo-600"}),e.jsx(N,{id:"CLASSIC",name:"Classic Academic",color:"bg-slate-100 border-t-4 border-blue-900"}),e.jsx(N,{id:"VIBRANT",name:"Vibrant Kids",color:"bg-gradient-to-r from-pink-400 to-orange-400"}),e.jsx(N,{id:"DARK",name:"Cyber Dark",color:"bg-slate-900 border border-slate-700"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"School Logo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-lg flex items-center justify-center border border-slate-200 dark:border-slate-700 overflow-hidden",children:t.logoUrl?e.jsx("img",{src:t.logoUrl,className:"w-full h-full object-contain"}):e.jsx(G,{className:"w-6 h-6 text-slate-400"})}),e.jsx("div",{className:"flex-1 space-y-2",children:W?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:"flex-1 bg-slate-200 dark:bg-slate-800 py-1.5 rounded text-[10px] font-bold text-center cursor-pointer",children:[$?"...":"Select File",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:s=>I(s,"logo")})]}),e.jsx("button",{onClick:()=>v(!1),className:"text-[10px] text-red-500",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"h-8 text-xs",placeholder:"Image URL",value:t.logoUrl||"",onChange:s=>o({...t,logoUrl:s.target.value})}),e.jsx("button",{onClick:()=>v(!0),className:"text-[10px] text-blue-600 font-bold hover:underline",children:"Upload File instead"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Cover Photo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-lg flex items-center justify-center border border-slate-200 dark:border-slate-700 overflow-hidden",children:t.coverPhoto?e.jsx("img",{src:t.coverPhoto,className:"w-full h-full object-cover"}):e.jsx(G,{className:"w-6 h-6 text-slate-400"})}),e.jsx("div",{className:"flex-1 space-y-2",children:X?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:"flex-1 bg-slate-200 dark:bg-slate-800 py-1.5 rounded text-[10px] font-bold text-center cursor-pointer",children:[H?"...":"Select File",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:s=>I(s,"cover")})]}),e.jsx("button",{onClick:()=>y(!1),className:"text-[10px] text-red-500",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"h-8 text-xs",placeholder:"Image URL",value:t.coverPhoto||"",onChange:s=>o({...t,coverPhoto:s.target.value})}),e.jsx("button",{onClick:()=>y(!0),className:"text-[10px] text-blue-600 font-bold hover:underline",children:"Upload File instead"})]})})]})]})]})]})]})]}),h==="ACADEMIC"&&e.jsx("div",{className:"space-y-6 animate-fade-in-up",children:e.jsxs(x,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"Result Configuration"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Academic Year"}),e.jsx(c,{value:t.academicYear||"",onChange:s=>o({...t,academicYear:s.target.value}),placeholder:"e.g. 2024-25"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Current Exam Name"}),e.jsx(c,{value:t.examName||"",onChange:s=>o({...t,examName:s.target.value}),placeholder:"e.g. Term 1 Examination"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Result Display Options (Public)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[{id:"PASS_FAIL",label:"Show Pass/Fail Badge"},{id:"GRADE_ONLY",label:"Show Grades Column"},{id:"CLASS_DISTINCTION",label:"Show Distinction"},{id:"PERCENTAGE",label:"Show Percentage"},{id:"MARKS_COLUMN",label:"Show Marks Column"}].map(s=>{var l;const a=(l=t.resultDisplayType)==null?void 0:l.includes(s.id);return e.jsxs("button",{onClick:()=>le(s.id),className:`p-3 rounded-xl border text-xs font-bold transition-all flex items-center justify-between ${a?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-300":"border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[s.label,a&&e.jsx(k,{className:"w-3 h-3"})]},s.id)})})]}),e.jsx("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Show Ranks on Public Result"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:t.showRank,onChange:s=>o({...t,showRank:s.target.checked})})]})})]})]})}),h==="ACCESS"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(x,{className:"border border-purple-200 dark:border-purple-900/50 bg-purple-50 dark:bg-purple-900/10",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-purple-700 dark:text-purple-400 uppercase flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"})," Teacher Economy Control"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4",children:"Control how many credits each teacher can use for AI & SMS features."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-1",children:"Limit Frequency"}),e.jsxs(O,{value:d.frequency,onChange:s=>E({...d,frequency:s.target.value}),children:[e.jsx("option",{value:"DAILY",children:"Per Day"}),e.jsx("option",{value:"WEEKLY",children:"Per Week"}),e.jsx("option",{value:"MONTHLY",children:"Per Month"}),e.jsx("option",{value:"UNLIMITED",children:"Unlimited (Uses School Balance)"})]})]}),d.frequency!=="UNLIMITED"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-1",children:"Max Credits"}),e.jsx(c,{type:"number",value:d.limit,onChange:s=>E({...d,limit:parseInt(s.target.value)||0})})]})]}),d.frequency!=="UNLIMITED"&&e.jsxs("p",{className:"text-[10px] text-purple-600 mt-2 font-bold",children:["Each teacher can use up to ",d.limit," Credits ",d.frequency.toLowerCase(),"."]})]}),e.jsxs(x,{className:"border border-blue-200 dark:border-blue-900/50 bg-blue-50 dark:bg-blue-900/10",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-blue-700 dark:text-blue-400 uppercase flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"})," Custom Fields Manager"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Add new data columns to student profiles."}),e.jsxs("div",{className:"space-y-2 mb-4",children:[m.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-slate-900 p-3 rounded-lg border border-blue-100 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white",children:s.label}),e.jsx("span",{className:"text-[10px] bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded text-slate-500",children:s.type}),s.required&&e.jsx("span",{className:"text-[10px] text-red-500 font-bold",children:"*Required"})]}),e.jsx("button",{onClick:()=>ae(s.id),className:"text-red-400 hover:text-red-600",children:e.jsx(je,{className:"w-4 h-4"})})]},s.id)),m.length===0&&e.jsx("p",{className:"text-xs text-slate-400 italic text-center py-2",children:"No custom fields added."})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-3 rounded-lg border border-blue-100 dark:border-blue-800 flex gap-2 items-center flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[120px]",children:e.jsx(c,{className:"h-9 text-xs",placeholder:"Field Name",value:i.label,onChange:s=>g({...i,label:s.target.value})})}),e.jsx("div",{className:"w-28",children:e.jsxs(O,{className:"h-9 text-xs py-0",value:i.type,onChange:s=>g({...i,type:s.target.value}),children:[e.jsx("option",{value:"TEXT",children:"Text"}),e.jsx("option",{value:"NUMBER",children:"Number"}),e.jsx("option",{value:"DATE",children:"Date"}),e.jsx("option",{value:"SELECT",children:"Dropdown"})]})}),i.type==="SELECT"&&e.jsx("div",{className:"flex-1 min-w-[120px]",children:e.jsx(c,{className:"h-9 text-xs",placeholder:"Options (comma separated)",value:i.options,onChange:s=>g({...i,options:s.target.value})})}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:i.required,onChange:s=>g({...i,required:s.target.checked}),className:"w-4 h-4 accent-blue-600"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"Req."})]}),e.jsx("button",{onClick:te,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700",children:e.jsx(he,{className:"w-4 h-4"})})]})]})]}),h==="DATA"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(x,{className:"border border-indigo-200 dark:border-indigo-900/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-sm text-indigo-700 dark:text-indigo-400 uppercase flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"})," System Audit Trail (V7)"]}),e.jsx("button",{onClick:P,className:"text-xs text-blue-600 hover:underline",children:"Refresh"})]}),e.jsx("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 h-64 overflow-y-auto custom-scrollbar p-1",children:D.length>0?e.jsx("div",{className:"space-y-1",children:D.map(s=>e.jsxs("div",{className:"text-xs p-2 bg-white dark:bg-slate-800 rounded border border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:`font-bold mr-2 ${s.action==="UPDATE"?"text-blue-500":"text-slate-500"}`,children:s.action}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300 mr-2",children:s.entity_type}),e.jsxs("span",{className:"text-slate-400",children:[s.entity_id.split("-")[0],"..."]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-slate-500",children:new Date(s.created_at).toLocaleString()}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:["By: ",s.changed_by||"System"]})]})]},s.id))}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[e.jsx(me,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-xs",children:"No audit logs found."})]})})]}),e.jsxs(x,{className:"border border-red-500/50 bg-red-900/10",children:[e.jsxs("h3",{className:"font-bold text-sm mb-2 text-red-600 dark:text-red-400 uppercase flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"})," Danger Zone"]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-xs text-red-800 dark:text-red-200",children:[e.jsx("b",{children:"Factory Reset:"})," Permanently delete ALL Students, Classes, Marks, and Fees. This action is irreversible and requires the Master Recovery Key."]}),e.jsxs("button",{onClick:se,disabled:w,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg text-xs font-bold flex items-center gap-2 whitespace-nowrap shadow-lg",children:[w?e.jsx(U,{className:"w-4 h-4 animate-spin"}):e.jsx(pe,{className:"w-4 h-4"}),w?"Resetting...":"Factory Reset"]})]})]})]})]})]})};export{Re as default};
