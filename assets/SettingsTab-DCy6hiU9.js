import{c as w,r as d,a as b,j as e,b as o,q as Ce,ae as Se,ac as Ae,G as ae,d as i,Y as v,l as te,B as Pe,Z as Ee,af as Le,ak as Te,w as Re,$ as De,f as Fe}from"./index-CAgeZUTc.js";import{D as le}from"./database-CKpq2GyI.js";import{S as Ie,H as Ue}from"./save-Dh3mLcKi.js";import{T as L}from"./trash-2-C9uBVfXZ.js";import{P as Ge}from"./plus-circle-DBUqNMgh.js";import{C as Me}from"./clipboard-list-D2b9NoXt.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=w("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=w("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=w("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=w("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),_e=({schoolConfig:y,onUpdate:ce})=>{var z,V,_,J,K,W,Z,Q;const[u,de]=d.useState("GENERAL"),[a,t]=d.useState(y),[ie,T]=d.useState(!1),[m,R]=d.useState(((z=y.admissionConfig)==null?void 0:z.customFields)||[]),[n,g]=d.useState({label:"",type:"TEXT",required:!1}),[D,ne]=d.useState([]),[h,C]=d.useState(y.masterSubjects||[]),[j,F]=d.useState(""),[oe,I]=d.useState(!1),[xe,U]=d.useState(!1),[be,S]=d.useState(!1),[he,A]=d.useState(!1),[f,me]=d.useState(""),[G,M]=d.useState(!1),[P,E]=d.useState(!1),[O,pe]=d.useState({ghosts:0,oldPosts:0,staleRequests:0,oldLogs:0}),[B,q]=d.useState(null);d.useEffect(()=>{H(),ne(b.getGlobalSyllabi())},[]),d.useEffect(()=>{t(s=>({...s,admissionConfig:{...s.admissionConfig,customFields:m}}))},[m]);const H=async()=>{const s=await b.getSchoolDetailedHealthStats();pe(s)},ue=async()=>{const s={...a,masterSubjects:h};(await b.updateSchoolSettings(s)).success?(ce(s),alert("Settings Saved Successfully!")):alert("Failed to update settings.")},ge=async s=>{const l=s.target.value.replace(/[^0-9]/g,"").slice(0,6);if(t({...a,pincode:l}),l.length===6){T(!0);try{const r=await(await fetch(`https://api.postalpincode.in/pincode/${l}`)).json();if(r&&r[0]&&r[0].Status==="Success"){const x=r[0].PostOffice[0];t(p=>({...p,pincode:l,district:x.District,state:x.State}))}}catch(c){console.error(c)}T(!1)}},$=async(s,l)=>{if(!s.target.files||s.target.files.length===0)return;const c=s.target.files[0];l==="logo"?I(!0):U(!0);const r=await b.uploadImage(c,"logos");l==="logo"?I(!1):U(!1),r.success&&r.publicUrl?l==="logo"?(t(x=>({...x,logoUrl:r.publicUrl})),S(!1)):(t(x=>({...x,coverPhoto:r.publicUrl})),A(!1)):alert("Upload failed: "+r.message)},je=async s=>{if(!window.confirm("Are you sure? This action cannot be undone."))return;q(s);const l=await b.cleanSpecificJunk(s);q(null),l.success?H():alert("Cleanup Failed: "+l.message)},fe=()=>{b.exportSchoolData()},Ne=async s=>{var r;const l=(r=s.target.files)==null?void 0:r[0];if(!l)return;if(!window.confirm("WARNING: This will OVERWRITE existing data. Continue?")){s.target.value="";return}E(!0);const c=new FileReader;c.onload=async x=>{var p;try{const ee=JSON.parse((p=x.target)==null?void 0:p.result),se=await b.restoreSchoolData(ee);E(!1),se.success?(alert("Restore Successful! Refreshing..."),window.location.reload()):alert("Restore Failed: "+se.message)}catch{E(!1),alert("Invalid Backup File")}},c.readAsText(l)},X=async()=>{M(!0);const s=await b.generatePrincipalInvite();if(M(!1),s.success&&s.token){const l=`${window.location.origin}/#/principal-setup?token=${s.token}`;me(l),t(c=>({...c,principalPassword:""}))}else alert("Failed to generate invite.")},Y=()=>{j&&(h.includes(j)||C([...h,j]),F(""))},ke=s=>{C(l=>l.filter(c=>c!==s))},ve=s=>{const l=s.target.value;if(t({...a,syllabusProviderId:l}),l){const c=D.find(r=>r.id===l);if(c&&confirm(`Import standard subjects from ${c.name} to your library?`)){const r=new Set(h);Object.values(c.subjects).forEach(x=>{x.forEach(p=>r.add(p.name))}),C(Array.from(r))}}},we=()=>{var c;if(!n.label)return alert("Field label required");const s=n.label.toLowerCase().replace(/[^a-z0-9]/g,"_");if(m.some(r=>r.id===s))return alert("Field already exists");const l={id:s,label:n.label,type:n.type||"TEXT",required:n.required||!1,options:n.type==="SELECT"?(c=n.options)==null?void 0:c.split(",").map(r=>r.trim()):void 0};R([...m,l]),g({label:"",type:"TEXT",required:!1})},ye=s=>{confirm("Remove this field? Existing data may be hidden from forms.")&&R(l=>l.filter(c=>c.id!==s))},N=({id:s,label:l,icon:c})=>e.jsxs("button",{onClick:()=>de(s),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${u===s?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx(c,{className:"w-4 h-4"})," ",l]}),k=({id:s,name:l,color:c})=>{const r=(a.layoutTemplate||"MODERN")===s;return e.jsxs("button",{onClick:()=>t({...a,layoutTemplate:s}),className:`relative p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${r?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300"}`,children:[e.jsx("div",{className:`w-full h-16 rounded-lg ${c} shadow-inner`}),e.jsx("span",{className:`text-xs font-bold ${r?"text-blue-600":"text-slate-500"}`,children:l}),r&&e.jsx("div",{className:"absolute top-2 right-2 bg-blue-600 text-white rounded-full p-0.5",children:e.jsx(Fe,{className:"w-3 h-3"})})]})};return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 animate-fade-in-up h-full",children:[e.jsxs("div",{className:"md:w-64 flex-shrink-0",children:[e.jsxs(o,{className:"p-2 space-y-1 bg-white dark:bg-slate-900",children:[e.jsx("p",{className:"px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Configuration"}),e.jsx(N,{id:"GENERAL",label:"General & Branding",icon:Ce}),e.jsx(N,{id:"ACADEMIC",label:"Academic Setup",icon:Se}),e.jsx(N,{id:"ACCESS",label:"Access & Admission",icon:Ae}),e.jsx(N,{id:"DATA",label:"Data Management",icon:le})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(ae,{onClick:ue,className:"w-full bg-green-600 hover:bg-green-700 flex items-center justify-center gap-2 py-3 shadow-lg shadow-green-500/20",children:[e.jsx(Ie,{className:"w-4 h-4"})," Save All Changes"]})})]}),e.jsxs("div",{className:"flex-1 space-y-6",children:[u==="GENERAL"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(o,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"General Information"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"School Name"}),e.jsx(i,{value:a.schoolName,onChange:s=>t({...a,schoolName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Phone Number"}),e.jsx(i,{value:a.phone||"",onChange:s=>t({...a,phone:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-700 rounded-lg px-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-blue-500",rows:2,value:a.description||"",onChange:s=>t({...a,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Pincode"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{value:a.pincode||"",onChange:ge,maxLength:6}),ie&&e.jsx(v,{className:"absolute right-3 top-3 w-4 h-4 animate-spin text-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"District"}),e.jsx(i,{value:a.district||"",readOnly:!0,className:"bg-slate-100 dark:bg-slate-800 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"State"}),e.jsx(i,{value:a.state||"",readOnly:!0,className:"bg-slate-100 dark:bg-slate-800 cursor-not-allowed"})]})]})]})]}),e.jsxs(o,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"Public Profile & Branding"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-3 flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"})," Public Page Theme"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(k,{id:"MODERN",name:"Modern (Default)",color:"bg-gradient-to-br from-blue-500 to-indigo-600"}),e.jsx(k,{id:"CLASSIC",name:"Classic Academic",color:"bg-slate-100 border-t-4 border-blue-900"}),e.jsx(k,{id:"VIBRANT",name:"Vibrant Kids",color:"bg-gradient-to-r from-pink-400 to-orange-400"}),e.jsx(k,{id:"DARK",name:"Cyber Dark",color:"bg-slate-900 border border-slate-700"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"School Logo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-lg flex items-center justify-center border border-slate-200 dark:border-slate-700 overflow-hidden",children:a.logoUrl?e.jsx("img",{src:a.logoUrl,className:"w-full h-full object-contain"}):e.jsx(re,{className:"w-6 h-6 text-slate-400"})}),e.jsx("div",{className:"flex-1 space-y-2",children:be?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:"flex-1 bg-slate-200 dark:bg-slate-800 py-1.5 rounded text-[10px] font-bold text-center cursor-pointer",children:[oe?"...":"Select File",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:s=>$(s,"logo")})]}),e.jsx("button",{onClick:()=>S(!1),className:"text-[10px] text-red-500",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"h-8 text-xs",placeholder:"Image URL",value:a.logoUrl||"",onChange:s=>t({...a,logoUrl:s.target.value})}),e.jsx("button",{onClick:()=>S(!0),className:"text-[10px] text-blue-600 font-bold hover:underline",children:"Upload File instead"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Cover Photo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-lg flex items-center justify-center border border-slate-200 dark:border-slate-700 overflow-hidden",children:a.coverPhoto?e.jsx("img",{src:a.coverPhoto,className:"w-full h-full object-cover"}):e.jsx(re,{className:"w-6 h-6 text-slate-400"})}),e.jsx("div",{className:"flex-1 space-y-2",children:he?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:"flex-1 bg-slate-200 dark:bg-slate-800 py-1.5 rounded text-[10px] font-bold text-center cursor-pointer",children:[xe?"...":"Select File",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:s=>$(s,"cover")})]}),e.jsx("button",{onClick:()=>A(!1),className:"text-[10px] text-red-500",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"h-8 text-xs",placeholder:"Image URL",value:a.coverPhoto||"",onChange:s=>t({...a,coverPhoto:s.target.value})}),e.jsx("button",{onClick:()=>A(!0),className:"text-[10px] text-blue-600 font-bold hover:underline",children:"Upload File instead"})]})})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-800",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Links & Socials"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Custom Page Link"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-400",children:"resultmate.com/#/school/"}),e.jsx(i,{className:"h-9 text-sm",placeholder:"my-school-name",value:a.slug||"",onChange:s=>t({...a,slug:s.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Website URL"}),e.jsx(i,{className:"h-9 text-sm",placeholder:"https://myschool.com",value:((V=a.socials)==null?void 0:V.website)||"",onChange:s=>t({...a,socials:{...a.socials,website:s.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Instagram Link"}),e.jsx(i,{className:"h-9 text-sm",placeholder:"https://instagram.com/...",value:((_=a.socials)==null?void 0:_.instagram)||"",onChange:s=>t({...a,socials:{...a.socials,instagram:s.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Facebook Link"}),e.jsx(i,{className:"h-9 text-sm",placeholder:"https://facebook.com/...",value:((J=a.socials)==null?void 0:J.facebook)||"",onChange:s=>t({...a,socials:{...a.socials,facebook:s.target.value}})})]})]})]})]})]})]}),u==="ACADEMIC"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(o,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"Syllabus & Curriculum"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Syllabus Standard"}),e.jsxs(te,{value:a.syllabusProviderId||"",onChange:ve,children:[e.jsx("option",{value:"",children:"-- Custom / Not Selected --"}),D.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Select a standard (e.g., Samastha, State) to auto-populate subjects during class creation."})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"})," Master Subject Library"]}),e.jsxs("span",{className:"text-[10px] text-slate-400",children:[h.length," Subjects"]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(i,{placeholder:"Add Subject (e.g. Maths)",className:"h-8 text-sm",value:j,onChange:s=>F(s.target.value),onKeyDown:s=>s.key==="Enter"&&Y()}),e.jsx("button",{onClick:Y,className:"bg-blue-600 text-white px-3 rounded-lg text-xs font-bold hover:bg-blue-700",children:"Add"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto custom-scrollbar",children:[h.map(s=>e.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded border border-slate-200 dark:border-slate-700 text-xs font-bold text-slate-600 dark:text-slate-300",children:[s,e.jsx("button",{onClick:()=>ke(s),className:"text-slate-400 hover:text-red-500",children:e.jsx(L,{className:"w-3 h-3"})})]},s)),h.length===0&&e.jsx("p",{className:"text-xs text-slate-400 italic",children:"No subjects in library."})]})]})]})]}),e.jsxs(o,{children:[e.jsx("h3",{className:"font-bold text-lg mb-6 text-slate-800 dark:text-white border-b border-slate-100 dark:border-slate-800 pb-2",children:"Result Configuration"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Academic Year"}),e.jsx(i,{value:a.academicYear||"",onChange:s=>t({...a,academicYear:s.target.value}),placeholder:"e.g. 2024-25"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Current Exam Name"}),e.jsx(i,{value:a.examName||"",onChange:s=>t({...a,examName:s.target.value}),placeholder:"e.g. Term 1 Examination"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Result Display Style"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{id:"PASS_FAIL",label:"Pass / Fail"},{id:"GRADE_ONLY",label:"Grades Only"},{id:"CLASS_DISTINCTION",label:"Distinction"},{id:"PERCENTAGE",label:"Percentage"}].map(s=>e.jsx("button",{onClick:()=>t({...a,resultDisplayType:s.id}),className:`p-3 rounded-xl border text-xs font-bold transition-all ${a.resultDisplayType===s.id?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-300":"border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:s.label},s.id))})]}),e.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Show Ranks on Public Result"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:a.showRank,onChange:s=>t({...a,showRank:s.target.checked})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Show Pass/Fail Status Badge"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:a.showPassFailStatus!==!1,onChange:s=>t({...a,showPassFailStatus:s.target.checked})})]})]})]})]})]}),u==="ACCESS"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(o,{className:"border border-blue-200 dark:border-blue-900/50 bg-blue-50 dark:bg-blue-900/10",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-blue-700 dark:text-blue-400 uppercase flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"})," Custom Fields Manager"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Add new data columns to student profiles. These will appear in admission forms."}),e.jsxs("div",{className:"space-y-2 mb-4",children:[m.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-slate-900 p-3 rounded-lg border border-blue-100 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white",children:s.label}),e.jsx("span",{className:"text-[10px] bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded text-slate-500",children:s.type}),s.required&&e.jsx("span",{className:"text-[10px] text-red-500 font-bold",children:"*Required"})]}),e.jsx("button",{onClick:()=>ye(s.id),className:"text-red-400 hover:text-red-600",children:e.jsx(L,{className:"w-4 h-4"})})]},s.id)),m.length===0&&e.jsx("p",{className:"text-xs text-slate-400 italic text-center py-2",children:"No custom fields added."})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-3 rounded-lg border border-blue-100 dark:border-blue-800 flex gap-2 items-center flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[120px]",children:e.jsx(i,{className:"h-9 text-xs",placeholder:"Field Name (e.g. Aadhar)",value:n.label,onChange:s=>g({...n,label:s.target.value})})}),e.jsx("div",{className:"w-28",children:e.jsxs(te,{className:"h-9 text-xs py-0",value:n.type,onChange:s=>g({...n,type:s.target.value}),children:[e.jsx("option",{value:"TEXT",children:"Text"}),e.jsx("option",{value:"NUMBER",children:"Number"}),e.jsx("option",{value:"DATE",children:"Date"}),e.jsx("option",{value:"SELECT",children:"Dropdown"})]})}),n.type==="SELECT"&&e.jsx("div",{className:"flex-1 min-w-[120px]",children:e.jsx(i,{className:"h-9 text-xs",placeholder:"Options (comma separated)",value:n.options,onChange:s=>g({...n,options:s.target.value})})}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:n.required,onChange:s=>g({...n,required:s.target.checked}),className:"w-4 h-4 accent-blue-600"}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"Req."})]}),e.jsx("button",{onClick:we,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700",children:e.jsx(Ge,{className:"w-4 h-4"})})]})]}),e.jsxs(o,{children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-slate-700 dark:text-white uppercase flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4"})," Standard Fields Visibility"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Ask Admission No (Reg No)"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:((K=a.admissionConfig)==null?void 0:K.askRegNo)||!1,onChange:s=>t({...a,admissionConfig:{...a.admissionConfig,askRegNo:s.target.checked}})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Ask Roll Number"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:((W=a.admissionConfig)==null?void 0:W.askRollNo)||!1,onChange:s=>t({...a,admissionConfig:{...a.admissionConfig,askRollNo:s.target.checked}})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Ask Photo Upload"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:((Z=a.admissionConfig)==null?void 0:Z.askPhoto)||!1,onChange:s=>t({...a,admissionConfig:{...a.admissionConfig,askPhoto:s.target.checked}})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Ask Blood Group"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:((Q=a.admissionConfig)==null?void 0:Q.askBloodGroup)||!1,onChange:s=>t({...a,admissionConfig:{...a.admissionConfig,askBloodGroup:s.target.checked}})})]})]})]}),e.jsxs(o,{children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"General Permissions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white",children:"Allow Public Admission"}),e.jsx("p",{className:"text-xs text-slate-500",children:'Enable "Register Here" link for parents'})]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:a.allowPublicAdmission,onChange:s=>t({...a,allowPublicAdmission:s.target.checked})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white",children:"Teacher Subject Edit"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Allow class teachers to add/remove subjects"})]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-blue-600",checked:a.allowTeacherSubjectEdit,onChange:s=>t({...a,allowTeacherSubjectEdit:s.target.checked})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-indigo-50 dark:bg-indigo-900/10 rounded-lg border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center text-indigo-600",children:e.jsx(Ee,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white",children:"Allow Teacher Direct Publish"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Teachers can publish Class Tests instantly without admin approval"})]})]}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-600",checked:a.allowTeacherDirectPublish||!1,onChange:s=>t({...a,allowTeacherDirectPublish:s.target.checked})})]})]})]}),e.jsxs(o,{className:"border border-purple-200 dark:border-purple-900/50 bg-purple-50 dark:bg-purple-900/10",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-purple-700 dark:text-purple-400 uppercase flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"})," Principal Access"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-900 rounded-lg border border-purple-100 dark:border-purple-800",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Enable Principal Login?"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-purple-600",checked:a.hasPrincipalLogin||!1,onChange:s=>t({...a,hasPrincipalLogin:s.target.checked})})]}),a.hasPrincipalLogin&&e.jsxs("div",{className:"space-y-4 bg-white dark:bg-slate-900 p-4 rounded-xl border border-purple-100 dark:border-purple-800 animate-fade-in-up",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Principal Email"}),e.jsx(i,{value:a.principalEmail||"",onChange:s=>t({...a,principalEmail:s.target.value}),placeholder:"principal@school.com"})]}),e.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-800"}),a.principalPassword?e.jsxs("div",{className:"flex items-center justify-between bg-green-50 dark:bg-green-900/10 p-3 rounded-lg border border-green-100 dark:border-green-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-bold text-green-700 dark:text-green-400",children:"Account Active"})]}),e.jsx("button",{onClick:X,className:"text-[10px] text-blue-600 hover:underline",children:"Reset Access"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-bold text-slate-600 dark:text-slate-300",children:"Access Setup"}),f?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-950 rounded-lg border border-slate-200 dark:border-slate-800 break-all text-[10px] font-mono text-slate-600 dark:text-slate-400",children:f}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(f),alert("Link Copied!")},className:"w-full flex items-center justify-center gap-2 py-2 bg-blue-600 text-white rounded-lg text-xs font-bold hover:bg-blue-700",children:[e.jsx(Te,{className:"w-3 h-3"})," Copy Link"]}),e.jsx("p",{className:"text-[10px] text-slate-400 text-center",children:"Share this link with the Principal to set their password."})]}):e.jsxs(ae,{onClick:X,disabled:G,className:"w-full flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-700 text-white shadow-none py-2 text-xs",children:[G?e.jsx(v,{className:"w-3 h-3 animate-spin"}):e.jsx(Re,{className:"w-3 h-3"}),"Generate Invite Link"]}),!f&&e.jsx("p",{className:"text-[10px] text-slate-400",children:"Generate a secure link for the Principal to set their own password."})]})]})]})]})]}),u==="DATA"&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(o,{className:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-slate-700 dark:text-white uppercase flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"})," Maintenance Console"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700 flex flex-col justify-between h-32 relative group",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 p-1.5 rounded-lg text-orange-600 dark:text-orange-400",children:e.jsx(qe,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-xl font-black text-slate-800 dark:text-white",children:O.ghosts})]}),e.jsx("p",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 leading-tight",children:"Ghost Admissions"})]}),e.jsxs("button",{onClick:()=>je("GHOSTS"),disabled:O.ghosts===0||B==="GHOSTS",className:"w-full py-1.5 rounded text-[10px] font-bold bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:bg-red-50 hover:text-red-600 transition-colors flex items-center justify-center gap-1",children:[B==="GHOSTS"?e.jsx(v,{className:"w-3 h-3 animate-spin"}):e.jsx(L,{className:"w-3 h-3"})," Clear"]})]})})]}),e.jsxs(o,{className:"border border-green-200 dark:border-green-900/50 bg-green-50 dark:bg-green-900/10",children:[e.jsxs("h3",{className:"font-bold text-sm mb-4 text-green-700 dark:text-green-400 uppercase flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"})," Backup & Restore"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-green-100 dark:border-green-900/30",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white mb-1",children:"Backup Data"}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Download a full JSON copy of your campus data."}),e.jsx("button",{onClick:fe,className:"w-full py-2 bg-green-600 hover:bg-green-700 text-white text-xs font-bold rounded-lg flex items-center justify-center gap-2",children:"Download Backup"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-green-100 dark:border-green-900/30",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white mb-1",children:"Restore Data"}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Overwrite current data with a backup file."}),e.jsxs("label",{className:"w-full py-2 bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 text-slate-700 dark:text-slate-300 text-xs font-bold rounded-lg flex items-center justify-center gap-2 cursor-pointer",children:[P?e.jsx(v,{className:"w-3 h-3 animate-spin"}):e.jsx(De,{className:"w-3 h-3"})," ",P?"Restoring...":"Select File",e.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:Ne,disabled:P})]})]})]})]})]})]})]})};export{_e as default};
