import{c as ee,u as te,r as s,j as e,Y as ce,$ as oe,L as G,v as xe,a0 as se,n as O,G as D,q as $,a as _,A as ae,a1 as me,i as N,a2 as le,B as he,f as H,a3 as be,s as z,a4 as Q,d as X,a5 as K,a6 as ue,e as V,a7 as pe,w as F,Q as fe,a8 as ge,m as je,p as re,J as Ne,a9 as we,W as ne,X as ve,E as ye}from"./index-nLKxSC0o.js";import{C as ke}from"./clipboard-list-Dd2JqAXV.js";import{F as Se}from"./frown-Dbihazn1.js";import{Q as J}from"./qr-code-Bd-XiYCy.js";import{P as Ee}from"./palette-90txpECt.js";import{T as Pe}from"./target-CTS0JSUf.js";import{B as Z}from"./bell-XjpWO3_y.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=ee("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=ee("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),Ae=({targetDate:t})=>{const[a,h]=s.useState("");return s.useEffect(()=>{const x=setInterval(()=>{const v=new Date().getTime(),i=new Date(t).getTime()-v;if(i<=0)h("LIVE NOW"),clearInterval(x);else{const b=Math.floor(i/864e5),u=Math.floor(i%(1e3*60*60*24)/(1e3*60*60)),r=Math.floor(i%(1e3*60*60)/(1e3*60));b>0?h(`in ${b} days`):h(`in ${u}h ${r}m`)}},1e3);return()=>clearInterval(x)},[t]),e.jsx("span",{className:`text-[9px] font-bold px-2 py-0.5 rounded ${a==="LIVE NOW"?"bg-red-500 text-white animate-pulse":"bg-blue-100 text-blue-700"}`,children:a||"..."})},De=({user:t,marks:a,assessments:h,schoolConfig:x})=>{const v=te(),[l,i]=s.useState([]);s.useEffect(()=>{(async()=>{const m=(await N.getExamsForClass(t.classId)).filter(w=>new Date(w.endTime)>new Date);i(m)})()},[t.classId]);const b=s.useMemo(()=>{if(!a||!a.subjects)return null;let r=-1,S=101,m="",w="",C=0,P=0;Object.entries(a.subjects).forEach(([T,M])=>{const d=typeof M=="number"?M:0;d>r&&(r=d,m=T),d<S&&d>0&&(S=d,w=T),C+=d,P++});const I=P>0?C/P:0;let A="Consistency is key! Keep practicing daily.",g="NEUTRAL";return S<35?(A=`You're struggling with ${w}. Try spending 30 mins extra daily on it!`,g="URGENT"):I>90?(A=`You are a champion in ${m}! ðŸŒŸ Maintain this momentum.`,g="EXCELLENT"):I>75?(A=`Great job! To reach the top, focus on converting your ${w} marks to A grade.`,g="GOOD"):A=`You have potential. A little more focus on ${w} can boost your total rank.`,{strong:m||"None",weak:w||"None",tip:A,mood:g}},[a]),u=()=>{v("/setup")};return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[b&&e.jsxs("div",{className:`rounded-3xl p-6 relative overflow-hidden shadow-lg border border-white/10 ${t.isPremium?b.mood==="EXCELLENT"?"bg-gradient-to-br from-green-500 to-emerald-700":b.mood==="URGENT"?"bg-gradient-to-br from-orange-500 to-red-600":"bg-gradient-to-br from-indigo-500 to-purple-700":"bg-slate-900"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 text-white",children:e.jsx(ce,{className:"w-32 h-32 rotate-12"})}),t.isPremium?e.jsxs("div",{className:"relative z-10 text-white animate-fade-in-up",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsxs("span",{className:"bg-white/20 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 backdrop-blur-md",children:[e.jsx(oe,{className:"w-3 h-3"})," AI Smart Analyst"]})}),e.jsxs("p",{className:"text-lg md:text-xl font-bold leading-relaxed mb-6",children:['"',b.tip,'"']}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-black/20 backdrop-blur-md rounded-xl p-3 border border-white/10",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold opacity-70 mb-1",children:"Strongest"}),e.jsx("p",{className:"font-black text-lg truncate",children:b.strong})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-md rounded-xl p-3 border border-white/10",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold opacity-70 mb-1",children:"Improve"}),e.jsx("p",{className:"font-black text-lg truncate",children:b.weak})]})]})]}):e.jsxs("div",{className:"relative z-10 text-white text-center py-6",children:[e.jsxs("div",{className:"blur-sm select-none opacity-50 mb-4",children:[e.jsx("p",{className:"text-xl font-bold",children:"Your performance requires attention in specific areas."}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[e.jsx("div",{className:"bg-white/10 h-16 rounded-xl"}),e.jsx("div",{className:"bg-white/10 h-16 rounded-xl"})]})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center mb-2 backdrop-blur-sm border border-white/20",children:e.jsx(G,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Unlock AI Insights"}),e.jsx("p",{className:"text-xs text-slate-300 max-w-xs mx-auto",children:"Get personalized study tips and strength analysis."})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-700 to-indigo-800 rounded-3xl p-1 shadow-lg transform transition-transform hover:scale-[1.02] cursor-pointer",onClick:u,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[22px] p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600",children:e.jsx(xe,{className:"w-5 h-5 fill-current"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Want this System?"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Implement ResultMate in your School."})]})]}),e.jsxs("button",{className:"bg-slate-900 dark:bg-white dark:text-slate-900 text-white px-4 py-2 rounded-xl text-xs font-bold flex items-center gap-2 shadow-lg transition-all",children:["Get Started ",e.jsx(se,{className:"w-3 h-3"})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2 text-lg",children:[e.jsx(O,{className:"w-5 h-5 text-blue-500"})," Upcoming"]}),e.jsx("span",{className:"text-xs font-bold bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:h.length+l.length})]}),l.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:l.map(r=>e.jsxs(D,{className:"flex items-center gap-4 p-4 border-l-4 border-l-purple-500 hover:shadow-md transition-all",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center shrink-0",children:e.jsx($,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:r.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Ae,{targetDate:r.startTime}),e.jsxs("span",{className:"text-[10px] text-slate-500",children:[r.durationMinutes," mins"]})]})]})]},r.id))}),h.length>0?e.jsx("div",{className:"space-y-3",children:h.map(r=>{const m=r.schedules&&r.schedules.length>0?"Scheduled":"Ongoing";return e.jsxs(D,{className:"flex items-center gap-4 p-4 hover:border-blue-300 transition-colors cursor-pointer group",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 shadow-sm group-hover:scale-110 transition-transform ${r.type==="STAR"?"bg-yellow-100 text-yellow-600":"bg-blue-100 text-blue-600"}`,children:e.jsx(ke,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm mb-1 truncate",children:r.name}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"})," ",r.frequency]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"})," ",r.questions.length," Items"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded ${m==="Ongoing"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:m})})]},r.id)})}):l.length===0&&e.jsxs("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800/50 rounded-3xl border-2 border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx(ae,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No tasks scheduled yet."}),e.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"Enjoy your free time!"})]})]}),x&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>window.open(`https://wa.me/?text=Check%20out%20my%20school%20${encodeURIComponent(x.schoolName)}%20on%20ResultMate!`,"_blank"),className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center gap-2 hover:bg-slate-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:e.jsx(me,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:"Share School"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600",children:e.jsx(O,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:"Timetable (Soon)"})]})]})]})},Te=({marks:t,user:a})=>{if(!t)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-center p-6 animate-fade-in-up",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:e.jsx(Se,{className:"w-10 h-10 text-slate-400"})}),e.jsx("h3",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"No Data Available"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Marks for the current term haven't been published yet."})]});const h=Object.entries(t.subjects),x=h.length*100,v=x>0?t.total/x*100:0;return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(D,{className:"bg-gradient-to-br from-blue-600 to-indigo-700 text-white border-none",children:[e.jsx("p",{className:"text-xs font-bold opacity-70 uppercase mb-1",children:"Total Score"}),e.jsx("h2",{className:"text-3xl font-black",children:t.total}),e.jsxs("div",{className:"mt-2 text-[10px] bg-white/20 inline-block px-2 py-0.5 rounded",children:[v.toFixed(1),"% Secured"]})]}),e.jsxs(D,{className:"bg-white dark:bg-slate-800 flex flex-col justify-center items-center text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mb-2",children:e.jsx(le,{className:"w-6 h-6 text-purple-600"})}),e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Grade"}),e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white",children:t.grade})]})]}),e.jsxs(D,{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-blue-500"})," Subject Analysis"]})}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-40 mb-2 border-b border-slate-100 dark:border-slate-700 pb-2 px-1",children:h.map(([l,i],b)=>{const u=typeof i=="number"?i:0,r=Math.min(100,Math.max(10,u)),S=u>=90?"bg-green-500":u>=75?"bg-blue-500":u>=40?"bg-yellow-500":"bg-red-500";return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-8 bg-slate-800 text-white text-[10px] py-1 px-2 rounded transition-opacity pointer-events-none z-10 whitespace-nowrap",children:[l,": ",u]}),e.jsx("div",{className:`text-[9px] font-bold ${u>=90?"text-green-600":"text-slate-400"}`,children:u}),e.jsx("div",{className:`w-full rounded-t-md transition-all duration-1000 ease-out hover:opacity-80 ${S}`,style:{height:`${r}%`}})]},b)})}),e.jsx("div",{className:"flex justify-between text-[8px] text-slate-400 font-bold uppercase px-1",children:h.map(([l],i)=>e.jsx("div",{className:"flex-1 text-center truncate px-0.5",children:l.substring(0,3)},i))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm ml-1 flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-slate-500"})," Report Card"]}),h.map(([l,i],b)=>{const u=typeof i=="number"?i:0;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl flex items-center justify-between border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-1 h-8 rounded-full ${u>=40?"bg-blue-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:l}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Maximum: 100"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xl font-black text-slate-800 dark:text-white",children:u}),e.jsx("p",{className:`text-[10px] font-bold ${u>=40?"text-green-500":"text-red-500"}`,children:u>=40?"PASS":"FAIL"})]})]},b)})]})]})},Ie=({user:t,schoolConfig:a,onUpdateUser:h})=>{const[x,v]=s.useState(!1),[l,i]=s.useState(""),[b,u]=s.useState(!1),[r,S]=s.useState(""),[m,w]=s.useState(!1),[C,P]=s.useState(!1),[I,A]=s.useState(20);s.useEffect(()=>{(async()=>{const E=await N.getGlobalSettings();E.STUDENT_PREMIUM_FEE&&A(parseInt(E.STUDENT_PREMIUM_FEE)||20)})()},[]);const g=async j=>{if(!j.target.files||!j.target.files[0])return;u(!0);const E=await N.uploadImage(j.target.files[0],"students");u(!1),E.success&&E.publicUrl?i(E.publicUrl):alert("Upload failed.")},T=async()=>{if(!l)return;const j=await N.createProfileRequest(t.id,"photoUrl",l);j.success?(alert("Photo update requested. Teacher will approve."),v(!1),i("")):alert("Failed: "+j.message)},M=async()=>{if(!r||r.length<4){alert("Password too short");return}const j=await N.changePassword(t.id,r);j.success?(alert("Password updated!"),S("")):alert("Failed: "+j.message)},d=async()=>{P(!0),setTimeout(async()=>{const j="UPI"+Date.now(),E=await N.activateStudentPremium(t.id,j);P(!1),w(!1),E.success?(h({isPremium:!0}),alert("ðŸŽ‰ Premium Activated!")):alert("Failed")},1500)},p=async j=>{var U;const E=((U=t.socialLinks)==null?void 0:U._preferences)||{};h({socialLinks:{...t.socialLinks||{},_preferences:{...E,theme:j}}}),await N.updateStudentPreferences(t.id,{...E,theme:j})};return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsx("div",{className:"relative group",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-1 shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("div",{className:`p-6 rounded-[20px] text-white relative overflow-hidden ${t.isPremium?"bg-gradient-to-br from-slate-900 to-black":"bg-gradient-to-br from-blue-600 to-indigo-700"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:e.jsx(J,{className:"w-24 h-24"})}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg opacity-90",children:"Digital Identity"}),e.jsx("p",{className:"text-xs opacity-70",children:"Official Student ID"})]}),(a==null?void 0:a.logoUrl)&&e.jsx("img",{src:a.logoUrl,className:"w-10 h-10 object-contain bg-white rounded-lg p-1"})]}),e.jsxs("div",{className:"flex gap-4 items-center relative z-10",children:[e.jsx("img",{src:t.photoUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.name}`,className:"w-20 h-20 rounded-xl object-cover border-2 border-white/30 bg-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black leading-tight mb-1",children:t.name}),e.jsx("p",{className:"text-sm font-mono opacity-80",children:t.regNo}),e.jsxs("div",{className:`mt-2 inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${t.isPremium?"bg-yellow-500 text-black":"bg-white/20"}`,children:[t.isPremium?e.jsx(H,{className:"w-3 h-3"}):e.jsx(be,{className:"w-3 h-3"}),t.isPremium?"Elite Student":"Verified"]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] uppercase opacity-60",children:"School"}),e.jsx("p",{className:"text-xs font-bold",children:a==null?void 0:a.schoolName})]}),e.jsx("div",{className:"h-8 w-8 bg-white rounded flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-black"})})]}),!t.isPremium&&e.jsxs("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] flex flex-col items-center justify-center text-center p-6 z-20",children:[e.jsx(G,{className:"w-10 h-10 text-white/50 mb-2"}),e.jsx("h4",{className:"font-bold text-white text-lg",children:"Unlock ID Card"}),e.jsxs("button",{onClick:()=>w(!0),className:"mt-3 bg-yellow-500 hover:bg-yellow-400 text-black text-xs font-bold px-6 py-2.5 rounded-full shadow-lg transition-transform hover:scale-105",children:["Get Verified (â‚¹",I,")"]})]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-purple-500"})," Personalize"]}),!t.isPremium&&e.jsx(G,{className:"w-4 h-4 text-slate-400"})]}),!t.isPremium&&e.jsx("div",{className:"absolute inset-0 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px] z-10 flex flex-col items-center justify-center",children:e.jsxs("button",{onClick:()=>w(!0),className:"bg-purple-600 hover:bg-purple-700 text-white text-xs font-bold px-6 py-2.5 rounded-full shadow-lg flex items-center gap-2",children:[e.jsx(z,{className:"w-3 h-3 fill-white"})," Unlock Themes"]})}),e.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Choose your dashboard style:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("button",{onClick:()=>p("DEFAULT"),className:"h-16 rounded-xl bg-blue-600 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Standard"}),e.jsx("button",{onClick:()=>p("NEON"),className:"h-16 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Neon"}),e.jsx("button",{onClick:()=>p("GOLD"),className:"h-16 rounded-xl bg-gradient-to-r from-yellow-600 to-amber-700 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Gold"}),e.jsx("button",{onClick:()=>p("DARK_ROYAL"),className:"h-16 rounded-xl bg-slate-900 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Dark Royal"}),e.jsx("button",{onClick:()=>p("MINIMAL"),className:"h-16 rounded-xl bg-white border-2 border-slate-200 shadow-sm flex items-center justify-center text-slate-800 text-[10px] font-bold",children:"Minimal"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-blue-500"})," Profile Photo"]}),t.isPremium?!x&&e.jsx("button",{onClick:()=>v(!0),className:"text-xs font-bold text-blue-600 underline",children:"Change"}):e.jsx(G,{className:"w-4 h-4 text-slate-400"})]}),x?e.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-900 p-4 rounded-xl",children:[e.jsx(X,{className:"h-9 text-xs",placeholder:"Paste Image URL...",value:l,onChange:j=>i(j.target.value)}),e.jsx("p",{className:"text-center text-[10px] text-slate-400 font-bold",children:"OR"}),e.jsxs("label",{className:"cursor-pointer bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 p-2 rounded-lg text-xs font-bold text-center flex items-center justify-center gap-2",children:[b?e.jsx(K,{className:"w-3 h-3 animate-spin"}):e.jsx(ue,{className:"w-3 h-3"})," Upload Photo",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:g,disabled:b})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:T,className:"flex-1 bg-blue-600 text-white text-xs font-bold py-2 rounded-lg",children:"Update"}),e.jsx("button",{onClick:()=>v(!1),className:"flex-1 bg-slate-200 text-slate-600 text-xs font-bold py-2 rounded-lg",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-400",children:t.photoUrl?e.jsx("img",{src:t.photoUrl,className:"w-full h-full rounded-full object-cover"}):e.jsx(Q,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-xs text-slate-500",children:"Update photo to personalize ID Card."})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"Security"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{type:"password",placeholder:"New Password",value:r,onChange:j=>S(j.target.value)}),e.jsx(V,{onClick:M,className:"whitespace-nowrap",children:"Update"})]})]}),e.jsxs("button",{onClick:()=>{localStorage.removeItem("school_id"),window.location.reload()},className:"w-full py-4 text-red-500 font-bold text-sm bg-red-50 dark:bg-red-900/10 rounded-2xl hover:bg-red-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"})," Sign Out"]}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-3xl p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-yellow-400 to-orange-500"}),e.jsx("button",{onClick:()=>w(!1),className:"absolute top-4 right-4 text-slate-400 font-bold",children:"âœ•"}),e.jsxs("div",{className:"text-center mb-6 mt-2",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:e.jsx(H,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white",children:"Unlock Premium"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"One-time payment for full access"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-xl mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"Annual Fee"}),e.jsxs("span",{className:"text-lg font-black text-slate-900 dark:text-white",children:["â‚¹",I]})]}),e.jsx("div",{className:"h-px bg-slate-200 dark:border-slate-700 my-2"}),e.jsxs("ul",{className:"space-y-3 text-xs text-slate-500 dark:text-slate-400 mt-3",children:[e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(F,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"Verified Badge"})," on Profile"]})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(F,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"Download"})," Digital ID Card"]})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(F,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"AI Analytics"})," & Study Tips"]})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(F,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"Customize"})," Dashboard Themes"]})]})]})]}),e.jsx("button",{onClick:d,disabled:C,className:"w-full bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-orange-500/30 flex items-center justify-center gap-2 transition-transform active:scale-95",children:C?e.jsx(K,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-5 h-5"})," Pay â‚¹",I," Now"]})})]})})]})},Ue=({targetDate:t})=>{const[a,h]=s.useState("");return s.useEffect(()=>{const x=setInterval(()=>{const v=new Date().getTime(),i=new Date(t).getTime()-v;if(i<=0)h("READY"),clearInterval(x);else{const b=Math.floor(i%864e5/36e5),u=Math.floor(i%(1e3*60*60)/(1e3*60)),r=Math.floor(i%(1e3*60)/1e3);h(`Starts in: ${b}h ${u}m ${r}s`)}},1e3);return()=>clearInterval(x)},[t]),e.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded flex items-center gap-1 ${a==="READY"?"bg-green-100 text-green-700 animate-pulse":"bg-blue-50 text-blue-600"}`,children:[e.jsx($,{className:"w-3 h-3"})," ",a||"Loading..."]})},Me=({user:t})=>{const[a,h]=s.useState([]),[x,v]=s.useState(!0),[l,i]=s.useState(null),[b,u]=s.useState([]),[r,S]=s.useState({}),[m,w]=s.useState(0),[C,P]=s.useState(0),[I,A]=s.useState(!1),[g,T]=s.useState(null),[M,d]=s.useState(!1);s.useEffect(()=>{p()},[]),s.useEffect(()=>{if(!l)return;const n=setInterval(()=>{w(c=>c<=1?(clearInterval(n),U(),0):c-1)},1e3);return()=>clearInterval(n)},[l]);const p=async()=>{v(!0);const n=await N.getExamsForClass(t.classId);h(n),v(!1)},j=async n=>{var W;const c=await N.getExamSubmission(n.id,t.id);if(c&&c.submittedAt){T(c);return}const k=new Date,o=new Date(n.endTime),f=new Date(n.startTime);if(k<f)return alert("Exam has not started yet.");if(k>o)return alert("Exam expired.");const y=await N.startExamAttempt(n.id,t.id);if(!y.success)return alert("Failed to start exam: "+y.message);const L=new Date(y.startedAt),R=Math.floor((new Date().getTime()-L.getTime())/1e3),de=n.durationMinutes*60,Y=Math.max(0,de-R);if(Y<=0){alert("Time Limit Exceeded!"),await N.submitExam(n.id,t.id,{},0,0);return}let B=[...n.questions];(W=n.settings)!=null&&W.shuffleQuestions&&(B=B.sort(()=>Math.random()-.5)),u(B),i(n),w(Y),S((c==null?void 0:c.answers)||{}),P(0)},E=(n,c)=>{S(k=>({...k,[n]:c}))},U=async()=>{var f;if(!l||I)return;A(!0);let n=0,c=0;l.questions.forEach(y=>{c+=y.marks,r[y.id]===y.correctOptionIndex&&(n+=y.marks)});const k=await N.submitExam(l.id,t.id,r,n,c);A(!1);const o=l;if(i(null),k.success)if((f=o.settings)!=null&&f.showResultImmediately){const y=await N.getExamSubmission(o.id,t.id);T(y)}else alert("Exam Submitted! Result will be published by teacher."),p();else alert("Submission failed. Please contact teacher.")},q=n=>{const c=Math.floor(n/60),k=n%60;return`${c}:${k.toString().padStart(2,"0")}`};if(l){const n=b[C];return e.jsxs("div",{className:"fixed inset-0 z-50 bg-white dark:bg-slate-900 flex flex-col animate-fade-in-up",children:[e.jsxs("div",{className:"p-4 bg-slate-900 text-white flex justify-between items-center shadow-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm opacity-80",children:l.title}),e.jsxs("p",{className:"text-xs",children:["Q ",C+1," / ",b.length]})]}),e.jsx("div",{className:`font-mono text-xl font-bold px-3 py-1 rounded-lg ${m<60?"bg-red-500 animate-pulse":"bg-white/20"}`,children:q(m)})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6 leading-relaxed",children:n.text}),e.jsx("div",{className:"space-y-3",children:n.options.map((c,k)=>e.jsx("div",{onClick:()=>E(n.id,k),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${r[n.id]===k?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${r[n.id]===k?"border-blue-500 bg-blue-500 text-white":"border-slate-300"}`,children:r[n.id]===k&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium",children:c})]})},k))})]}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex justify-between gap-4",children:[e.jsx("button",{disabled:C===0,onClick:()=>P(c=>c-1),className:"px-6 py-3 rounded-xl bg-slate-100 dark:bg-slate-800 font-bold text-slate-500 disabled:opacity-50",children:e.jsx(ge,{className:"w-5 h-5"})}),C===b.length-1?e.jsx("button",{onClick:U,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl py-3 shadow-lg shadow-green-500/30",children:"Submit Exam"}):e.jsxs("button",{onClick:()=>P(c=>c+1),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl py-3 flex items-center justify-center gap-2",children:["Next Question ",e.jsx(se,{className:"w-5 h-5"})]})]})]})}if(g){const n=a.find(c=>c.id===g.examId);return e.jsxs("div",{className:"animate-fade-in-up space-y-6",children:[e.jsxs(D,{className:"text-center py-10 bg-gradient-to-b from-blue-50 to-white dark:from-slate-800 dark:to-slate-900",children:[e.jsx("div",{className:"w-24 h-24 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(_,{className:"w-12 h-12 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white mb-2",children:"Exam Completed!"}),e.jsx("p",{className:"text-slate-500 mb-6",children:"You scored"}),e.jsx("div",{className:"text-6xl font-black text-blue-600 mb-2",children:g.score}),e.jsxs("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest",children:["Out of ",g.totalMarks]}),e.jsxs("div",{className:"mt-8 flex gap-3 justify-center",children:[e.jsx(V,{onClick:()=>T(null),variant:"secondary",children:"Back to Exams"}),e.jsx(V,{onClick:()=>d(!0),className:"bg-blue-600 text-white",children:"View Solution"})]})]}),M&&n&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:"Answer Key"}),n.questions.map((c,k)=>{const o=g.answers[c.id],f=o===c.correctOptionIndex;return e.jsxs(D,{className:`border-l-4 ${f?"border-green-500":"border-red-500"}`,children:[e.jsxs("div",{className:"mb-2 font-bold text-slate-800 dark:text-white text-sm",children:[e.jsxs("span",{className:"text-slate-400 mr-2",children:[k+1,"."]})," ",c.text]}),e.jsx("div",{className:"space-y-1",children:c.options.map((y,L)=>{let R="p-2 rounded text-xs border border-transparent";return L===c.correctOptionIndex?R+=" bg-green-50 dark:bg-green-900/20 text-green-700 border-green-200 font-bold":L===o&&!f?R+=" bg-red-50 dark:bg-red-900/20 text-red-700 border-red-200":R+=" text-slate-500 opacity-70",e.jsxs("div",{className:R,children:[y,L===c.correctOptionIndex&&e.jsx(je,{className:"w-3 h-3 inline ml-2"}),L===o&&!f&&e.jsx(re,{className:"w-3 h-3 inline ml-2"})]},L)})})]},c.id)})]})]})}return e.jsxs("div",{className:"space-y-4 animate-fade-in-up",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white mb-4",children:"Scheduled Exams"}),a.map(n=>{const c=new Date,k=new Date(n.startTime),o=new Date(n.endTime);let f="UPCOMING";return c>o?f="EXPIRED":c>=k&&(f="LIVE"),e.jsxs(D,{className:"relative overflow-hidden",children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${f==="LIVE"?"bg-green-500":f==="UPCOMING"?"bg-yellow-500":"bg-slate-300"}`}),e.jsxs("div",{className:"pl-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-lg",children:n.title}),e.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded uppercase ${f==="LIVE"?"bg-green-100 text-green-700 animate-pulse":"bg-slate-100 text-slate-500"}`,children:f})]}),e.jsx("p",{className:"text-xs text-slate-500 mb-4 line-clamp-2",children:n.description||"No instructions provided."}),e.jsxs("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-600 dark:text-slate-400 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"})," ",n.durationMinutes," Mins"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"w-3 h-3"})," ",n.questions.length," Qs"]})]}),e.jsx("div",{className:"flex gap-2 items-center",children:f==="UPCOMING"?e.jsx("div",{className:"flex-1 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 p-2 rounded-lg text-center",children:e.jsx(Ue,{targetDate:n.startTime})}):e.jsx("button",{onClick:()=>j(n),className:`flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${f==="LIVE"?"bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-500/30":"bg-slate-100 text-slate-400"}`,children:f==="LIVE"?e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-4 h-4 fill-white"})," Start Exam"]}):"View Result"})})]})]},n.id)}),a.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-400 text-sm",children:"No exams scheduled for your class."})})]})},Le=({user:t})=>{const[a,h]=s.useState([]),[x,v]=s.useState([]),[l,i]=s.useState(!0),[b,u]=s.useState(null),[r,S]=s.useState(null),[m,w]=s.useState(""),[C,P]=s.useState(!1);s.useEffect(()=>{I()},[t]);const I=async()=>{i(!0);const d=await N.getFeeStructures(t.classId),p=await N.getStudentPayments(t.id);h(d),v(p),i(!1)},A=d=>{const p=x.find(E=>E.feeId===d.id);return p&&p.status==="PAID"?{label:"PAID",color:"text-green-600 bg-green-50 border-green-200",icon:_,paidAmount:p.amountPaid}:d.dueDate&&new Date(d.dueDate)<new Date?{label:"OVERDUE",color:"text-red-600 bg-red-50 border-red-200",icon:ae,paidAmount:0}:{label:"PENDING",color:"text-slate-500 bg-slate-50 border-slate-200",icon:$,paidAmount:0}},g=async()=>{if(!r||!m||!b)return alert("All fields required");P(!0);const d=await N.submitPaymentProof(b.amount,m,r,"STUDENT_FEE",{studentId:t.id,feeId:b.id});P(!1),d.success?(alert("Proof uploaded! Status will update after verification."),u(null)):alert("Failed: "+d.message)};if(l)return e.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Fees..."});const T=a.reduce((d,p)=>d+p.amount,0),M=x.reduce((d,p)=>d+(p.amountPaid||0),0);return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(D,{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white border-none",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(ne,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"Fee Summary"}),e.jsx("p",{className:"text-xs text-emerald-100",children:"Academic Year 2024-25"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-emerald-200 uppercase mb-1",children:"Total Payable"}),e.jsxs("p",{className:"text-2xl font-black",children:["â‚¹",T]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-emerald-200 uppercase mb-1",children:"Paid So Far"}),e.jsxs("p",{className:"text-2xl font-black",children:["â‚¹",M]})]})]})]}),e.jsx("div",{className:"space-y-3",children:a.map(d=>{const p=A(d),j=p.icon;return e.jsxs("div",{className:`p-4 rounded-xl border flex justify-between items-center bg-white dark:bg-slate-800 ${p.label==="OVERDUE"?"border-red-200":"border-slate-100 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${p.color.split(" ")[1]} ${p.color.split(" ")[0]}`,children:e.jsx(j,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:d.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Due: ",d.dueDate?new Date(d.dueDate).toLocaleDateString():"N/A"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-black text-slate-800 dark:text-white",children:["â‚¹",d.amount]}),p.label==="PAID"?e.jsx("div",{className:"text-[10px] text-green-600 font-bold mt-1 uppercase",children:"PAID"}):e.jsx("button",{onClick:()=>u(d),className:"text-[10px] bg-blue-600 text-white px-2 py-1 rounded font-bold mt-1",children:"Pay / Upload Proof"})]})]},d.id)})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(D,{className:"w-full max-w-sm relative",children:[e.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 text-slate-400",children:e.jsx(ve,{className:"w-5 h-5"})}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-2",children:["Pay: ",b.name]}),e.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Please pay ",e.jsxs("b",{children:["â‚¹",b.amount]})," to the school account and upload screenshot."]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full border rounded p-2 text-sm",placeholder:"UTR / Ref Number",value:m,onChange:d=>w(d.target.value)}),e.jsxs("label",{className:"block w-full border-2 border-dashed border-slate-300 rounded p-4 text-center cursor-pointer hover:bg-slate-50",children:[r?r.name:e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-6 h-6 mx-auto text-slate-400 mb-1"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Tap to Upload Screenshot"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:d=>{var p;return S(((p=d.target.files)==null?void 0:p[0])||null)}})]}),e.jsx(V,{onClick:g,disabled:C,className:"w-full bg-blue-600 text-white",children:C?"Uploading...":"Submit Payment Proof"})]})]})})]})},Re=({user:t})=>{const[a,h]=s.useState(null),[x,v]=s.useState(!0);return s.useEffect(()=>{(async()=>{const i=await N.getStudentAssessmentStats(t.id);h(i),v(!1)})()},[t]),x?e.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Reports..."}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(D,{className:"bg-gradient-to-br from-purple-600 to-indigo-600 text-white border-none",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 opacity-80",children:[e.jsx(z,{className:"w-4 h-4 text-yellow-300 fill-yellow-300"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Total Stars"})]}),e.jsx("h3",{className:"text-3xl font-black",children:a.history.reduce((l,i)=>l+(i.type==="STAR"?i.score:0),0)})]}),e.jsxs(D,{className:"bg-white dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-slate-500",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Activities"})]}),e.jsx("h3",{className:"text-3xl font-black text-slate-800 dark:text-white",children:a.history.length})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-orange-500"})," Performance by Category"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[a.programs.map((l,i)=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-bold text-sm text-slate-800 dark:text-white truncate",children:l.name}),e.jsx("span",{className:"text-[10px] font-bold bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded text-slate-500",children:l.type})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("span",{className:"text-2xl font-black text-blue-600",children:l.totalScore}),e.jsxs("span",{className:"text-xs text-slate-400 mb-1",children:["points in ",l.entries," sessions"]})]})]},i)),a.programs.length===0&&e.jsx("p",{className:"col-span-full text-center text-xs text-slate-400",children:"No active assessments."})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-blue-500"})," Recent Logs"]}),e.jsx("div",{className:"space-y-2",children:a.history.slice(0,10).map((l,i)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-50 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-xs text-slate-700 dark:text-slate-300",children:l.program}),e.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(l.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[l.type==="STAR"&&e.jsx(z,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"font-black text-sm text-slate-800 dark:text-white",children:l.score}),e.jsxs("span",{className:"text-[10px] text-slate-400",children:["/ ",l.max]})]})]},i))})]})]})},$e=({user:t})=>{const[a,h]=s.useState([]),[x,v]=s.useState([]),[l,i]=s.useState(!0);s.useEffect(()=>{b()},[t]);const b=async()=>{i(!0);const m=await N.getStudentAttendanceStats(t.id);h(m.dailyStats),v(m.summaryStats),i(!1)};if(l)return e.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Attendance..."});const u=a.filter(m=>m.status==="PRESENT").length,r=a.length,S=r>0?Math.round(u/r*100):0;return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(D,{className:"bg-gradient-to-br from-green-600 to-emerald-700 text-white border-none",children:[e.jsx("p",{className:"text-xs font-bold opacity-80 uppercase mb-1",children:"Attendance"}),e.jsxs("h3",{className:"text-4xl font-black",children:[x.length>0?x[0].percentage:S,"%"]}),e.jsx("p",{className:"text-[10px] mt-2 bg-white/20 inline-block px-2 py-0.5 rounded",children:x.length>0?x[0].term:"Overall"})]}),e.jsxs(D,{className:"bg-white dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Days Present"}),e.jsx("h3",{className:"text-3xl font-black text-slate-800 dark:text-white",children:x.length>0?x[0].presentDays:u}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:["Out of ",x.length>0?x[0].workingDays:r," working days"]})]})]}),a.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-blue-500"})," Recent Activity"]}),e.jsx("div",{className:"space-y-2",children:a.slice(0,10).map((m,w)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:new Date(m.date).toLocaleDateString()}),e.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded flex items-center gap-1 ${m.status==="PRESENT"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[m.status==="PRESENT"?e.jsx(_,{className:"w-3 h-3"}):e.jsx(re,{className:"w-3 h-3"}),m.status]})]},w))})]}),x.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 mt-6",children:"Term History"}),e.jsx("div",{className:"space-y-2",children:x.map((m,w)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:m.term}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"block text-sm font-black text-purple-600",children:[m.percentage,"%"]}),e.jsxs("span",{className:"text-[10px] text-slate-400",children:[m.presentDays,"/",m.workingDays," Days"]})]})]},w))})]}),a.length===0&&x.length===0&&e.jsx("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl",children:e.jsx("p",{className:"text-slate-400 text-sm",children:"No attendance records found."})})]})},Be=({user:t})=>{te();const[a,h]=s.useState("home"),[x,v]=s.useState(null),[l,i]=s.useState([]),[b,u]=s.useState([]),[r,S]=s.useState(null),[m,w]=s.useState([]),[C,P]=s.useState(!1),[I,A]=s.useState(0),[g,T]=s.useState(t),[M,d]=s.useState("Welcome"),[p,j]=s.useState({fees:!0,assessments:!0}),[E,U]=s.useState("bg-blue-600 shadow-blue-600/20");s.useEffect(()=>{T(t),q();const o=new Date().getHours();o<12?d("Good Morning"):o<18?d("Good Afternoon"):d("Good Evening")},[t]),s.useEffect(()=>{var y;switch(((y=(g.socialLinks||{})._preferences)==null?void 0:y.theme)||"DEFAULT"){case"NEON":U("bg-gradient-to-r from-purple-600 to-pink-600 shadow-purple-500/30");break;case"GOLD":U("bg-gradient-to-r from-yellow-600 to-amber-700 shadow-amber-500/30");break;case"DARK_ROYAL":U("bg-slate-900 shadow-slate-900/50");break;case"MINIMAL":U("bg-white border-b border-slate-200 !text-slate-900 shadow-sm");break;default:U(g.isPremium?"bg-slate-900 shadow-2xl shadow-yellow-900/20":"bg-blue-600 shadow-xl shadow-blue-600/20")}},[g]);const q=async()=>{const o=await N.getMarks(t.id,"Term 1");v(o);const f=await N.getStudentRequests(t.id);u(f);const y=await N.getSchoolConfig();S(y);const L=await N.getGlobalSettings();j({fees:L.MODULE_FEES!=="FALSE",assessments:L.MODULE_ASSESSMENTS!=="FALSE"});const R=await N.getAssessmentPrograms(void 0,t.classId);i(R),n()},n=async()=>{const o=await N.getNotifications(t.id,"STUDENT");w(o),A(o.filter(f=>!f.isRead).length)},c=async o=>{await N.markNotificationRead(o),w(f=>f.map(y=>y.id===o?{...y,isRead:!0}:y)),A(f=>Math.max(0,f-1))},k=o=>{T(f=>({...f,...o}))};return e.jsxs("div",{className:`min-h-screen pb-20 transition-colors duration-300 ${E.includes("bg-slate-900")?"text-white bg-slate-950":"text-slate-900 bg-slate-50"}`,children:[e.jsxs("div",{className:`p-6 pb-12 rounded-b-[2.5rem] relative overflow-hidden ${E}`,children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:g.photoUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${g.name}`,className:"w-12 h-12 rounded-full border-2 border-white/30 bg-white/10 backdrop-blur-sm object-cover",alt:"Profile"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-xs font-bold uppercase tracking-wider mb-0.5",children:M}),e.jsx("h2",{className:"text-white text-xl font-black leading-none",children:g.name.split(" ")[0]})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:()=>P(!0),className:"relative p-2 bg-white/10 hover:bg-white/20 rounded-full backdrop-blur-sm transition-all",children:[e.jsx(Z,{className:"w-5 h-5 text-white"}),I>0&&e.jsx("span",{className:"absolute top-0 right-0 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-blue-600"})]})})]})]}),e.jsxs("div",{className:"px-4 -mt-8 relative z-20",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl p-2 mb-6 flex justify-between items-center overflow-x-auto custom-scrollbar border border-slate-100 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>h("home"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${a==="home"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(le,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Home"})]}),e.jsxs("button",{onClick:()=>h("analytics"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${a==="analytics"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(ie,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Marks"})]}),p.assessments&&e.jsxs("button",{onClick:()=>h("behavior"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${a==="behavior"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(z,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Skills"})]}),p.fees&&e.jsxs("button",{onClick:()=>h("fees"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${a==="fees"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Fees"})]}),e.jsxs("button",{onClick:()=>h("exams"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${a==="exams"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx($,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Exams"})]}),e.jsxs("button",{onClick:()=>h("attendance"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${a==="attendance"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Attend"})]}),e.jsxs("button",{onClick:()=>h("profile"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${a==="profile"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Profile"})]})]}),e.jsxs("div",{className:"pb-10",children:[a==="home"&&e.jsx(De,{user:g,marks:x,assessments:l,schoolConfig:r}),a==="analytics"&&e.jsx(Te,{marks:x,user:g}),a==="profile"&&e.jsx(Ie,{user:g,schoolConfig:r,onUpdateUser:k}),a==="exams"&&e.jsx(Me,{user:g}),a==="fees"&&e.jsx(Le,{user:g}),a==="behavior"&&e.jsx(Re,{user:g}),a==="attendance"&&e.jsx($e,{user:g})]})]}),C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in-up",onClick:()=>P(!1),children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-3xl p-6 shadow-2xl relative",onClick:o=>o.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 dark:text-white flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-blue-500"})," Notifications"]}),e.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar",children:m.length>0?m.map(o=>e.jsxs("div",{onClick:()=>!o.isRead&&c(o.id),className:`p-3 rounded-xl border transition-all cursor-pointer ${o.isRead?"bg-slate-50 dark:bg-slate-800 border-slate-100 dark:border-slate-700":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${o.type==="ALERT"?"bg-red-100 text-red-600":"bg-slate-200 text-slate-600"}`,children:o.type}),e.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(o.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white",children:o.title}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300 mt-1",children:o.message})]},o.id)):e.jsx("p",{className:"text-center text-slate-400 text-sm py-8",children:"No new notifications."})}),e.jsx("button",{onClick:()=>P(!1),className:"w-full mt-4 py-3 bg-slate-100 dark:bg-slate-800 rounded-xl font-bold text-sm text-slate-600 dark:text-slate-300",children:"Close"})]})})]})};export{Be as default};
