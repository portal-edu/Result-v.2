const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./OverviewTab-BYG0g-ob.js","./index-Cq6F2XBU.js","./plus-vJV1guGR.js","./clipboard-check-Bx0RT_sl.js","./settings-B-r8rvze.js","./clipboard-list-DAbK2cl1.js","./ClassesTab-C5oJOSh_.js","./layout-grid-C3Jmpmww.js","./plus-circle-DmnTTXP7.js","./trash-2-D-tA7piC.js","./arrow-right-left-C8EB5qdf.js","./AssessmentsTab-DaZVfrGg.js","./pen-square-oEJFsf2p.js","./clock-zmBEFEum.js","./target-DduVXa8c.js","./FeesTab-BzYYzsa1.js","./printer-OBmT-Q9G.js","./SettingsTab-D4bp8phS.js","./user-x-bv2mgDTL.js","./save-eX2CXXz_.js","./hard-drive-DNtqtUzT.js","./BillingTab-CIQebFI8.js","./ReportsTab-BGbD7PZc.js","./PromotionTab-BfHOkOrN.js","./TimetableTab-BOt1HQLX.js","./CalendarTab-BWMH_uId.js"])))=>i.map(i=>d[i]);
import{c as P,u as ce,r as t,a as g,j as e,s as Ee,t as Pe,v as De,X as _,G as w,H as me,M as xe,b as G,d as S,R as Me,h as Te,l as Q,w as _e,x as Ae,D as Re,g as he,A as Ie,B as Le,y as Oe,U as Fe,o as Ue,W as $e,Z as Ge,z as f,E as Ve,_ as j,I as Be,J as He}from"./index-Cq6F2XBU.js";import{R as We,S as qe}from"./settings-B-r8rvze.js";import{C as Je}from"./clipboard-list-DAbK2cl1.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=P("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=P("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=P("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=P("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=P("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=P("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=P("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),st=({config:o,onNoticeClick:l})=>{const h=ce(),[a,u]=t.useState(""),[i,d]=t.useState([]),[n,v]=t.useState(!1),C=t.useRef(null);t.useEffect(()=>{const c=setTimeout(async()=>{if(a.length>=2){v(!0);const z=await g.searchAllStudents(a);d(z),v(!1)}else d([])},400);return()=>clearTimeout(c)},[a]),t.useEffect(()=>{const c=z=>{C.current&&!C.current.contains(z.target)&&d([])};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const D=c=>{d([]),u(""),alert(`Found Student ID: ${c}. (View Profile coming soon)`)};return e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4 bg-white dark:bg-slate-950 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm relative z-30",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-100 dark:border-blue-900/50 text-blue-600 dark:text-blue-400",children:o.logoUrl?e.jsx("img",{src:o.logoUrl,className:"w-8 h-8 object-contain",alt:"Logo"}):e.jsx(Ee,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white leading-tight tracking-tight",children:o.schoolName}),e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-wide mt-1",children:[e.jsx("span",{children:o.place}),e.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),e.jsx("span",{className:o.isPro?"text-emerald-600 flex items-center gap-1":"text-slate-400",children:o.isPro?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-3 h-3"})," PRO CAMPUS"]}):"FREE PLAN"})]})]})]}),e.jsxs("div",{className:"relative w-full md:w-64",ref:C,children:[e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),e.jsx("input",{className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg pl-9 pr-8 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 dark:text-slate-200",placeholder:"Search Student...",value:a,onChange:c=>u(c.target.value)}),a&&e.jsx("button",{onClick:()=>{u(""),d([])},className:"absolute right-2 top-2 text-slate-400 hover:text-slate-600 p-0.5 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:e.jsx(_,{className:"w-3 h-3"})})]}),i.length>0&&e.jsx("div",{className:"absolute top-12 left-0 w-full bg-white dark:bg-slate-900 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50 max-h-64 overflow-y-auto custom-scrollbar animate-fade-in-up",children:i.map(c=>e.jsxs("div",{onClick:()=>D(c.id),className:"p-3 border-b border-slate-100 dark:border-slate-800 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors",children:[e.jsx("p",{className:"font-bold text-sm text-slate-800 dark:text-white",children:c.name}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-[10px] bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-1.5 py-0.5 rounded font-bold",children:c.className}),e.jsx("span",{className:"text-[10px] font-mono text-slate-400",children:c.regNo})]})]},c.id))}),a.length>=2&&!n&&i.length===0&&e.jsx("div",{className:"absolute top-12 left-0 w-full bg-white dark:bg-slate-900 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 p-4 text-center text-xs text-slate-500 z-50",children:"No students found."})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs(w,{onClick:()=>h(`/school/${o.slug||o.id}`),variant:"secondary",className:"flex-1 md:flex-none flex justify-center items-center gap-2 text-xs border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 hover:text-blue-600",children:[e.jsx(me,{className:"w-4 h-4"})," Public Page"]}),e.jsxs(w,{onClick:l,className:"flex-1 md:flex-none flex justify-center items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-500/20",children:[e.jsx(xe,{className:"w-4 h-4"})," Post Notice"]})]})]})},at=({onClose:o,data:l,setData:h,scheduleTime:a,setScheduleTime:u,onSubmit:i,loading:d})=>e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(G,{className:"w-full max-w-md border-t-4 border-t-slate-900 relative",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-4 mb-6 pb-4 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-zinc-900 rounded-full flex items-center justify-center shrink-0",children:e.jsx(xe,{className:"w-6 h-6 text-slate-900 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white leading-tight",children:"Post Notice"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Broadcast to campus"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{placeholder:"Title (Optional)",value:l.title,onChange:n=>h({...l,title:n.target.value})}),e.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-lg p-3 text-sm h-32 resize-none outline-none focus:ring-2 focus:ring-slate-900",placeholder:"Message content...",value:l.message,onChange:n=>h({...l,message:n.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Schedule (Optional)"}),e.jsx(S,{type:"datetime-local",value:a,onChange:n=>u(n.target.value)})]}),e.jsx(w,{onClick:i,className:"w-full bg-slate-900 text-white hover:bg-slate-800",children:a?"Schedule Post":"Post Now"})]})]})}),lt=({onClose:o,date:l,setDate:h,onSubmit:a,loading:u})=>e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(G,{className:"max-w-md w-full relative border-t-4 border-emerald-600",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-50 dark:bg-emerald-900/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-emerald-100 dark:border-emerald-800",children:e.jsx(Me,{className:"w-8 h-8 text-emerald-600"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Publish Results"}),e.jsx("p",{className:"text-zinc-500 text-sm",children:"Make marks visible to public."})]}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Schedule Date (Optional)"}),e.jsx(S,{type:"datetime-local",value:l,onChange:i=>h(i.target.value)}),e.jsx("p",{className:"text-[10px] text-zinc-400 mt-1",children:"Leave empty for immediate release."})]})}),e.jsx(w,{onClick:a,disabled:u,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg shadow-emerald-900/20",children:u?"Processing...":l?"Schedule Publish":"Publish Now"})]})}),rt=({onClose:o,mode:l,setMode:h,classId:a,setClassId:u,classes:i,newStudent:d,setNewStudent:n,onSubmit:v,onCsv:C,setCsv:D,loading:c,saved:z,schoolId:A})=>{const[R,V]=t.useState([]),[M,I]=t.useState({});t.useEffect(()=>{(async()=>{var m;const b=await g.getSchoolConfig();b&&((m=b.admissionConfig)!=null&&m.customFields)&&V(b.admissionConfig.customFields)})()},[]),t.useEffect(()=>{n(s=>({...s,customData:M}))},[M]);const L=(s,b)=>{I(m=>({...m,[s]:b}))};return e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(G,{className:"max-w-md w-full relative h-[85vh] flex flex-col p-0 overflow-hidden bg-zinc-50 dark:bg-zinc-900",children:[e.jsxs("div",{className:"p-6 pb-2 bg-white dark:bg-zinc-950 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-zinc-900 rounded-full flex items-center justify-center shrink-0 border border-zinc-200 dark:border-zinc-800",children:e.jsx(Te,{className:"w-6 h-6 text-slate-900 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white leading-tight",children:"Add Students"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Manage admission"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(Q,{value:a,onChange:s=>u(s.target.value),children:[e.jsx("option",{value:"",children:"-- Choose Class --"}),i.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsx("div",{className:"flex bg-zinc-100 dark:bg-zinc-900 p-1 rounded-lg border border-zinc-200 dark:border-zinc-800",children:["PUBLIC","DELEGATE","BULK","SINGLE"].map(s=>e.jsx("button",{onClick:()=>h(s),className:`flex-1 py-1.5 px-1 rounded text-[10px] font-bold whitespace-nowrap transition-all ${l===s?"bg-white dark:bg-zinc-800 shadow text-slate-900 dark:text-white":"text-zinc-500"}`,children:s==="DELEGATE"?"Invite":s},s))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 pt-4",children:[l==="PUBLIC"&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl border border-blue-100 dark:border-blue-900/50 mb-4",children:[e.jsx(_e,{className:"w-10 h-10 text-blue-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Self Registration"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Share link for parents to apply."}),e.jsx("div",{className:"p-2 bg-white dark:bg-zinc-950 rounded border border-zinc-200 dark:border-zinc-800 text-[10px] text-zinc-500 font-mono mb-4 break-all",children:a?`${window.location.origin}#/register?schoolId=${A}&classId=${a}`:"Select Class First"}),e.jsx(w,{onClick:()=>{a&&navigator.clipboard.writeText(`${window.location.origin}#/register?schoolId=${A}&classId=${a}`)},className:"w-full bg-blue-600 text-white hover:bg-blue-700",children:"Copy Link"})]})}),l==="DELEGATE"&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs("div",{className:"bg-zinc-100 dark:bg-zinc-800 p-6 rounded-xl border border-zinc-200 dark:border-zinc-700",children:[e.jsx(Ae,{className:"w-10 h-10 text-zinc-500 mx-auto mb-2"}),e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Invite Teacher"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Let the teacher manage admissions."}),e.jsx(w,{onClick:()=>{a&&navigator.clipboard.writeText(`${window.location.origin}#/login?invite=${a}`)},variant:"secondary",className:"w-full bg-white dark:bg-zinc-950 border border-zinc-300 dark:border-zinc-700",children:"Copy Invite"})]})}),l==="BULK"&&e.jsxs("div",{className:"space-y-4 pt-4 text-center",children:[e.jsxs("a",{href:"data:text/csv;charset=utf-8,Name,RegNo,Gender,DOB\\nStudent Name,1001,Male,2008-05-20",download:"template.csv",className:"text-xs font-bold text-blue-600 underline flex items-center justify-center gap-1",children:[e.jsx(Re,{className:"w-3 h-3"})," Download Template"]}),e.jsxs("div",{className:"border-2 border-dashed border-zinc-300 dark:border-zinc-700 rounded-xl p-6 bg-zinc-50 dark:bg-zinc-900",children:[e.jsx(Ze,{className:"w-10 h-10 text-emerald-600 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Upload CSV (Name, RegNo, Gender, DOB)"}),e.jsx("input",{type:"file",accept:".csv",onChange:s=>{var b;return D(((b=s.target.files)==null?void 0:b[0])||null)},className:"text-xs w-full"})]}),e.jsx(w,{onClick:C,disabled:c,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white",children:c?"Uploading...":"Upload CSV"})]}),l==="SINGLE"&&e.jsxs("form",{onSubmit:v,className:"space-y-4 pt-2 relative",children:[z&&e.jsxs("div",{className:"absolute -top-4 right-0 text-[10px] text-green-600 font-bold flex gap-1",children:[e.jsx(he,{className:"w-3 h-3"})," Saved Draft"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Name"}),e.jsx(S,{value:d.name,onChange:s=>n({...d,name:s.target.value.toUpperCase()}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Reg No"}),e.jsx(S,{value:d.regNo,onChange:s=>n({...d,regNo:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Roll No"}),e.jsx(S,{value:d.rollNo,onChange:s=>n({...d,rollNo:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Gender"}),e.jsxs(Q,{value:d.gender,onChange:s=>n({...d,gender:s.target.value}),children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"DOB"}),e.jsx(S,{type:"date",value:d.dob,onChange:s=>n({...d,dob:s.target.value})})]})]}),R.length>0&&e.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-3 mt-2",children:[e.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase mb-2",children:"Additional Info"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:R.map(s=>{var b;return e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:s.label}),s.type==="SELECT"?e.jsxs(Q,{value:M[s.id]||"",onChange:m=>L(s.id,m.target.value),children:[e.jsx("option",{value:"",children:"Select"}),(b=s.options)==null?void 0:b.map(m=>e.jsx("option",{value:m,children:m},m))]}):e.jsx(S,{type:s.type==="NUMBER"?"number":s.type==="DATE"?"date":"text",value:M[s.id]||"",onChange:m=>L(s.id,m.target.value)})]},s.id)})})]}),e.jsx(w,{type:"submit",disabled:c,className:"w-full mt-4 bg-slate-900 text-white hover:bg-slate-800",children:c?"Saving...":"Save Student"})]})]})]})})};class it extends t.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(l){return{hasError:!0,error:l}}componentDidCatch(l,h){console.error("Uncaught error:",l,h)}render(){var l;return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900 p-4",children:e.jsxs(G,{className:"max-w-md w-full text-center border-t-4 border-red-500",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ie,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"The application encountered an unexpected error. Please try reloading to resolve the issue."}),e.jsx("div",{className:"bg-slate-100 dark:bg-slate-950 p-3 rounded-lg text-xs font-mono text-red-500 text-left mb-6 overflow-auto max-h-32 border border-slate-200 dark:border-slate-800",children:((l=this.state.error)==null?void 0:l.message)||"Unknown Error"}),e.jsxs(w,{onClick:()=>window.location.reload(),className:"w-full flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-500/20",children:[e.jsx(We,{className:"w-4 h-4"})," Reload Application"]})]})}):this.props.children}}const nt={home:{title:"Dashboard Overview",description:"Welcome to the Control Center. Here you get a bird's-eye view of your campus.",steps:["Check 'Crowd Radar' for holiday trends in your district.","Use 'Quick Launchpad' for common tasks like adding students.","Review 'Pending Admissions' to approve new students."],tips:"Click 'Publish Result' to make marks visible to parents instantly."},classes:{title:"Class Management",description:"Create and manage classrooms. You can create single classes or generate bulk batches.",steps:["Use 'Smart Batch Wizard' to create Class 1 to 10 in one click.","Use 'Manual Create' for specific courses like '+1 Science'.","Click 'Manage / Split' on a class card to move students between divisions."],tips:"Share the 'Invite Link' with teachers so they can set their own passwords."},promotion:{title:"Smart Promotion Engine",description:"Move students to the next academic year efficiently. Supports shuffling and merit balancing.",steps:["Step 1: Select 'Source' (Current Classes) and 'Target' (Next Year Classes).","Step 2: Choose 'Merit Balancing' if you want to distribute top scorers evenly.","Step 3: Review the 'Workbench'. Drag & drop students to adjust manually.","Step 4: Click 'Commit' to save changes permanently."],tips:"Always save a 'Draft' if you need to discuss the list with the Principal before finalizing."},fees:{title:"Fee Management",description:"Track student payments and generate digital receipts.",steps:["Create a 'Fee Structure' (e.g., Term 1 Fee - ₹500).","Click on the Fee Name to open the collection list.","Click 'Pay' next to a student to record a cash/UPI payment.","Download PDF receipts instantly."],tips:"You can set a 'Due Date' to automatically mark fees as Overdue."},assessments:{title:"Behavior & Skills",description:"Track non-academic performance like Discipline, Hygiene, or Reading Logs.",steps:["Create a Program (e.g., 'Daily Prayer Tracker').","Choose Evaluation Type: Stars, Emojis, or Marks.","Assign to Teachers or Parents.","View Leaderboards to see top performers."],tips:"Use 'Star Rating' for younger kids to keep them motivated."},timetable:{title:"AI Scheduler",description:"Generate conflict-free timetables automatically.",steps:["Setup: Define working days and school timings.","Staff: Add teachers and their subjects.","Map: Assign how many periods each subject needs per week.","Generate: Let AI build the schedule."],tips:"If generation fails, try reducing the workload or adding more teachers."},settings:{title:"System Configuration",description:"Control how your school portal behaves.",steps:["Update School Name, Logo, and Address.","Toggle 'Public Admission' to open/close registrations.","Enable 'Principal Login' to give view-only access.","Use 'Data Management' to backup or clean junk data."],tips:"Choose a 'Theme' (Modern/Classic) to change how the public result page looks."},billing:{title:"Wallet & Credits",description:"Manage credits for premium AI features.",steps:["View your current credit balance.","Purchase credit packs for AI Generation or SMS.","View transaction history."],tips:"Result publishing for the first 50 students is always FREE."}},ot=({context:o})=>{const[l,h]=t.useState(!1),[a,u]=t.useState([]);t.useEffect(()=>{!a.includes(o)&&["promotion","timetable"].includes(o)},[o]);const i=nt[o]||{title:"Help Guide",description:"Select a feature to see instructions.",steps:[]},d=()=>{h(!l),l||u(n=>[...n,o])};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:d,className:`fixed bottom-6 right-6 z-40 p-4 rounded-full shadow-2xl transition-all duration-300 flex items-center justify-center border-4 border-white dark:border-slate-800 ${l?"bg-slate-800 text-white rotate-45":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:scale-110 animate-bounce-slow"}`,title:"Help & Guide",children:l?e.jsx(_,{className:"w-6 h-6"}):e.jsx(Ke,{className:"w-6 h-6"})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-[2px] z-30 md:hidden",onClick:()=>h(!1)}),e.jsxs("div",{className:`fixed z-40 bg-white dark:bg-slate-900 shadow-2xl transition-all duration-500 ease-in-out border-l border-slate-200 dark:border-slate-800 flex flex-col
                ${l?"translate-x-0":"translate-x-[120%]"}
                
                /* Desktop Styles */
                md:top-24 md:right-6 md:bottom-24 md:w-80 md:rounded-2xl md:h-auto
                
                /* Mobile Styles */
                bottom-0 left-0 right-0 top-auto h-[60vh] rounded-t-[2rem] w-full
            `,children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-950 border-b border-slate-100 dark:border-slate-800 rounded-t-[2rem] md:rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 mb-1",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"ResultMate Guide"})]}),e.jsx("h3",{className:"text-xl font-black text-slate-800 dark:text-white",children:i.title})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar",children:[e.jsx("div",{children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed font-medium",children:i.description})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase",children:"How to use:"}),i.steps.map((n,v)=>e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"min-w-[20px] h-5 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center text-[10px] font-bold mt-0.5",children:v+1}),e.jsx("p",{className:"text-xs text-slate-700 dark:text-slate-200 leading-relaxed",children:n})]},v))]}),i.tips&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-xl border border-amber-100 dark:border-amber-800/50",children:[e.jsxs("h4",{className:"text-amber-600 dark:text-amber-400 text-xs font-bold flex items-center gap-2 mb-2",children:[e.jsx(et,{className:"w-3 h-3"})," Pro Tip"]}),e.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200 italic",children:['"',i.tips,'"']})]})]}),e.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 text-center",children:e.jsxs("a",{href:"https://wa.me/919999999999",target:"_blank",className:"text-xs font-bold text-slate-400 hover:text-blue-500 flex items-center justify-center gap-2",children:[e.jsx(Xe,{className:"w-3 h-3"})," Need human help? Contact Support"]})})]})]})},dt=f.lazy(()=>j(()=>import("./OverviewTab-BYG0g-ob.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),ct=f.lazy(()=>j(()=>import("./ClassesTab-C5oJOSh_.js"),__vite__mapDeps([6,1,7,8,9,10]),import.meta.url)),mt=f.lazy(()=>j(()=>import("./AssessmentsTab-DaZVfrGg.js"),__vite__mapDeps([11,1,5,9,2,12,13,14]),import.meta.url)),xt=f.lazy(()=>j(()=>import("./FeesTab-BzYYzsa1.js"),__vite__mapDeps([15,1,2,16]),import.meta.url)),ht=f.lazy(()=>j(()=>import("./SettingsTab-D4bp8phS.js"),__vite__mapDeps([17,1,18,19,9,8,20]),import.meta.url)),ut=f.lazy(()=>j(()=>import("./BillingTab-CIQebFI8.js"),__vite__mapDeps([21,1,2,4]),import.meta.url)),bt=f.lazy(()=>j(()=>import("./ReportsTab-BGbD7PZc.js"),__vite__mapDeps([22,1,4,16]),import.meta.url)),pt=f.lazy(()=>j(()=>import("./PromotionTab-BfHOkOrN.js"),__vite__mapDeps([23,1,7,19,16]),import.meta.url)),gt=f.lazy(()=>j(()=>import("./TimetableTab-BOt1HQLX.js"),__vite__mapDeps([24,1,2,9,16,4,5]),import.meta.url)),ft=f.lazy(()=>j(()=>import("./CalendarTab-BWMH_uId.js"),__vite__mapDeps([25,1,2,9]),import.meta.url)),jt=()=>{const o=ce(),[l,h]=t.useState(!0),[a,u]=t.useState("home"),[i,d]=t.useState(null),[n,v]=t.useState([]),[C,D]=t.useState([]),[c,z]=t.useState([]),[A,R]=t.useState([]),[V,M]=t.useState(null),[I,L]=t.useState({fees:!0,assessments:!0}),[s,b]=t.useState(!1),[m,Y]=t.useState({title:"",message:""}),[B,ue]=t.useState(""),[be,Z]=t.useState(!1),[pe,H]=t.useState(!1),[K,X]=t.useState(""),[ge,ee]=t.useState(!1),[W,q]=t.useState(!1),[te,fe]=t.useState("PUBLIC"),[E,se]=t.useState(""),[k,J]=t.useState({name:"",regNo:"",rollNo:"",dob:"",gender:"Male",fatherName:"",motherName:"",photoUrl:""}),[je,O]=t.useState(!1),[ae,le]=t.useState(null),[ve,re]=t.useState(!1),[ie,y]=t.useState(""),[vt,Ne]=t.useState(null),[x,ne]=t.useState(null);t.useEffect(()=>{N(),g.runAutoMaintenance().then(r=>{r&&console.log("System optimized automatically.")})},[]),t.useEffect(()=>{const r=localStorage.getItem("student_draft");if(r)try{const p=JSON.parse(r);J(p),p.classId&&se(p.classId)}catch{}},[]),t.useEffect(()=>{if(W&&te==="SINGLE"&&k.name){localStorage.setItem("student_draft",JSON.stringify({...k,classId:E})),re(!0);const r=setTimeout(()=>re(!1),2e3);return()=>clearTimeout(r)}},[k,E,W]);const N=async()=>{h(!0);const[r,p]=await Promise.all([g.getSchoolConfig(),g.getGlobalSettings()]);if(!r){o("/login");return}d(r),L({fees:p.MODULE_FEES!=="FALSE",assessments:p.MODULE_ASSESSMENTS!=="FALSE"}),r.scheduledPublishDate&&X(r.scheduledPublishDate.slice(0,16));const[F,T,U,$]=await Promise.all([g.getClasses(),g.getAssessmentPrograms(),g.getFeeStructures(),g.getSchoolPendingAdmissions()]);v(F),D(T),R(U),z($),h(!1)},we=async()=>{if(!m.message)return alert("Message required");Z(!0);const r=await g.createCampusPost(i.id,i.schoolName,m.message,"ADMIN","NOTICE",m.title,B?new Date(B).toISOString():void 0);Z(!1),r.success?(b(!1),Y({title:"",message:""}),y("Notice Posted!"),setTimeout(()=>y(""),2e3)):alert(r.message)},ke=async()=>{ee(!0);const r=K||new Date(Date.now()-6e4).toISOString(),p=await g.updateSchoolSettings({scheduledPublishDate:r});ee(!1),p.success&&(d({...i,scheduledPublishDate:r}),H(!1),y("Results Published!"),setTimeout(()=>y(""),2e3))},ye=async r=>{if(r.preventDefault(),!E||!k.name||!k.regNo)return alert("Missing info");O(!0);const p=await g.createStudent(E,{...k,addedBy:"Admin"});O(!1),p.success?(y(`${k.name} Added`),setTimeout(()=>y(""),2e3),J({name:"",regNo:"",rollNo:"",dob:"",gender:"Male",fatherName:"",motherName:"",photoUrl:""}),localStorage.removeItem("student_draft"),N()):alert(p.message)},Se=async()=>{if(!ae||!E)return alert("Select File & Class");O(!0);const p=(await ae.text()).split(`
`);let F=0;for(let T=1;T<p.length;T++){const[U,$,oe,de]=Be(p[T]);U&&$&&(await g.createStudent(E,{name:U.trim(),regNo:$.trim(),gender:oe?oe.trim():"Male",dob:de?He(de.trim()):"2000-01-01",fatherName:"-",motherName:"-",addedBy:"CSV"}),F++)}O(!1),le(null),q(!1),N(),y(`${F} Students Imported`),setTimeout(()=>y(""),2e3)},Ce=()=>{if(!x)return;const r=`*FEE RECEIPT*

Student: *${x.studentName}*
Class: ${x.className}
Fee: ${x.feeName}
Amount Paid: ₹${x.paidAmount}
Status: ${x.status}

Date: ${x.date}
Txn ID: ${x.txnId}

*${x.schoolName}*`;window.open(`https://wa.me/?text=${encodeURIComponent(r)}`,"_blank")};if(l)return e.jsx(Oe,{});if(!i)return null;const ze=[{id:"home",label:"Overview",icon:me},{id:"classes",label:"Classes",icon:Fe},{id:"timetable",label:"Timetable",icon:Ye},{id:"calendar",label:"Calendar",icon:Ue},{id:"reports",label:"Reports",icon:tt},...I.assessments?[{id:"assessments",label:"Assessments",icon:Je}]:[],...I.fees?[{id:"fees",label:"Fees",icon:$e}]:[],{id:"settings",label:"Settings",icon:qe},{id:"billing",label:"Credits",icon:Ge},{id:"promotion",label:"Promotion",icon:Qe}];return e.jsx(it,{children:e.jsxs("div",{className:"pb-20 animate-fade-in-up relative",children:[ie&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-slate-900/90 text-white px-6 py-4 rounded-xl shadow-2xl flex flex-col items-center animate-fade-in-up",children:[e.jsx(he,{className:"w-10 h-10 text-emerald-500 mb-2"}),e.jsx("span",{className:"font-bold",children:ie})]})}),e.jsx(st,{config:i,onNoticeClick:()=>b(!0)}),e.jsx("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-xl mb-6 overflow-x-auto border border-slate-200 dark:border-slate-800 custom-scrollbar",children:ze.map(r=>e.jsxs("button",{onClick:()=>u(r.id),className:`flex-1 px-4 py-2.5 rounded-lg text-xs font-bold transition-all flex justify-center items-center gap-2 whitespace-nowrap ${a===r.id?"bg-white dark:bg-slate-800 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(r.icon,{className:`w-4 h-4 ${r.id==="billing"?"fill-current":""}`})," ",r.label]},r.id))}),e.jsxs(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center py-20 text-slate-400 text-sm",children:"Loading..."}),children:[a==="home"&&e.jsx(dt,{setActiveTab:u,stats:V,classes:n,pendingAdmissions:c,onRefresh:N,setShowPublishModal:H,setShowStudentEntryModal:q}),a==="classes"&&e.jsx(ct,{classes:n,onRefresh:N,onShowShare:r=>Ne(r)}),a==="timetable"&&e.jsx(gt,{classes:n,onRefresh:N,schoolName:i.schoolName}),a==="calendar"&&e.jsx(ft,{}),a==="reports"&&e.jsx(bt,{}),a==="assessments"&&e.jsx(mt,{assessments:C,classes:n,onRefresh:N}),a==="fees"&&e.jsx(xt,{feeStructures:A,classes:n,schoolConfig:i,onRefresh:N,onShowReceipt:ne}),a==="settings"&&e.jsx(ht,{schoolConfig:i,onUpdate:d}),a==="billing"&&e.jsx(ut,{schoolConfig:i}),a==="promotion"&&e.jsx(pt,{classes:n,onRefresh:N})]}),s&&e.jsx(at,{onClose:()=>b(!1),data:m,setData:Y,scheduleTime:B,setScheduleTime:ue,onSubmit:we,loading:be}),pe&&e.jsx(lt,{onClose:()=>H(!1),date:K,setDate:X,onSubmit:ke,loading:ge}),W&&e.jsx(rt,{onClose:()=>q(!1),mode:te,setMode:fe,classId:E,setClassId:se,classes:n,newStudent:k,setNewStudent:J,onSubmit:ye,onCsv:Se,setCsv:le,loading:je,saved:ve,schoolId:i.id}),x&&e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-full max-w-sm relative",children:[e.jsx("button",{onClick:()=>ne(null),className:"absolute top-2 right-2 text-slate-400 hover:text-slate-600 font-bold",children:"✕"}),e.jsx("h3",{className:"font-bold text-center border-b pb-2 mb-4 text-slate-900",children:"FEE RECEIPT"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:"font-bold text-lg text-slate-800",children:x.schoolName}),e.jsx("p",{className:"text-xs text-gray-500",children:x.place})]}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Name:"}),e.jsx("span",{className:"font-bold",children:x.studentName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Class:"}),e.jsx("span",{children:x.className})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fee:"}),e.jsx("span",{children:x.feeName})]}),e.jsxs("div",{className:"border-t my-2 pt-2 flex justify-between font-bold text-lg text-slate-900",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["₹",x.amount||x.paidAmount]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsxs("button",{onClick:Ce,className:"flex-1 bg-[#25D366] hover:bg-[#20bd5a] text-white py-2.5 rounded-lg text-xs font-bold flex items-center justify-center gap-2 shadow-lg shadow-green-500/20",children:[e.jsx(Ve,{className:"w-4 h-4"})," WhatsApp"]}),e.jsx("button",{onClick:()=>window.print(),className:"flex-1 bg-slate-900 hover:bg-slate-800 text-white py-2.5 rounded-lg text-xs font-bold no-print",children:"Print"})]})]})}),e.jsx(ot,{context:a})]})})},yt=Object.freeze(Object.defineProperty({__proto__:null,default:jt},Symbol.toStringTag,{value:"Module"}));export{Ye as C,yt as D,Xe as I};
