import{c as y,r,j as e,b as p,U as W,a4 as te,v as ae,Z as B,N as G,a as g,V as je,a5 as Ne,G as V,m as ve,s as le,a6 as we,a7 as ye,a1 as Se,a8 as re,L as Ce,a9 as ke,aa as Ee,a2 as ne,A as ce,ab as X,h as Ae,ac as Te,M as ie,d as K,n as Le,ad as q,t as De,P as Re,X as Ie,F as de,g as Pe,o as Me,u as Oe}from"./index-CAgeZUTc.js";import{D as O}from"./database-CKpq2GyI.js";import{R as M,S as Ue}from"./settings-8a1US88B.js";import{H as oe,S as xe}from"./save-Dh3mLcKi.js";import{T as me}from"./trash-2-C9uBVfXZ.js";import{P as Fe}from"./plus-DIeOG0JN.js";import{a as _e,U as Ge}from"./user-cog-CgdfkKIl.js";import{P as $e}from"./play-CSeWkE4h.js";import{C as Q}from"./clock-x2Co9Mkc.js";import{L as Be}from"./layout-grid-Ds9Q_Yb9.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=y("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=y("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=y("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=y("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=y("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=y("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=y("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=y("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=y("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=y("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=y("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=y("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=y("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=y("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),Xe=()=>{var l,m;const[s,c]=r.useState(null),[N,f]=r.useState(!0);return r.useEffect(()=>{const o=async()=>{const a=await g.getAdvancedSystemStats();c(a),f(!1)};o();const x=setInterval(o,3e4);return()=>clearInterval(x)},[]),N?e.jsx("div",{className:"text-center text-slate-500 py-20 font-mono",children:"INITIALIZING TELEMETRY..."}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(p,{className:"bg-slate-900 border border-slate-800 relative overflow-hidden group hover:border-blue-500/50 transition-all",children:[e.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(W,{className:"w-16 h-16 text-blue-500"})}),e.jsx("p",{className:"text-xs font-mono text-blue-400 mb-1",children:"TOTAL USERS"}),e.jsx("h2",{className:"text-3xl font-black text-white",children:(l=s==null?void 0:s.totalStudents)==null?void 0:l.toLocaleString()}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-green-400 mt-2",children:[e.jsx(Ve,{className:"w-3 h-3"})," +",s==null?void 0:s.dailyGrowthRate,"% Today"]})]}),e.jsxs(p,{className:"bg-slate-900 border border-slate-800 relative overflow-hidden group hover:border-green-500/50 transition-all",children:[e.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(te,{className:"w-16 h-16 text-green-500"})}),e.jsx("p",{className:"text-xs font-mono text-green-400 mb-1",children:"REVENUE (MRR)"}),e.jsxs("h2",{className:"text-3xl font-black text-white",children:["â‚¹",(m=s==null?void 0:s.totalRevenue)==null?void 0:m.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-400 mt-2",children:[s==null?void 0:s.proSchools," Active Subscriptions"]})]}),e.jsxs(p,{className:"bg-slate-900 border border-slate-800 relative overflow-hidden group hover:border-purple-500/50 transition-all",children:[e.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(ae,{className:"w-16 h-16 text-purple-500"})}),e.jsx("p",{className:"text-xs font-mono text-purple-400 mb-1",children:"ACTIVE SCHOOLS"}),e.jsx("h2",{className:"text-3xl font-black text-white",children:s==null?void 0:s.totalSchools}),e.jsx("div",{className:"flex items-center gap-1 text-[10px] text-slate-400 mt-2",children:"Across 12 Districts"})]}),e.jsxs(p,{className:"bg-slate-900 border border-slate-800 relative overflow-hidden group hover:border-orange-500/50 transition-all",children:[e.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(B,{className:"w-16 h-16 text-orange-500"})}),e.jsx("p",{className:"text-xs font-mono text-orange-400 mb-1",children:"LIVE TRAFFIC"}),e.jsx("h2",{className:"text-3xl font-black text-white",children:s==null?void 0:s.activeUsersNow}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-green-400 mt-2 animate-pulse",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Online Now"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 bg-slate-900 border border-slate-800 rounded-xl p-6 relative overflow-hidden",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-400 mb-4 flex items-center gap-2",children:[e.jsx(es,{className:"w-4 h-4"})," SYSTEM LATENCY"]}),e.jsx("div",{className:"flex items-end gap-1 h-32 w-full",children:[...Array(40)].map((o,x)=>{const a=Math.floor(Math.random()*80)+10;return e.jsx("div",{className:`flex-1 rounded-t-sm transition-all duration-500 ${a>70?"bg-red-500":a>40?"bg-blue-500":"bg-slate-700"}`,style:{height:`${a}%`}},x)})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs font-mono text-slate-500",children:[e.jsx("span",{children:"-60s"}),e.jsxs("span",{className:"text-green-400",children:[s==null?void 0:s.serverLatency,"ms avg"]}),e.jsx("span",{children:"Now"})]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-6 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-400 mb-4 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"})," DATABASE LOAD"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-300 mb-1",children:[e.jsx("span",{children:"Storage Used"}),e.jsxs("span",{children:[s==null?void 0:s.dbSizeMB," MB"]})]}),e.jsx("div",{className:"w-full bg-slate-800 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-blue-500 h-full rounded-full",style:{width:"15%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-300 mb-1",children:[e.jsx("span",{children:"API Requests (1m)"}),e.jsx("span",{children:"1,204"})]}),e.jsx("div",{className:"w-full bg-slate-800 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-green-500 h-full rounded-full",style:{width:"45%"}})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-800 text-[10px] text-slate-500 flex justify-between",children:[e.jsx("span",{children:"Region: ap-south-1"}),e.jsx("span",{className:"text-green-500 font-bold",children:"HEALTHY"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/20 to-blue-900/20 border border-slate-800 rounded-xl p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-500/20 rounded-full flex items-center justify-center",children:e.jsx(G,{className:"w-6 h-6 text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-bold",children:"AI Growth Prediction"}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Based on current trajectory, we expect ",e.jsx("span",{className:"text-white font-bold",children:"+50 schools"})," next month."]})]})]}),e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"Projected Revenue"}),e.jsxs("p",{className:"text-xl font-mono text-green-400",children:["â‚¹",((s==null?void 0:s.totalRevenue)||0)*1.2]})]})]})]})},es=({className:s})=>e.jsx("svg",{className:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),ss=()=>{const[s,c]=r.useState([]),[N,f]=r.useState(!0),[l,m]=r.useState(null),[o,x]=r.useState(""),[a,b]=r.useState(!1);r.useEffect(()=>{t()},[]);const t=async()=>{f(!0);const n=await g.getAllSupportTickets();c(n),f(!1)},u=n=>{m(n),x(n.aiSuggestedReply||"")},h=async()=>{!l||!o||(b(!0),await g.resolveTicket(l.id,o),b(!1),m(null),t(),alert("Ticket Resolved & User Notified"))};return e.jsxs("div",{className:"h-[calc(100vh-140px)] flex gap-6 animate-fade-in-up",children:[e.jsxs("div",{className:"w-1/3 bg-slate-900 border border-slate-800 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-800 flex justify-between items-center bg-slate-900",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 text-blue-500"})," Inbox (",s.filter(n=>n.status==="OPEN").length,")"]}),e.jsx("button",{onClick:t,className:"text-slate-500 hover:text-white",children:e.jsx(M,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[s.length===0&&e.jsx("div",{className:"p-8 text-center text-slate-500 text-sm",children:"No tickets found."}),s.map(n=>e.jsxs("div",{onClick:()=>u(n),className:`p-4 border-b border-slate-800 cursor-pointer hover:bg-slate-800/50 transition-colors ${(l==null?void 0:l.id)===n.id?"bg-slate-800 border-l-4 border-l-blue-500":"border-l-4 border-l-transparent"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded uppercase ${n.priority==="CRITICAL"?"bg-red-500/20 text-red-400":"bg-slate-700 text-slate-300"}`,children:n.priority}),e.jsx("span",{className:"text-[10px] text-slate-500",children:new Date(n.createdAt).toLocaleDateString()})]}),e.jsx("h4",{className:`text-sm font-bold mb-1 truncate ${n.status==="RESOLVED"?"text-slate-500 line-through":"text-white"}`,children:n.subject}),e.jsx("p",{className:"text-xs text-slate-400 truncate",children:n.schoolName})]},n.id))]})]}),e.jsx("div",{className:"flex-1 bg-slate-900 border border-slate-800 rounded-xl overflow-hidden flex flex-col relative",children:l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 bg-slate-900",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:l.subject}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"})," ",l.userEmail]}),e.jsx("span",{className:"w-1 h-1 bg-slate-600 rounded-full"}),e.jsx("span",{children:l.schoolName})]})]}),e.jsx("div",{className:`px-3 py-1 rounded text-xs font-bold ${l.status==="OPEN"?"bg-green-500/20 text-green-400":"bg-slate-700 text-slate-300"}`,children:l.status})]}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg text-sm text-slate-300 leading-relaxed",children:l.message})]}),l.status!=="RESOLVED"&&e.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[e.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/30 p-3 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-purple-400 text-xs font-bold uppercase",children:[e.jsx(Ne,{className:"w-4 h-4"})," AI Auto-Draft"]}),e.jsxs("p",{className:"text-sm text-slate-300 italic",children:['"',l.aiSuggestedReply,'"']}),e.jsx("button",{onClick:()=>x(l.aiSuggestedReply||""),className:"mt-2 text-xs text-purple-400 hover:text-purple-300 underline",children:"Use this reply"})]}),e.jsx("textarea",{className:"w-full flex-1 bg-slate-800 border border-slate-700 rounded-xl p-4 text-white resize-none focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Type your reply here...",value:o,onChange:n=>x(n.target.value)}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(V,{onClick:h,disabled:a,className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2",children:a?"Sending...":e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-4 h-4"})," Approve & Send Reply"]})})})]}),l.status==="RESOLVED"&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-500",children:[e.jsx(le,{className:"w-16 h-16 mb-4 text-green-900"}),e.jsx("p",{children:"This ticket has been resolved."})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-600",children:[e.jsx(se,{className:"w-20 h-20 mb-4 opacity-20"}),e.jsx("p",{children:"Select a ticket to view details"})]})})]})},ts=()=>{var Z,J;const[s,c]=r.useState({}),[N,f]=r.useState(!0),[l,m]=r.useState(!0),[o,x]=r.useState(""),[a,b]=r.useState(""),[t,u]=r.useState("DISCONNECTED"),[h,n]=r.useState([]),[v,A]=r.useState({provider:"CLOUDINARY",config:{cloudName:"",uploadPreset:""},priority:1,status:"ACTIVE"}),[w,U]=r.useState(!1),[F,R]=r.useState(""),[E,_]=r.useState(!1),[L,I]=r.useState(""),[D,H]=r.useState(""),[d,S]=r.useState(!1);r.useEffect(()=>{m(we());const i=ye();i.url&&(x(i.url),b(i.key),u("CONNECTED")),k()},[]);const k=async()=>{const i=await g.getGlobalSettings();if(c(i),i.CASHFREE_APP_ID&&R(i.CASHFREE_APP_ID),i.STORAGE_NODES)try{n(JSON.parse(i.STORAGE_NODES))}catch{}if(i.SUPER_ADMIN_EMAIL)I(i.SUPER_ADMIN_EMAIL);else{const j=localStorage.getItem("super_admin_creds");if(j)try{const C=JSON.parse(j);I(C.email)}catch{}}f(!1)},P=async i=>{const C=s[i]==="TRUE"?"FALSE":"TRUE";c({...s,[i]:C}),await g.updateGlobalSetting(i,C)},pe=async()=>{_(!0),await g.updateGlobalSetting("CASHFREE_APP_ID",F),_(!1),alert("Payment Keys Updated!")},be=async()=>{if(!L||!D)return alert("Email & Password required");S(!0),l&&(await g.updateGlobalSetting("SUPER_ADMIN_EMAIL",L),await g.updateGlobalSetting("SUPER_ADMIN_PASS",D)),localStorage.setItem("super_admin_creds",JSON.stringify({email:L,password:D})),S(!1),alert("Credentials Updated! Please use these to login.")},ue=()=>{var C;if(!v.name||!((C=v.config)!=null&&C.cloudName))return alert("Name and Cloud Name required");const i={id:`node_${Date.now()}`,name:v.name,provider:v.provider||"CLOUDINARY",config:v.config,priority:h.length+1,status:"ACTIVE"},j=[...h,i];n(j),Y(j),A({provider:"CLOUDINARY",config:{cloudName:"",uploadPreset:""},priority:1,status:"ACTIVE",name:""})},ge=i=>{const j=h.filter(C=>C.id!==i);n(j),Y(j)},Y=async i=>{U(!0),await Ee(i),U(!1)},fe=()=>{if(!o||!a)return alert("URL & Key required");ke(o,a),alert("Database connection updated! The app will reload."),window.location.reload()};if(N)return e.jsx("div",{children:"Loading Controls..."});const T=({label:i,keyName:j,desc:C})=>{const z=s[j]==="TRUE";return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-900 border border-slate-800 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-bold ${z?"text-white":"text-slate-500"}`,children:i}),e.jsx("p",{className:"text-xs text-slate-500",children:C})]}),e.jsx("button",{onClick:()=>P(j),className:`relative w-12 h-7 rounded-full transition-colors ${z?"bg-green-500":"bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full transition-transform ${z?"translate-x-5":"translate-x-0"}`})})]})};return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-green-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"})," Database Cluster"]}),e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t==="CONNECTED"?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsxs("span",{className:"text-white font-bold text-sm",children:["Status: ",t]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Supabase / Postgres Compatible"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"Project URL"}),e.jsx("input",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-mono",placeholder:"https://xyz.supabase.co",value:o,onChange:i=>x(i.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"API Key (Anon/Service)"}),e.jsx("input",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-mono",type:"password",placeholder:"eyJ...",value:a,onChange:i=>b(i.target.value)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:fe,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold text-sm flex items-center gap-2 shadow-lg shadow-green-900/20",children:[e.jsx(M,{className:"w-4 h-4"})," Hot Swap Database"]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-blue-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4"})," Storage Pool (Failover Mesh)"]}),e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Add multiple Cloudinary buckets. If one fails or hits limits, the system auto-switches to the next available node."}),e.jsxs("div",{className:"space-y-2 mb-6",children:[h.map((i,j)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-950 border border-slate-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center text-xs font-bold text-white border border-slate-600",children:j+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white",children:i.name}),e.jsxs("p",{className:"text-[10px] text-slate-500 uppercase",children:[i.provider," â€¢ ",i.config.cloudName]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] bg-green-900/30 text-green-400 px-2 py-0.5 rounded border border-green-900/50",children:"ACTIVE"}),e.jsx("button",{onClick:()=>ge(i.id),className:"text-slate-500 hover:text-red-500",children:e.jsx(me,{className:"w-4 h-4"})})]})]},i.id)),h.length===0&&e.jsx("p",{className:"text-center text-xs text-slate-500 py-2",children:"No storage nodes configured. Using fallback."})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-white uppercase mb-3 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-3 h-3"})," Add New Node"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-3 mb-3",children:[e.jsx("input",{className:"bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs",placeholder:"Node Name (e.g. Asia-1)",value:v.name,onChange:i=>A({...v,name:i.target.value})}),e.jsx("input",{className:"bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs",placeholder:"Cloud Name",value:(Z=v.config)==null?void 0:Z.cloudName,onChange:i=>{var j;return A({...v,config:{...v.config,cloudName:i.target.value,uploadPreset:((j=v.config)==null?void 0:j.uploadPreset)||""}})}}),e.jsx("input",{className:"bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs",placeholder:"Upload Preset",value:(J=v.config)==null?void 0:J.uploadPreset,onChange:i=>{var j;return A({...v,config:{...v.config,uploadPreset:i.target.value,cloudName:((j=v.config)==null?void 0:j.cloudName)||""}})}})]}),e.jsx("button",{onClick:ue,disabled:w,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg text-xs font-bold shadow-lg",children:w?"Syncing Mesh...":"Connect Node"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-purple-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4"})," Global Modules"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(T,{label:"Public Registration",keyName:"ENABLE_PUBLIC_REGISTRATION",desc:"Allow new students to register via public links"}),e.jsx(T,{label:"Teacher Login",keyName:"ENABLE_TEACHER_LOGIN",desc:"Enable/Disable teacher access globally"}),e.jsx(T,{label:"Student Login",keyName:"ENABLE_STUDENT_LOGIN",desc:"Enable/Disable student result checking"}),e.jsx(T,{label:"Fees Module",keyName:"MODULE_FEES",desc:"Show/Hide Fees tab for all schools"}),e.jsx(T,{label:"Assessments Module",keyName:"MODULE_ASSESSMENTS",desc:"Show/Hide Assessments tab for all schools"}),e.jsx(T,{label:"Ads System",keyName:"ENABLE_ADS",desc:"Display ads on result pages"}),e.jsx(T,{label:"Charge for Storage",keyName:"ENABLE_STORAGE_COSTS",desc:"Deduct 2 Credits per image upload to save space"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-yellow-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4"})," Payment Gateway"]}),e.jsx(p,{className:"bg-slate-900 border-slate-800",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2 text-white font-bold mb-2",children:"Cashfree Payments"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"App ID (Client ID)"}),e.jsx("input",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm",placeholder:"e.g. 123456789...",value:F,onChange:i=>R(i.target.value)})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:pe,disabled:E,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-bold text-xs flex items-center gap-2",children:[E?e.jsx(M,{className:"w-3 h-3 animate-spin"}):e.jsx(xe,{className:"w-3 h-3"})," Update Key"]})})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"})," Admin Credentials"]}),e.jsx(p,{className:"bg-slate-900 border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"Super Admin Email"}),e.jsx("input",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm",placeholder:"super@resultmate.com",value:L,onChange:i=>I(i.target.value)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"New Password"}),e.jsx("input",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm",type:"password",placeholder:"Set new password",value:D,onChange:i=>H(i.target.value)})]}),e.jsxs("button",{onClick:be,disabled:d,className:"mt-5 bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2",children:[d?e.jsx(M,{className:"w-4 h-4 animate-spin"}):e.jsx(Ke,{className:"w-4 h-4"})," Update"]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-red-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"})," Danger Zone"]}),e.jsxs("div",{className:"p-6 bg-red-900/10 border border-red-900/30 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-bold text-lg",children:"System Maintenance Mode"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"This will block ALL public access. Only Super Admin can login."})]}),e.jsx("button",{onClick:()=>P("MAINTENANCE_MODE"),className:`px-6 py-3 rounded-lg font-bold flex items-center gap-2 ${s.MAINTENANCE_MODE==="TRUE"?"bg-red-500 text-white animate-pulse":"bg-slate-800 text-red-500 border border-red-900/50"}`,children:s.MAINTENANCE_MODE==="TRUE"?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"w-4 h-4"})," MAINTENANCE ACTIVE"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4"})," ACTIVATE LOCKDOWN"]})})]})]})]})},as=()=>{const[s,c]=r.useState("OVERVIEW"),[N,f]=r.useState([]),[l,m]=r.useState(""),[o,x]=r.useState(!1),[a,b]=r.useState("");r.useEffect(()=>{t()},[]);const t=async()=>{const n=await g.getStoragePoolStatus();f(n)},u=async()=>{if(!l.trim())return;x(!0);const n=await g.runDatabaseMigration(l);x(!1),b(n.message||"Done"),setTimeout(()=>b(""),3e3)},h=async n=>{confirm("Are you sure? This will reset active connections.")&&(await g.triggerAutoHeal(n),alert("Healing sequence initiated."))};return s==="DB_DETAILS"?e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>c("OVERVIEW"),className:"p-2 bg-slate-800 rounded-full hover:bg-slate-700 text-slate-400 hover:text-white transition-colors",children:e.jsx(ne,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Database Control"}),e.jsx("p",{className:"text-xs text-slate-500",children:"PostgreSQL 15.2 (Supabase)"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(p,{className:"bg-slate-900 border-slate-800 h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-orange-500"})," SQL Migrator"]}),e.jsx("span",{className:"text-[10px] text-slate-500",children:"Admin Mode"})]}),e.jsx("textarea",{className:"flex-1 bg-slate-950 font-mono text-xs text-green-400 p-3 rounded-lg border border-slate-800 outline-none resize-none mb-4",placeholder:"-- Enter SQL command to repair/migrate tables...",rows:8,value:l,onChange:n=>m(n.target.value)}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-green-500 font-mono",children:a}),e.jsx(V,{onClick:u,disabled:o||!l,className:"bg-orange-600 hover:bg-orange-700 text-xs py-2",children:o?"Running...":e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"w-3 h-3 mr-1"})," Execute"]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-6",children:[e.jsx(ce,{className:"w-4 h-4 text-red-500"})," Emergency Operations"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-900/10 border border-red-900/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-200 text-sm",children:"Purge Redis Cache"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Clears session data & temp keys."})]}),e.jsx("button",{onClick:()=>h("CACHE"),className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs font-bold rounded",children:"Purge"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/30 border border-slate-700/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-200 text-sm",children:"Reset Connection Pool"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Disconnects active clients."})]}),e.jsx("button",{onClick:()=>h("CONNECTION"),className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white text-xs font-bold rounded",children:"Reset"})]})]})]}),e.jsxs("div",{className:"p-4 bg-slate-900 border border-slate-800 rounded-xl",children:[e.jsx("h4",{className:"text-white text-sm font-bold mb-2",children:"Replica Status"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400 mb-1",children:[e.jsx("span",{children:"Read Replica (SG)"}),e.jsx("span",{className:"text-green-500",children:"Synced"})]}),e.jsx("div",{className:"w-full bg-slate-800 h-1 rounded-full",children:e.jsx("div",{className:"w-full h-full bg-green-500 rounded-full"})})]})]})]})]}):e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{onClick:()=>c("DB_DETAILS"),className:"bg-slate-900 border border-slate-800 p-6 rounded-2xl hover:border-blue-500 cursor-pointer group transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-900/20 rounded-xl text-blue-400 group-hover:scale-110 transition-transform",children:e.jsx(O,{className:"w-8 h-8"})}),e.jsx(X,{className:"w-5 h-5 text-slate-600 group-hover:text-blue-500"})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Core Database"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Manage SQL, Migrations, and Auto-healing."}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono text-green-400",children:[e.jsx($,{className:"w-3 h-3"})," 99.9% Uptime"]})]}),e.jsxs("div",{onClick:()=>c("STORAGE_DETAILS"),className:"bg-slate-900 border border-slate-800 p-6 rounded-2xl hover:border-purple-500 cursor-pointer group transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-900/20 rounded-xl text-purple-400 group-hover:scale-110 transition-transform",children:e.jsx(He,{className:"w-8 h-8"})}),e.jsx(X,{className:"w-5 h-5 text-slate-600 group-hover:text-purple-500"})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Storage Mesh"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Manage Cloudinary pools and CDN nodes."}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono text-slate-400",children:[e.jsx(ae,{className:"w-3 h-3"})," 4 Active Nodes"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-4 px-2",children:"Live Node Status"}),e.jsx("div",{className:"grid md:grid-cols-4 gap-4",children:N.map(n=>e.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded-xl relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-bold text-white text-xs",children:n.name}),e.jsx("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded ${n.status==="HEALTHY"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:n.status})]}),e.jsx("div",{className:"w-full bg-slate-800 h-1 rounded-full overflow-hidden mt-2",children:e.jsx("div",{className:`h-full rounded-full ${n.used>90?"bg-red-500":"bg-blue-500"}`,style:{width:`${n.used/n.limit*100}%`}})})]},n.id))})]})]})},ls=()=>{const[s,c]=r.useState("LIST"),[N,f]=r.useState([]),[l,m]=r.useState(null),[o,x]=r.useState(!1);r.useEffect(()=>{a()},[]);const a=async()=>{const t=await g.getStaffList();f(t)},b=t=>{m(t),c("DETAIL")};return s==="DETAIL"&&l?e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsxs("button",{onClick:()=>c("LIST"),className:"mb-6 flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[e.jsx(ne,{className:"w-4 h-4"})," Back to Team"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(p,{className:"bg-slate-900 border-slate-800 flex flex-col items-center text-center py-8",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-800 rounded-full flex items-center justify-center font-black text-3xl text-slate-500 mb-4 border-4 border-slate-800 shadow-xl",children:l.name.substring(0,2)}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:l.name}),e.jsx("span",{className:"bg-blue-900/30 text-blue-400 px-3 py-1 rounded-full text-xs font-bold mb-6 border border-blue-900/50",children:l.role}),e.jsxs("div",{className:"w-full border-t border-slate-800 pt-6 flex justify-around",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Status"}),e.jsxs("div",{className:`flex items-center justify-center gap-1 text-sm font-bold ${l.status==="ONLINE"?"text-green-500":"text-slate-400"}`,children:[e.jsx(ee,{className:"w-2 h-2 fill-current"})," ",l.status]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Rating"}),e.jsxs("p",{className:"text-sm font-bold text-white",children:[l.performance,"%"]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsx("h3",{className:"font-bold text-white mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-2",children:[e.jsx(le,{className:"w-4 h-4"})," Tickets Closed"]}),e.jsx("p",{className:"text-2xl font-black text-white",children:"1,240"})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-2",children:[e.jsx(Q,{className:"w-4 h-4"})," Avg Response"]}),e.jsx("p",{className:"text-2xl font-black text-white",children:"4m 12s"})]})]}),e.jsx("h4",{className:"font-bold text-slate-400 text-xs uppercase mb-3",children:"Activity Log"}),e.jsx("div",{className:"space-y-2",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/30 rounded-lg text-sm",children:[e.jsxs("span",{className:"text-slate-300",children:["Resolved Ticket #884",t]}),e.jsx("span",{className:"text-slate-500 text-xs",children:"2h ago"})]},t))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-bold transition-colors",children:"Edit Role"}),e.jsx("button",{className:"flex-1 py-3 bg-red-900/20 hover:bg-red-900/40 text-red-500 border border-red-900/50 rounded-xl font-bold transition-colors",children:"Deactivate"})]})]})]})]}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(W,{className:"w-6 h-6 text-blue-500"})," Team Management"]}),e.jsxs(V,{onClick:()=>x(!0),className:"bg-blue-600 hover:bg-blue-700 text-xs flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"})," Add Staff"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(t=>e.jsxs(p,{className:"bg-slate-900 border-slate-800 relative group hover:border-blue-500/30 transition-all cursor-pointer",onClick:()=>b(t),children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center font-bold text-slate-400 group-hover:bg-blue-900/30 group-hover:text-blue-400 transition-colors",children:t.name.substring(0,2)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:t.name}),e.jsxs("p",{className:"text-xs text-blue-400 flex items-center gap-1",children:[e.jsx(Te,{className:"w-3 h-3"})," ",t.role]})]})]}),e.jsxs("div",{className:`flex items-center gap-1 text-[10px] font-bold ${t.status==="ONLINE"?"text-green-500":"text-slate-500"}`,children:[e.jsx(ee,{className:"w-2 h-2 fill-current"})," ",t.status]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-end mb-1",children:[e.jsxs("span",{className:"text-[10px] text-slate-500 font-bold uppercase flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"})," Performance"]}),e.jsxs("span",{className:"text-xs font-mono text-white",children:[t.performance,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-800 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${t.performance>90?"bg-green-500":"bg-yellow-500"}`,style:{width:`${t.performance}%`}})})]})]},t.id))})]})},rs=()=>{const[s,c]=r.useState(null),[N,f]=r.useState(!0),[l,m]=r.useState(!1),o=["Unlimited Students","Smart Data Entry (Public Link)","Instant Result Publish","WhatsApp Viral Result Link","Data Backup & Export","Fee Management System","Fee Receipts & Reports","School Branding (Logo)","No Ads on Results","âœ¨ AI Question Generator","ðŸ“± White-label Mobile App","Behavioral Reports","Priority Support","Multiple Admin Logins"];r.useEffect(()=>{x()},[]);const x=async()=>{const t=await g.getMarketingConfig();c(t),f(!1)},a=async()=>{s&&(m(!0),await g.updateMarketingConfig(s),m(!1),alert("Marketing & Plan settings updated!"))},b=(t,u)=>{if(!s||!s.planFeatures)return;const h=s.planFeatures[t];let n;h.includes(u)?n=h.filter(v=>v!==u):n=[...h,u],c({...s,planFeatures:{...s.planFeatures,[t]:n}})};return N||!s?e.jsx("div",{children:"Loading Command Center..."}):e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(ie,{className:"w-6 h-6 text-yellow-500"})," Marketing Command Center"]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Control Pricing, Offers & Plan Features"})]}),e.jsx(V,{onClick:a,disabled:l,className:"bg-green-600 hover:bg-green-700",children:l?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"w-4 h-4 mr-2"})," Save Changes"]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5 text-orange-500"})," Flash Sale Engine"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg",children:[e.jsx("span",{className:"text-sm text-white font-bold",children:"Activate Flash Sale"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-orange-500",checked:s.flashSaleActive,onChange:t=>c({...s,flashSaleActive:t.target.checked})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase font-bold block mb-1",children:"Countdown End Time"}),e.jsx(K,{type:"datetime-local",value:s.flashSaleEndTime||"",onChange:t=>c({...s,flashSaleEndTime:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase font-bold block mb-1",children:"Banner Text"}),e.jsx(K,{placeholder:"Monsoon Offer: 50% OFF Ends Soon!",value:s.flashSaleText||"",onChange:t=>c({...s,flashSaleText:t.target.value})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg mt-2",children:[e.jsx("span",{className:"text-sm text-white font-bold",children:"Global Urgency Banner"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-red-500",checked:s.showUrgencyBanner,onChange:t=>c({...s,showUrgencyBanner:t.target.checked})})]})]})]}),e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-green-500"})," Dynamic Pricing"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-xs text-slate-500 uppercase font-bold block mb-1 flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3"})," Billing Cycle Display"]}),e.jsx(K,{placeholder:"/year",value:s.billingCycle||"/year",onChange:t=>c({...s,billingCycle:t.target.value}),className:"font-mono text-center text-yellow-400"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-slate-800/50 rounded-xl border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-black text-blue-400 uppercase mb-3",children:"Plan B: Smart Campus"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Selling Price (â‚¹)"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-white font-mono",type:"number",value:s.smartPlanPrice,onChange:t=>c({...s,smartPlanPrice:parseInt(t.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Fake Original (â‚¹)"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-slate-400 font-mono",type:"number",value:s.smartPlanOriginal,onChange:t=>c({...s,smartPlanOriginal:parseInt(t.target.value)})})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-red-500"}),e.jsx("label",{className:"text-xs text-slate-400",children:"Seats Left Display:"}),e.jsx("input",{className:"w-16 bg-slate-900 border border-slate-600 rounded p-1 text-white text-center font-bold",type:"number",value:s.smartPlanSeatsLeft,onChange:t=>c({...s,smartPlanSeatsLeft:parseInt(t.target.value)})})]})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-black text-purple-400 uppercase mb-3",children:"Plan C: Institute Pro"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Selling Price (â‚¹)"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-white font-mono",type:"number",value:s.proPlanPrice,onChange:t=>c({...s,proPlanPrice:parseInt(t.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Fake Original (â‚¹)"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-slate-400 font-mono",type:"number",value:s.proPlanOriginal,onChange:t=>c({...s,proPlanOriginal:parseInt(t.target.value)})})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-red-500"}),e.jsx("label",{className:"text-xs text-slate-400",children:"Seats Left Display:"}),e.jsx("input",{className:"w-16 bg-slate-900 border border-slate-600 rounded p-1 text-white text-center font-bold",type:"number",value:s.proPlanSeatsLeft,onChange:t=>c({...s,proPlanSeatsLeft:parseInt(t.target.value)})})]})]})]})]}),e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5 text-blue-400"})," Feature Assignment Matrix"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-800 text-xs uppercase text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Feature Name"}),e.jsx("th",{className:"p-4 text-center text-slate-300",children:"Starter (Free)"}),e.jsx("th",{className:"p-4 text-center text-blue-400",children:"Smart"}),e.jsx("th",{className:"p-4 text-center text-purple-400",children:"Pro"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:o.map(t=>{var u,h,n;return e.jsxs("tr",{className:"hover:bg-slate-800/50",children:[e.jsx("td",{className:"p-3 text-slate-300",children:t}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("input",{type:"checkbox",checked:(u=s.planFeatures)==null?void 0:u.starter.includes(t),onChange:()=>b("starter",t),className:"w-4 h-4 accent-slate-500"})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("input",{type:"checkbox",checked:(h=s.planFeatures)==null?void 0:h.smart.includes(t),onChange:()=>b("smart",t),className:"w-4 h-4 accent-blue-500"})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("input",{type:"checkbox",checked:(n=s.planFeatures)==null?void 0:n.pro.includes(t),onChange:()=>b("pro",t),className:"w-4 h-4 accent-purple-500"})})]},t)})})]})})]}),e.jsx(p,{className:"bg-gradient-to-r from-yellow-900/30 to-orange-900/30 border border-yellow-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-yellow-400"})," Golden Hour Strategy (Feature Tasting)"]}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Unlock 'Pro' features for ALL free users temporarily to increase upgrade desire."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs font-bold uppercase ${s.globalTrialMode?"text-green-400 animate-pulse":"text-slate-500"}`,children:s.globalTrialMode?"ACTIVE NOW":"INACTIVE"}),e.jsx("button",{onClick:()=>c({...s,globalTrialMode:!s.globalTrialMode}),className:`w-14 h-8 rounded-full transition-colors relative ${s.globalTrialMode?"bg-green-500":"bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform ${s.globalTrialMode?"translate-x-6":"translate-x-0"}`})})]})]})})]})},ns=()=>{const[s,c]=r.useState([]),[N,f]=r.useState([]),[l,m]=r.useState(""),[o,x]=r.useState(!0),[a,b]=r.useState(null),[t,u]=r.useState(365),[h,n]=r.useState(!1),[v,A]=r.useState(!1),[w,U]=r.useState(null),[F,R]=r.useState(!1);r.useEffect(()=>{E()},[]),r.useEffect(()=>{let d=s;if(h){const S=new Date;S.setDate(S.getDate()-30),d=d.filter(k=>k.lastActive?new Date(k.lastActive)<S:!0)}if(l){const S=l.toLowerCase();d=d.filter(k=>{var P;return k.name.toLowerCase().includes(S)||k.adminEmail.toLowerCase().includes(S)||((P=k.place)==null?void 0:P.toLowerCase().includes(S))})}f(d)},[l,s,h]);const E=async()=>{x(!0);const d=await g.getAllSchools();c(d),f(d),x(!1)},_=async()=>{if(!a||!confirm(`Upgrade ${a.name} to PRO for ${t} days?`))return;(await g.manuallyUpgradeSchool(a.id,!0,t)).success?(alert("Upgrade Successful! School now has Pro access."),b(null),E()):alert("Upgrade Failed")},L=async()=>{if(!a||!confirm(`Revoke PRO access from ${a.name}?`))return;(await g.manuallyUpgradeSchool(a.id,!1,0)).success?(alert("Access Revoked."),b(null),E()):alert("Failed")},I=async()=>{if(!a)return;R(!0);const d=await g.getSchoolDeepAnalytics(a.id);U(d),R(!1),A(!0)},D=async()=>{if(!a)return;const d=`CRITICAL WARNING: This will permanently DELETE ${a.name} and ALL its data.

Type 'DELETE' to confirm.`;if(prompt(d)!=="DELETE")return;const k=await g.deleteSchool(a.id);k.success?(alert("School Deleted Successfully."),b(null),E()):alert("Delete Failed: "+k.message)},H=async()=>{if(!a||!confirm(`This will wipe all STUDENTS, CLASSES, and MARKS for ${a.name}.
The school account itself will remain.

Continue?`))return;const d=await g.resetSchoolData(a.id);d.success?(alert("Academic data wiped successfully."),E()):alert("Reset Failed: "+d.message)};return e.jsxs("div",{className:"h-full flex flex-col space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center bg-slate-900 p-4 rounded-xl border border-slate-800 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-6 h-6 text-blue-500"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"School Manager"}),e.jsxs("span",{className:"bg-slate-800 text-slate-400 px-2 py-0.5 rounded text-xs",children:[N.length," / ",s.length]})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsxs("button",{onClick:()=>n(!h),className:`px-3 py-2 rounded-lg text-xs font-bold border transition-colors flex items-center gap-2 whitespace-nowrap ${h?"bg-red-900/20 border-red-500 text-red-400":"bg-slate-800 border-slate-700 text-slate-400 hover:text-white"}`,children:[e.jsx(Q,{className:"w-3 h-3"})," Inactive ",h&&"(>30d)"]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(De,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search schools...",value:l,onChange:d=>m(d.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-9 pr-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-600"})]})]})]}),e.jsx(p,{className:"flex-1 p-0 bg-slate-900 border-slate-800 overflow-hidden",children:e.jsx("div",{className:"overflow-y-auto h-[600px] custom-scrollbar",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-800 text-slate-400 text-xs uppercase sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"School Name"}),e.jsx("th",{className:"p-4",children:"Admin Email"}),e.jsx("th",{className:"p-4 text-center",children:"Status"}),e.jsx("th",{className:"p-4 text-center",children:"Students"}),e.jsx("th",{className:"p-4 text-center",children:"Expiry"}),e.jsx("th",{className:"p-4 text-center",children:"Last Active"}),e.jsx("th",{className:"p-4 text-center",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800 text-slate-300",children:[N.map(d=>{const S=!d.lastActive||new Date().getTime()-new Date(d.lastActive).getTime()>2592e6;return e.jsxs("tr",{className:"hover:bg-slate-800/50 transition-colors",children:[e.jsxs("td",{className:"p-4 font-bold text-white",children:[d.name,e.jsx("p",{className:"text-[10px] text-slate-500 font-normal",children:d.place})]}),e.jsx("td",{className:"p-4",children:d.adminEmail}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold ${d.isPro?"bg-green-500/20 text-green-400":"bg-slate-700 text-slate-400"}`,children:d.isPro?"PRO":"FREE"})}),e.jsx("td",{className:"p-4 text-center",children:d.studentCount}),e.jsx("td",{className:"p-4 text-center font-mono text-xs",children:d.expiryDate?new Date(d.expiryDate).toLocaleDateString():"-"}),e.jsx("td",{className:`p-4 text-center font-mono text-xs ${S?"text-red-400 font-bold":"text-slate-500"}`,children:d.lastActive?new Date(d.lastActive).toLocaleDateString():"Never"}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("button",{onClick:()=>b(d),className:"p-2 hover:bg-slate-700 rounded-full transition-colors text-slate-400 hover:text-white",children:e.jsx(qe,{className:"w-4 h-4"})})})]},d.id)}),N.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-500",children:"No schools found matching your criteria."})})]})]})})}),a&&!v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",children:e.jsxs(p,{className:"w-full max-w-md border-t-4 border-t-blue-500 bg-slate-900",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:a.name}),e.jsx("p",{className:"text-sm text-slate-400",children:a.isPro?"Currently Pro Plan":"Currently Free Plan"}),e.jsxs("p",{className:"text-[10px] text-slate-500 mt-1 flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"})," Last Active: ",a.lastActive?new Date(a.lastActive).toDateString():"Never"]})]}),e.jsx("button",{onClick:()=>b(null),className:"text-slate-500 hover:text-white",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:I,className:"w-full py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-bold flex items-center justify-center gap-2 border border-slate-700",children:F?"Scanning...":e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4 text-blue-400"})," View Deep Intelligence"]})}),e.jsx("div",{className:"h-px bg-slate-800 my-2"}),a.isPro?e.jsxs("div",{className:"bg-red-900/20 p-4 rounded-xl border border-red-900/50",children:[e.jsxs("h4",{className:"text-red-400 font-bold mb-2 flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"})," Revoke Access"]}),e.jsx("p",{className:"text-xs text-red-200 mb-3",children:"Downgrade this school back to Free Plan."}),e.jsx("button",{onClick:L,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold rounded py-2 text-xs",children:"Revoke Pro Status"})]}):e.jsxs("div",{className:"bg-green-900/20 p-4 rounded-xl border border-green-900/50",children:[e.jsxs("h4",{className:"text-green-400 font-bold mb-2 flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"})," Grant Special Upgrade"]}),e.jsx("p",{className:"text-xs text-green-200 mb-3",children:"Give this school free PRO access."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:t,onChange:d=>u(parseInt(d.target.value)),className:"w-20 bg-slate-800 border border-slate-700 rounded p-2 text-white text-sm"}),e.jsxs("button",{onClick:_,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold rounded py-2 text-xs",children:["Grant ",t," Days"]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-800",children:[e.jsxs("p",{className:"text-[10px] font-bold text-red-500 uppercase mb-2 flex items-center gap-1",children:[e.jsx(ce,{className:"w-3 h-3"})," Danger Zone"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:H,className:"flex-1 py-2 bg-slate-800 border border-red-900/30 text-red-400 hover:bg-red-900/20 rounded-lg text-xs font-bold flex items-center justify-center gap-1",children:[e.jsx(ze,{className:"w-3 h-3"})," Wipe Data"]}),e.jsxs("button",{onClick:D,className:"flex-1 py-2 bg-red-900/20 hover:bg-red-900/40 text-red-500 border border-red-900/50 rounded-lg text-xs font-bold flex items-center justify-center gap-1",children:[e.jsx(me,{className:"w-3 h-3"})," Delete School"]})]})]})]})]})}),v&&w&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4 animate-fade-in-up",children:e.jsxs(p,{className:"w-full max-w-4xl h-[90vh] bg-slate-950 border border-slate-800 flex flex-col p-0 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center border border-slate-700",children:e.jsx(he,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:a==null?void 0:a.name}),e.jsx("p",{className:"text-xs text-slate-400",children:"Data Intelligence Report"})]})]}),e.jsx("button",{onClick:()=>A(!1),className:"p-2 hover:bg-slate-800 rounded-full text-slate-400 hover:text-white",children:e.jsx(Ie,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${w.health.riskLevel==="HIGH"?"bg-red-900/20 border-red-900/50":w.health.riskLevel==="MEDIUM"?"bg-orange-900/20 border-orange-900/50":"bg-green-900/20 border-green-900/50"}`,children:[e.jsx("p",{className:"text-xs font-bold uppercase opacity-70 mb-1 text-white",children:"Churn Risk"}),e.jsx("h3",{className:`text-2xl font-black ${w.health.riskLevel==="HIGH"?"text-red-500":w.health.riskLevel==="MEDIUM"?"text-orange-500":"text-green-500"}`,children:w.health.riskLevel}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:["Inactive for ",w.health.daysInactive," days"]})]}),e.jsxs("div",{className:"p-4 bg-slate-900 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Database Footprint"}),e.jsxs("h3",{className:"text-2xl font-black text-white",children:[w.storage.usedMB," MB"]}),e.jsx("div",{className:"w-full bg-slate-800 h-1.5 rounded-full mt-3 overflow-hidden",children:e.jsx("div",{className:"bg-blue-500 h-full rounded-full",style:{width:`${w.storage.loadPercent}%`}})}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[w.storage.loadPercent,"% of Free Tier Limit"]})]}),e.jsxs("div",{className:"p-4 bg-slate-900 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"User Base"}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-white",children:w.counts.students}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"Students"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-300",children:w.counts.teachers}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"Teachers"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-500"})," Feature Usage Heatmap"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:"Results"}),e.jsx("p",{className:"text-xl font-bold text-white mt-1",children:w.features.results}),e.jsx("p",{className:"text-[10px] text-slate-600",children:"Marks Entries"})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:"Fees"}),e.jsx("p",{className:"text-xl font-bold text-white mt-1",children:w.features.fees}),e.jsx("p",{className:"text-[10px] text-slate-600",children:"Transactions"})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:"Exams"}),e.jsx("p",{className:"text-xl font-bold text-white mt-1",children:w.features.exams}),e.jsx("p",{className:"text-[10px] text-slate-600",children:"Created"})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:"Notices"}),e.jsx("p",{className:"text-xl font-bold text-white mt-1",children:w.features.communication}),e.jsx("p",{className:"text-[10px] text-slate-600",children:"Sent"})]})]})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsxs("h4",{className:"text-sm font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-slate-500"})," Technical Metadata"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-slate-950 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-500",children:"School ID"}),e.jsx("span",{className:"font-mono text-slate-300",children:a==null?void 0:a.id})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-slate-950 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-500",children:"Joined On"}),e.jsx("span",{className:"font-mono text-slate-300",children:new Date(w.health.joinedAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-slate-950 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-500",children:"Admin Email"}),e.jsx("span",{className:"font-mono text-slate-300",children:a==null?void 0:a.adminEmail})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-slate-950 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-500",children:"Plan Type"}),e.jsx("span",{className:`font-bold ${a!=null&&a.isPro?"text-green-400":"text-slate-400"}`,children:a!=null&&a.isPro?"PRO":"FREE"})]})]})]})]})]})})]})},cs=()=>{var x,a,b;const[s,c]=r.useState(null),[N,f]=r.useState(!0);r.useEffect(()=>{l()},[]);const l=async()=>{const t=await g.getAttributionStats();c(t),f(!1)};if(N)return e.jsx("div",{children:"Loading Growth Metrics..."});const m=(s==null?void 0:s.sources)||[],o=m.reduce((t,u)=>t+u.count,0);return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(B,{className:"w-6 h-6 text-yellow-400 fill-yellow-400"})," Viral Loop Analytics"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Total Referrals"}),e.jsx("h3",{className:"text-4xl font-black text-white mt-1",children:o}),e.jsxs("p",{className:"text-xs text-green-400 mt-2 flex items-center gap-1",children:[e.jsx(G,{className:"w-3 h-3"})," +12% this week"]})]}),e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Top Source"}),e.jsx("h3",{className:"text-2xl font-black text-white mt-1",children:((x=m[0])==null?void 0:x.source)||"None"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:[((a=m[0])==null?void 0:a.count)||0," Signups"]})]}),e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Attributed Revenue"}),e.jsxs("h3",{className:"text-4xl font-black text-white mt-1",children:["â‚¹",s==null?void 0:s.revenue.toLocaleString()]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"From viral channels"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsx("h3",{className:"font-bold text-white mb-6",children:"Acquisition Channels"}),e.jsxs("div",{className:"space-y-4",children:[m.map((t,u)=>{const h=t.count/o*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1 text-slate-300",children:[e.jsx("span",{className:"font-bold",children:t.source.replace("_"," ")}),e.jsxs("span",{children:[t.count," (",h.toFixed(1),"%)"]})]}),e.jsx("div",{className:"w-full bg-slate-800 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${u===0?"bg-blue-500":u===1?"bg-purple-500":"bg-slate-600"}`,style:{width:`${h}%`}})})]},u)}),m.length===0&&e.jsx("p",{className:"text-slate-500 text-sm text-center",children:"No referral data yet."})]})]}),e.jsxs(p,{className:"bg-slate-900 border-slate-800",children:[e.jsx("h3",{className:"font-bold text-white mb-6",children:"Top Viral Schools"}),e.jsxs("div",{className:"space-y-4",children:[(b=s==null?void 0:s.topReferrers)==null?void 0:b.map((t,u)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-xl border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-700 rounded-full flex items-center justify-center font-bold text-slate-400 text-xs",children:u+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white",children:t.name}),e.jsxs("p",{className:"text-[10px] text-slate-500",children:["ID: ",t.id.substring(0,8),"..."]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-green-400",children:t.count}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Refers"})]})]},u)),(!(s!=null&&s.topReferrers)||s.topReferrers.length===0)&&e.jsx("p",{className:"text-slate-500 text-sm text-center",children:"No top referrers."})]})]})]})]})},is=()=>{const[s,c]=r.useState([]),[N,f]=r.useState(!0);r.useEffect(()=>{l()},[]);const l=async()=>{f(!0);const o=await g.getPendingQuestions();c(o),f(!1)},m=async(o,x)=>{await g.moderateQuestion(o,x),l()};return N?e.jsx("div",{children:"Loading Moderation Queue..."}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(de,{className:"w-6 h-6 text-purple-400"})," Content Moderation"]}),e.jsx("button",{onClick:l,className:"p-2 bg-slate-800 rounded-full hover:bg-slate-700",children:e.jsx(M,{className:"w-4 h-4 text-white"})})]}),e.jsxs(p,{className:"bg-slate-900 border-slate-800 p-0 overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-slate-800 border-b border-slate-700 flex justify-between",children:e.jsxs("span",{className:"text-sm font-bold text-white",children:["Pending Questions (",s.length,")"]})}),e.jsxs("div",{className:"overflow-y-auto max-h-[600px] custom-scrollbar",children:[s.length===0&&e.jsx("p",{className:"text-center text-slate-500 py-10",children:"No pending contributions."}),s.map(o=>e.jsx("div",{className:"p-4 border-b border-slate-800 hover:bg-slate-800/30 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 mb-1",children:[e.jsx("span",{className:"text-[10px] bg-blue-900/30 text-blue-400 px-2 py-0.5 rounded border border-blue-900/50",children:o.subject}),e.jsx("span",{className:"text-[10px] bg-slate-800 text-slate-400 px-2 py-0.5 rounded",children:o.topic})]}),e.jsx("p",{className:"font-bold text-white text-sm mb-2",children:o.text}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-400 mb-2",children:o.options.map((x,a)=>e.jsxs("span",{className:a===o.correctOptionIndex?"text-green-400 font-bold":"",children:[a+1,". ",x]},a))}),e.jsxs("p",{className:"text-[10px] text-slate-600 flex items-center gap-1",children:[e.jsx(q,{className:"w-3 h-3"})," Contributed by: ",o.contributedBy]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>m(o.id,"APPROVE"),className:"p-2 bg-green-900/20 text-green-500 hover:bg-green-900/40 rounded-lg transition-colors",children:e.jsx(Pe,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>m(o.id,"REJECT"),className:"p-2 bg-red-900/20 text-red-500 hover:bg-red-900/40 rounded-lg transition-colors",children:e.jsx(Me,{className:"w-5 h-5"})})]})]})},o.id))]})]})]})},js=()=>{const s=Oe(),[c,N]=r.useState("overview"),f=()=>{localStorage.clear(),s("/login")},l=({id:m,label:o,icon:x})=>e.jsxs("button",{onClick:()=>N(m),className:`p-3 rounded-xl flex items-center gap-3 text-sm font-bold transition-all w-full text-left ${c===m?"bg-blue-600/20 text-blue-400 border border-blue-600/50 shadow-[0_0_10px_rgba(37,99,235,0.2)]":"text-slate-500 hover:bg-slate-800 hover:text-slate-300"}`,children:[e.jsx(x,{className:"w-5 h-5"})," ",o]});return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-200 font-sans pb-20 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 border-b border-slate-800 p-4 flex justify-between items-center sticky top-0 z-50 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center shadow-[0_0_15px_rgba(37,99,235,0.5)]",children:e.jsx($,{className:"w-6 h-6 text-white animate-pulse"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-black text-xl text-white tracking-widest uppercase",children:["Result",e.jsx("span",{className:"text-blue-500",children:"Mate"})]}),e.jsx("p",{className:"text-xs font-mono text-slate-500",children:"SUPER ADMIN CONSOLE"})]})]}),e.jsxs("button",{onClick:f,className:"text-xs font-bold text-red-500 hover:text-red-400 flex items-center gap-2 border border-red-900/50 px-3 py-1.5 rounded-full hover:bg-red-900/20 transition-all",children:[e.jsx(Ye,{className:"w-3 h-3"})," DISCONNECT"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-80px)]",children:[e.jsxs("div",{className:"w-full md:w-64 bg-slate-900/80 backdrop-blur border-r border-slate-800 p-4 flex flex-col gap-2 overflow-y-auto",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider mb-1 mt-2 pl-2",children:"Operations"}),e.jsx(l,{id:"overview",label:"Mission Control",icon:Be}),e.jsx(l,{id:"growth",label:"Growth & Viral",icon:B}),e.jsx(l,{id:"schools",label:"School Manager",icon:q}),e.jsx(l,{id:"content",label:"Content Moderation",icon:de}),e.jsx(l,{id:"marketing",label:"Marketing",icon:ie}),e.jsx(l,{id:"staff",label:"Staff & Roles",icon:W}),e.jsx("p",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider mb-1 mt-4 pl-2",children:"Technical"}),e.jsx(l,{id:"infra",label:"Infrastructure",icon:oe}),e.jsx(l,{id:"control",label:"System Control",icon:Ue}),e.jsx("p",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider mb-1 mt-4 pl-2",children:"Support"}),e.jsx(l,{id:"support",label:"Support Desk",icon:Qe})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto custom-scrollbar relative bg-slate-950",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5 pointer-events-none fixed"}),c==="overview"&&e.jsx(Xe,{}),c==="growth"&&e.jsx(cs,{}),c==="schools"&&e.jsx(ns,{}),c==="content"&&e.jsx(is,{}),c==="marketing"&&e.jsx(rs,{}),c==="support"&&e.jsx(ss,{}),c==="control"&&e.jsx(ts,{}),c==="infra"&&e.jsx(as,{}),c==="staff"&&e.jsx(ls,{})]})]})]})};export{js as default};
