import{c as I,r as d,j as e,G as y,S,d as x,e as M,g as p,L as D,C as g,h as U,U as F,i as K,T as H,X as O,M as R,k as z,b as $}from"./index-E6X91Rqg.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=I("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),X=({classes:i,onRefresh:f,onShowShare:W})=>{const[t,j]=d.useState(""),[l,m]=d.useState(""),[h,N]=d.useState(""),[k,b]=d.useState(""),[w,v]=d.useState(!1),[P,C]=d.useState(!1),[r,A]=d.useState(null),T=async s=>{if(s.preventDefault(),!t){alert("Please enter Class/Course Name.");return}const a=l?l.trim():"",c=a?`${t} ${a}`:t;if(i.some(n=>n.name===c)){alert(`Class "${c}" already exists!`);return}let o=k;o||(o=Math.random().toString(36).slice(-6)),v(!0);const G=[{name:"Subject 1",maxMarks:50,passMarks:18},{name:"Subject 2",maxMarks:50,passMarks:18},{name:"Subject 3",maxMarks:50,passMarks:18}],u=await $.createClass(c,o,h,G);if(v(!1),u.success){const n=`${window.location.origin}${window.location.pathname}#/login?invite=${u.id}`;A({className:c,teacher:h||"Class Teacher",password:o,link:n}),C(!0),j(""),m(""),N(""),b(""),f()}else{const n=u.message;alert("Failed: "+(typeof n=="string"?n:JSON.stringify(n)))}},B=async s=>{if(!window.confirm("Delete this class? All students and marks will be lost."))return;(await $.deleteClass(s)).success?f():alert("Could not delete class.")},L=s=>{const a=`${window.location.origin}${window.location.pathname}#/login?invite=${s}`;navigator.clipboard.writeText(a),alert("Invite Link Copied!")},E=s=>{const a=`*Class Setup Invitation*

Hello ${s.teacher},

You have been invited to manage *${s.className}* on SchoolResult Pro.

ðŸ‘‡ *Click to Setup:*
${s.link}

ðŸ”‘ *Access Password:* ${s.password}

Please add students and enter marks.`;window.open(`https://wa.me/?text=${encodeURIComponent(a)}`,"_blank")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 animate-fade-in-up",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs(y,{className:"border-t-4 border-t-blue-500 sticky top-24",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6 pb-4 border-b border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center shrink-0",children:e.jsx(S,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white leading-tight",children:"New Class"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Add a batch & assign teacher"})]})]}),e.jsxs("form",{onSubmit:T,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-1 uppercase",children:"Class / Course"}),e.jsx(x,{placeholder:"e.g. 10 / BCA",value:t,onChange:s=>j(s.target.value),required:!0,list:"grade-suggestions",className:"font-bold"}),e.jsx("datalist",{id:"grade-suggestions",children:["Pre-KG","LKG","UKG","1","2","3","4","5","6","7","8","9","10","+1 Science","+1 Commerce","+1 Humanities","+2 Science","+2 Commerce","BSc","BCom","BA","BCA","BBA","MSc","MCom","MA","MBA","Hifz","Madrasa 1","Madrasa 5","Madrasa 7","Madrasa 10","NEET Batch","JEE Batch","KEAM","CA Foundation","IELTS","OET","PSC Coaching"].map(s=>e.jsx("option",{value:s},s))})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-1 uppercase",children:"Batch"}),e.jsx(x,{placeholder:"A",value:l,className:"text-center font-bold",onChange:s=>{const a=s.target.value;a.length===1?m(a.toUpperCase()):m(a)}})]})]}),t&&e.jsxs("div",{className:`text-center text-xs font-bold py-2 rounded-lg flex items-center justify-center gap-2 ${i.some(s=>s.name===(l?`${t} ${l}`:t))?"bg-red-50 text-red-600":"bg-blue-50 text-blue-600"}`,children:[e.jsx(M,{className:"w-3 h-3"}),"Preview: ",t," ",l,i.some(s=>s.name===(l?`${t} ${l}`:t))&&e.jsx("span",{className:"block text-[10px] bg-red-200 px-1 rounded ml-1",children:"Exists"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-1",children:"Teacher Name (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),e.jsx(x,{className:"pl-9",placeholder:"e.g. Mrs. Smith",value:h,onChange:s=>N(s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-1",children:"Access Password"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(D,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),e.jsx(x,{className:"pl-9",placeholder:"Set Password",value:k,onChange:s=>b(s.target.value)})]}),e.jsx("button",{type:"button",onClick:()=>b(Math.random().toString(36).slice(-6)),className:"bg-purple-50 dark:bg-purple-900/20 px-3 rounded-lg text-xs font-bold hover:bg-purple-100 dark:hover:bg-purple-900/40 text-purple-600 border border-purple-200 dark:border-purple-800",title:"Generate Random",children:e.jsx(M,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1.5 flex items-center gap-1",children:[e.jsx(g,{className:"w-3 h-3 text-green-500"})," Leave blank to use Invite Link later."]})]}),e.jsx(U,{type:"submit",disabled:w,className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 shadow-lg shadow-blue-500/20",children:w?"Creating...":e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4"})," Create Class"]})})]})]})}),e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[i.map(s=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-100 dark:bg-slate-700 rounded-lg flex items-center justify-center font-black text-slate-500 dark:text-slate-400 text-sm",children:s.name.substring(0,2)}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[s.name,s.submissionStatus==="SUBMITTED"&&e.jsxs("span",{className:"bg-green-100 text-green-700 text-[10px] px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(g,{className:"w-3 h-3"})," Submitted"]})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex flex-wrap gap-2 items-center",children:[e.jsxs("span",{className:"flex items-center gap-1 font-bold bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:[e.jsx(F,{className:"w-3 h-3"})," ",s.studentCount||0," Total"]}),e.jsxs("span",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 font-medium bg-blue-50 dark:bg-blue-900/20 px-2 py-0.5 rounded",children:[e.jsx(p,{className:"w-3 h-3"})," ",s.boysCount||0," Boys"]}),e.jsxs("span",{className:"flex items-center gap-1 text-pink-600 dark:text-pink-400 font-medium bg-pink-50 dark:bg-pink-900/20 px-2 py-0.5 rounded",children:[e.jsx(p,{className:"w-3 h-3"})," ",s.girlsCount||0," Girls"]})]}),e.jsxs("div",{className:"text-[10px] text-slate-400 mt-1.5 flex items-center gap-2",children:[e.jsxs("span",{children:["Teacher: ",s.teacherName||"Not Assigned"]}),e.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),e.jsxs("span",{className:"font-mono",children:["Pass: ",s.password||"****"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>L(s.id),className:"flex-1 sm:flex-none px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg text-xs font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors flex items-center justify-center gap-2",title:"Share Login Link",children:[e.jsx(K,{className:"w-3 h-3"})," Share Access"]}),e.jsx("button",{onClick:()=>B(s.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(H,{className:"w-4 h-4"})})]})]},s.id)),i.length===0&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-12 text-center border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mb-4",children:e.jsx(S,{className:"w-8 h-8 text-blue-500"})}),e.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300",children:"No classes yet"}),e.jsx("p",{className:"text-slate-500 text-sm max-w-xs mx-auto mt-1",children:"Create your first class from the form on the left to start adding students."})]})]})]}),P&&r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(y,{className:"w-full max-w-md bg-white dark:bg-slate-900 text-center relative border-t-4 border-t-green-500",children:[e.jsx("button",{onClick:()=>C(!1),className:"absolute top-3 right-3 text-slate-400 hover:text-slate-600",children:e.jsx(O,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(g,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-bounce"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Class Created!"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:[e.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:r.className})," is ready. Share details with the teacher."]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6 text-left",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Class Password"}),e.jsx("span",{className:"font-mono font-black text-lg text-blue-600 dark:text-blue-400",children:r.password})]}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 my-2"}),e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Invite Link:"}),e.jsx("div",{className:"bg-white dark:bg-slate-900 p-2 rounded border border-slate-200 dark:border-slate-700 text-[10px] text-slate-500 font-mono break-all",children:r.link})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>E(r),className:"flex-1 bg-[#25D366] hover:bg-[#20bd5a] text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-green-500/20",children:[e.jsx(R,{className:"w-5 h-5"})," WhatsApp"]}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(`Class: ${r.className}
Link: ${r.link}
Password: ${r.password}`),alert("Copied details!")},className:"flex-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-slate-200",children:[e.jsx(z,{className:"w-5 h-5"})," Copy All"]})]})]})})]})};export{X as default};
