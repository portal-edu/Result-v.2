import{c as R,r as a,j as e,K as ie,S as de,L as G,o as O,b as D,g as _,m as te,N as ce,O as se,B as oe,i as H,P as xe,Q as V,V as q,d as Z,Y as J,$ as me,G as K,a0 as he,t as z,a1 as be,a as w,a2 as ue,a3 as pe,f as ge,p as ae,A as fe,a4 as je,W as le,u as Ne}from"./index-Cq6F2XBU.js";import{C as we}from"./clipboard-list-DAbK2cl1.js";import{C as $}from"./clock-zmBEFEum.js";import{F as ye,T as ve}from"./target-DduVXa8c.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=R("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=R("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=R("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=R("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=R("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=R("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),Ae=({user:t,marks:i,assessments:N,schoolConfig:h})=>{const f=a.useMemo(()=>{if(!i||!i.subjects)return null;let s=-1,c=101,j="",x="",u=0,v=0;Object.entries(i.subjects).forEach(([P,I])=>{const A=typeof I=="number"?I:0;A>s&&(s=A,j=P),A<c&&A>0&&(c=A,x=P),u+=A,v++});const l=v>0?u/v:0;let r="Consistency is key! Keep practicing daily.",k="NEUTRAL";return c<35?(r=`You're struggling with ${x}. Try spending 30 mins extra daily on it!`,k="URGENT"):l>90?(r=`You are a champion in ${j}! ðŸŒŸ Maintain this momentum.`,k="EXCELLENT"):l>75?(r=`Great job! To reach the top, focus on converting your ${x} marks to A grade.`,k="GOOD"):r=`You have potential. A little more focus on ${x} can boost your total rank.`,{strong:j||"None",weak:x||"None",tip:r,mood:k}},[i]);return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[f&&e.jsxs("div",{className:`rounded-3xl p-6 relative overflow-hidden shadow-lg border border-white/10 ${t.isPremium?f.mood==="EXCELLENT"?"bg-gradient-to-br from-green-500 to-emerald-700":f.mood==="URGENT"?"bg-gradient-to-br from-orange-500 to-red-600":"bg-gradient-to-br from-indigo-500 to-purple-700":"bg-slate-900"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 text-white",children:e.jsx(ie,{className:"w-32 h-32 rotate-12"})}),t.isPremium?e.jsxs("div",{className:"relative z-10 text-white animate-fade-in-up",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsxs("span",{className:"bg-white/20 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 backdrop-blur-md",children:[e.jsx(de,{className:"w-3 h-3"})," AI Smart Analyst"]})}),e.jsxs("p",{className:"text-lg md:text-xl font-bold leading-relaxed mb-6",children:['"',f.tip,'"']}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-black/20 backdrop-blur-md rounded-xl p-3 border border-white/10",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold opacity-70 mb-1",children:"Strongest"}),e.jsx("p",{className:"font-black text-lg truncate",children:f.strong})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-md rounded-xl p-3 border border-white/10",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold opacity-70 mb-1",children:"Improve"}),e.jsx("p",{className:"font-black text-lg truncate",children:f.weak})]})]})]}):e.jsxs("div",{className:"relative z-10 text-white text-center py-6",children:[e.jsxs("div",{className:"blur-sm select-none opacity-50 mb-4",children:[e.jsx("p",{className:"text-xl font-bold",children:"Your performance requires attention in specific areas."}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[e.jsx("div",{className:"bg-white/10 h-16 rounded-xl"}),e.jsx("div",{className:"bg-white/10 h-16 rounded-xl"})]})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center mb-2 backdrop-blur-sm border border-white/20",children:e.jsx(G,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Unlock AI Insights"}),e.jsx("p",{className:"text-xs text-slate-300 max-w-xs mx-auto",children:"Get personalized study tips and strength analysis."})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2 text-lg",children:[e.jsx(O,{className:"w-5 h-5 text-blue-500"})," Upcoming Tasks"]}),e.jsx("span",{className:"text-xs font-bold bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:N.length})]}),N.length>0?e.jsx("div",{className:"space-y-3",children:N.map(s=>{const j=s.schedules&&s.schedules.length>0?"Scheduled":"Ongoing";return e.jsxs(D,{className:"flex items-center gap-4 p-4 hover:border-blue-300 transition-colors cursor-pointer group",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 shadow-sm group-hover:scale-110 transition-transform ${s.type==="STAR"?"bg-yellow-100 text-yellow-600":"bg-purple-100 text-purple-600"}`,children:e.jsx(we,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm mb-1 truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"})," ",s.frequency]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"})," ",s.questions.length," Items"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded ${j==="Ongoing"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:j})})]},s.id)})}):e.jsxs("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800/50 rounded-3xl border-2 border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx(te,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No tasks scheduled yet."}),e.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"Enjoy your free time!"})]})]}),h&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>window.open(`https://wa.me/?text=I%20study%20at%20${h.schoolName}`,"_blank"),className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center gap-2 hover:bg-slate-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:e.jsx(ce,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:"Share School"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600",children:e.jsx(O,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:"Timetable (Soon)"})]})]})]})},Ee=({marks:t,user:i})=>{if(!t)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-center p-6 animate-fade-in-up",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:e.jsx(ye,{className:"w-10 h-10 text-slate-400"})}),e.jsx("h3",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"No Data Available"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Marks for the current term haven't been published yet."})]});const N=Object.entries(t.subjects),h=N.length*100,f=h>0?t.total/h*100:0;return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(D,{className:"bg-gradient-to-br from-blue-600 to-indigo-700 text-white border-none",children:[e.jsx("p",{className:"text-xs font-bold opacity-70 uppercase mb-1",children:"Total Score"}),e.jsx("h2",{className:"text-3xl font-black",children:t.total}),e.jsxs("div",{className:"mt-2 text-[10px] bg-white/20 inline-block px-2 py-0.5 rounded",children:[f.toFixed(1),"% Secured"]})]}),e.jsxs(D,{className:"bg-white dark:bg-slate-800 flex flex-col justify-center items-center text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mb-2",children:e.jsx(se,{className:"w-6 h-6 text-purple-600"})}),e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Grade"}),e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white",children:t.grade})]})]}),e.jsxs(D,{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-blue-500"})," Subject Analysis"]})}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-40 mb-2 border-b border-slate-100 dark:border-slate-700 pb-2 px-1",children:N.map(([s,c],j)=>{const x=typeof c=="number"?c:0,u=Math.min(100,Math.max(10,x)),v=x>=90?"bg-green-500":x>=75?"bg-blue-500":x>=40?"bg-yellow-500":"bg-red-500";return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-8 bg-slate-800 text-white text-[10px] py-1 px-2 rounded transition-opacity pointer-events-none z-10 whitespace-nowrap",children:[s,": ",x]}),e.jsx("div",{className:`text-[9px] font-bold ${x>=90?"text-green-600":"text-slate-400"}`,children:x}),e.jsx("div",{className:`w-full rounded-t-md transition-all duration-1000 ease-out hover:opacity-80 ${v}`,style:{height:`${u}%`}})]},j)})}),e.jsx("div",{className:"flex justify-between text-[8px] text-slate-400 font-bold uppercase px-1",children:N.map(([s],c)=>e.jsx("div",{className:"flex-1 text-center truncate px-0.5",children:s.substring(0,3)},c))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm ml-1 flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4 text-slate-500"})," Report Card"]}),N.map(([s,c],j)=>{const x=typeof c=="number"?c:0;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl flex items-center justify-between border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-1 h-8 rounded-full ${x>=40?"bg-blue-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:s}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Maximum: 100"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xl font-black text-slate-800 dark:text-white",children:x}),e.jsx("p",{className:`text-[10px] font-bold ${x>=40?"text-green-500":"text-red-500"}`,children:x>=40?"PASS":"FAIL"})]})]},j)})]})]})},Ce=({user:t,schoolConfig:i,onUpdateUser:N})=>{const[h,f]=a.useState(!1),[s,c]=a.useState(""),[j,x]=a.useState(!1),[u,v]=a.useState(""),[l,r]=a.useState(!1),[k,P]=a.useState(!1),I=async g=>{if(!g.target.files||!g.target.files[0])return;x(!0);const E=await w.uploadImage(g.target.files[0],"students");x(!1),E.success&&E.publicUrl?c(E.publicUrl):alert("Upload failed.")},A=async()=>{if(!s)return;const g=await w.createProfileRequest(t.id,"photoUrl",s);g.success?(alert("Photo update requested. Teacher will approve."),f(!1),c("")):alert("Failed: "+g.message)},p=async()=>{if(!u||u.length<4){alert("Password too short");return}const g=await w.changePassword(t.id,u);g.success?(alert("Password updated!"),v("")):alert("Failed: "+g.message)},T=async()=>{P(!0),setTimeout(async()=>{const g="UPI"+Date.now(),E=await w.activateStudentPremium(t.id,g);P(!1),r(!1),E.success?(N({isPremium:!0}),alert("ðŸŽ‰ Premium Activated!")):alert("Failed")},1500)},M=async g=>{var U;const E=((U=t.socialLinks)==null?void 0:U._preferences)||{};N({socialLinks:{...t.socialLinks||{},_preferences:{...E,theme:g}}}),await w.updateStudentPreferences(t.id,{...E,theme:g})};return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsx("div",{className:"relative group",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-1 shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("div",{className:`p-6 rounded-[20px] text-white relative overflow-hidden ${t.isPremium?"bg-gradient-to-br from-slate-900 to-black":"bg-gradient-to-br from-blue-600 to-indigo-700"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:e.jsx(ee,{className:"w-24 h-24"})}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg opacity-90",children:"Digital Identity"}),e.jsx("p",{className:"text-xs opacity-70",children:"Official Student ID"})]}),(i==null?void 0:i.logoUrl)&&e.jsx("img",{src:i.logoUrl,className:"w-10 h-10 object-contain bg-white rounded-lg p-1"})]}),e.jsxs("div",{className:"flex gap-4 items-center relative z-10",children:[e.jsx("img",{src:t.photoUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.name}`,className:"w-20 h-20 rounded-xl object-cover border-2 border-white/30 bg-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black leading-tight mb-1",children:t.name}),e.jsx("p",{className:"text-sm font-mono opacity-80",children:t.regNo}),e.jsxs("div",{className:`mt-2 inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${t.isPremium?"bg-yellow-500 text-black":"bg-white/20"}`,children:[t.isPremium?e.jsx(H,{className:"w-3 h-3"}):e.jsx(xe,{className:"w-3 h-3"}),t.isPremium?"Elite Student":"Verified"]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] uppercase opacity-60",children:"School"}),e.jsx("p",{className:"text-xs font-bold",children:i==null?void 0:i.schoolName})]}),e.jsx("div",{className:"h-8 w-8 bg-white rounded flex items-center justify-center",children:e.jsx(ee,{className:"w-6 h-6 text-black"})})]}),!t.isPremium&&e.jsxs("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] flex flex-col items-center justify-center text-center p-6 z-20",children:[e.jsx(G,{className:"w-10 h-10 text-white/50 mb-2"}),e.jsx("h4",{className:"font-bold text-white text-lg",children:"Unlock ID Card"}),e.jsx("button",{onClick:()=>r(!0),className:"mt-3 bg-yellow-500 hover:bg-yellow-400 text-black text-xs font-bold px-6 py-2.5 rounded-full shadow-lg transition-transform hover:scale-105",children:"Get Verified (â‚¹20)"})]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-purple-500"})," Personalize"]}),!t.isPremium&&e.jsx(G,{className:"w-4 h-4 text-slate-400"})]}),!t.isPremium&&e.jsx("div",{className:"absolute inset-0 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px] z-10 flex flex-col items-center justify-center",children:e.jsxs("button",{onClick:()=>r(!0),className:"bg-purple-600 hover:bg-purple-700 text-white text-xs font-bold px-6 py-2.5 rounded-full shadow-lg flex items-center gap-2",children:[e.jsx(V,{className:"w-3 h-3 fill-white"})," Unlock Themes"]})}),e.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Choose your dashboard style:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("button",{onClick:()=>M("DEFAULT"),className:"h-16 rounded-xl bg-blue-600 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Standard"}),e.jsx("button",{onClick:()=>M("NEON"),className:"h-16 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Neon"}),e.jsx("button",{onClick:()=>M("GOLD"),className:"h-16 rounded-xl bg-gradient-to-r from-yellow-600 to-amber-700 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Gold"}),e.jsx("button",{onClick:()=>M("DARK_ROYAL"),className:"h-16 rounded-xl bg-slate-900 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Dark Royal"}),e.jsx("button",{onClick:()=>M("MINIMAL"),className:"h-16 rounded-xl bg-white border-2 border-slate-200 shadow-sm flex items-center justify-center text-slate-800 text-[10px] font-bold",children:"Minimal"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-blue-500"})," Profile Photo"]}),t.isPremium?!h&&e.jsx("button",{onClick:()=>f(!0),className:"text-xs font-bold text-blue-600 underline",children:"Change"}):e.jsx(G,{className:"w-4 h-4 text-slate-400"})]}),h?e.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-900 p-4 rounded-xl",children:[e.jsx(Z,{className:"h-9 text-xs",placeholder:"Paste Image URL...",value:s,onChange:g=>c(g.target.value)}),e.jsx("p",{className:"text-center text-[10px] text-slate-400 font-bold",children:"OR"}),e.jsxs("label",{className:"cursor-pointer bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 p-2 rounded-lg text-xs font-bold text-center flex items-center justify-center gap-2",children:[j?e.jsx(J,{className:"w-3 h-3 animate-spin"}):e.jsx(me,{className:"w-3 h-3"})," Upload Photo",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:I,disabled:j})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:A,className:"flex-1 bg-blue-600 text-white text-xs font-bold py-2 rounded-lg",children:"Update"}),e.jsx("button",{onClick:()=>f(!1),className:"flex-1 bg-slate-200 text-slate-600 text-xs font-bold py-2 rounded-lg",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-400",children:t.photoUrl?e.jsx("img",{src:t.photoUrl,className:"w-full h-full rounded-full object-cover"}):e.jsx(q,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-xs text-slate-500",children:"Update photo to personalize ID Card."})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"Security"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{type:"password",placeholder:"New Password",value:u,onChange:g=>v(g.target.value)}),e.jsx(K,{onClick:p,className:"whitespace-nowrap",children:"Update"})]})]}),e.jsxs("button",{onClick:()=>{localStorage.removeItem("school_id"),window.location.reload()},className:"w-full py-4 text-red-500 font-bold text-sm bg-red-50 dark:bg-red-900/10 rounded-2xl hover:bg-red-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"})," Sign Out"]}),l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-3xl p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-yellow-400 to-orange-500"}),e.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-slate-400 font-bold",children:"âœ•"}),e.jsxs("div",{className:"text-center mb-6 mt-2",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:e.jsx(H,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white",children:"Unlock Premium"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"One-time payment for full access"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-xl mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"Annual Fee"}),e.jsx("span",{className:"text-lg font-black text-slate-900 dark:text-white",children:"â‚¹20"})]}),e.jsx("div",{className:"h-px bg-slate-200 dark:border-slate-700 my-2"}),e.jsxs("ul",{className:"space-y-3 text-xs text-slate-500 dark:text-slate-400 mt-3",children:[e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(z,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"Verified Badge"})," on Profile"]})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(z,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"Download"})," Digital ID Card"]})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(z,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"AI Analytics"})," & Study Tips"]})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(z,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"Customize"})," Dashboard Themes"]})]})]})]}),e.jsx("button",{onClick:T,disabled:k,className:"w-full bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-orange-500/30 flex items-center justify-center gap-2 transition-transform active:scale-95",children:k?e.jsx(J,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-5 h-5"})," Pay â‚¹20 Now"]})})]})})]})},De=({user:t})=>{const[i,N]=a.useState([]),[h,f]=a.useState(!0),[s,c]=a.useState(null),[j,x]=a.useState([]),[u,v]=a.useState({}),[l,r]=a.useState(0),[k,P]=a.useState(0),[I,A]=a.useState(!1),[p,T]=a.useState(null),[M,g]=a.useState(!1);a.useEffect(()=>{E()},[]),a.useEffect(()=>{if(!s)return;const n=setInterval(()=>{r(d=>d<=1?(clearInterval(n),L(),0):d-1)},1e3);return()=>clearInterval(n)},[s]);const E=async()=>{f(!0);const n=await w.getExamsForClass(t.classId);N(n),f(!1)},U=async n=>{var W;const d=await w.getExamSubmission(n.id,t.id);if(d&&d.submittedAt){T(d);return}const b=new Date,o=new Date(n.endTime),m=new Date(n.startTime);if(b<m)return alert("Exam has not started yet.");if(b>o)return alert("Exam expired.");const y=await w.startExamAttempt(n.id,t.id);if(!y.success)return alert("Failed to start exam: "+y.message);const C=new Date(y.startedAt),S=Math.floor((new Date().getTime()-C.getTime())/1e3),ne=n.durationMinutes*60,X=Math.max(0,ne-S);if(X<=0){alert("Time Limit Exceeded!"),await w.submitExam(n.id,t.id,{},0,0);return}let Q=[...n.questions];(W=n.settings)!=null&&W.shuffleQuestions&&(Q=Q.sort(()=>Math.random()-.5)),x(Q),c(n),r(X),v((d==null?void 0:d.answers)||{}),P(0)},F=(n,d)=>{v(b=>({...b,[n]:d}))},L=async()=>{var m;if(!s||I)return;A(!0);let n=0,d=0;s.questions.forEach(y=>{d+=y.marks,u[y.id]===y.correctOptionIndex&&(n+=y.marks)});const b=await w.submitExam(s.id,t.id,u,n,d);A(!1);const o=s;if(c(null),b.success)if((m=o.settings)!=null&&m.showResultImmediately){const y=await w.getExamSubmission(o.id,t.id);T(y)}else alert("Exam Submitted! Result will be published by teacher."),E();else alert("Submission failed. Please contact teacher.")},B=n=>{const d=Math.floor(n/60),b=n%60;return`${d}:${b.toString().padStart(2,"0")}`};if(s){const n=j[k];return e.jsxs("div",{className:"fixed inset-0 z-50 bg-white dark:bg-slate-900 flex flex-col animate-fade-in-up",children:[e.jsxs("div",{className:"p-4 bg-slate-900 text-white flex justify-between items-center shadow-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm opacity-80",children:s.title}),e.jsxs("p",{className:"text-xs",children:["Q ",k+1," / ",j.length]})]}),e.jsx("div",{className:`font-mono text-xl font-bold px-3 py-1 rounded-lg ${l<60?"bg-red-500 animate-pulse":"bg-white/20"}`,children:B(l)})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6 leading-relaxed",children:n.text}),e.jsx("div",{className:"space-y-3",children:n.options.map((d,b)=>e.jsx("div",{onClick:()=>F(n.id,b),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${u[n.id]===b?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${u[n.id]===b?"border-blue-500 bg-blue-500 text-white":"border-slate-300"}`,children:u[n.id]===b&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium",children:d})]})},b))})]}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex justify-between gap-4",children:[e.jsx("button",{disabled:k===0,onClick:()=>P(d=>d-1),className:"px-6 py-3 rounded-xl bg-slate-100 dark:bg-slate-800 font-bold text-slate-500 disabled:opacity-50",children:e.jsx(ue,{className:"w-5 h-5"})}),k===j.length-1?e.jsx("button",{onClick:L,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl py-3 shadow-lg shadow-green-500/30",children:"Submit Exam"}):e.jsxs("button",{onClick:()=>P(d=>d+1),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl py-3 flex items-center justify-center gap-2",children:["Next Question ",e.jsx(pe,{className:"w-5 h-5"})]})]})]})}if(p){const n=i.find(d=>d.id===p.examId);return e.jsxs("div",{className:"animate-fade-in-up space-y-6",children:[e.jsxs(D,{className:"text-center py-10 bg-gradient-to-b from-blue-50 to-white dark:from-slate-800 dark:to-slate-900",children:[e.jsx("div",{className:"w-24 h-24 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(_,{className:"w-12 h-12 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white mb-2",children:"Exam Completed!"}),e.jsx("p",{className:"text-slate-500 mb-6",children:"You scored"}),e.jsx("div",{className:"text-6xl font-black text-blue-600 mb-2",children:p.score}),e.jsxs("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest",children:["Out of ",p.totalMarks]}),e.jsxs("div",{className:"mt-8 flex gap-3 justify-center",children:[e.jsx(K,{onClick:()=>T(null),variant:"secondary",children:"Back to Exams"}),e.jsx(K,{onClick:()=>g(!0),className:"bg-blue-600 text-white",children:"View Solution"})]})]}),M&&n&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:"Answer Key"}),n.questions.map((d,b)=>{const o=p.answers[d.id],m=o===d.correctOptionIndex;return e.jsxs(D,{className:`border-l-4 ${m?"border-green-500":"border-red-500"}`,children:[e.jsxs("div",{className:"mb-2 font-bold text-slate-800 dark:text-white text-sm",children:[e.jsxs("span",{className:"text-slate-400 mr-2",children:[b+1,"."]})," ",d.text]}),e.jsx("div",{className:"space-y-1",children:d.options.map((y,C)=>{let S="p-2 rounded text-xs border border-transparent";return C===d.correctOptionIndex?S+=" bg-green-50 dark:bg-green-900/20 text-green-700 border-green-200 font-bold":C===o&&!m?S+=" bg-red-50 dark:bg-red-900/20 text-red-700 border-red-200":S+=" text-slate-500 opacity-70",e.jsxs("div",{className:S,children:[y,C===d.correctOptionIndex&&e.jsx(ge,{className:"w-3 h-3 inline ml-2"}),C===o&&!m&&e.jsx(ae,{className:"w-3 h-3 inline ml-2"})]},C)})})]},d.id)})]})]})}return e.jsxs("div",{className:"space-y-4 animate-fade-in-up",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white mb-4",children:"Scheduled Exams"}),i.map(n=>{const d=new Date,b=new Date(n.startTime),o=new Date(n.endTime);let m="UPCOMING";return d>o?m="EXPIRED":d>=b&&(m="LIVE"),e.jsxs(D,{className:"relative overflow-hidden",children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${m==="LIVE"?"bg-green-500":m==="UPCOMING"?"bg-yellow-500":"bg-slate-300"}`}),e.jsxs("div",{className:"pl-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-lg",children:n.title}),e.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded uppercase ${m==="LIVE"?"bg-green-100 text-green-700 animate-pulse":"bg-slate-100 text-slate-500"}`,children:m})]}),e.jsx("p",{className:"text-xs text-slate-500 mb-4 line-clamp-2",children:n.description||"No instructions provided."}),e.jsxs("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-600 dark:text-slate-400 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"})," ",n.durationMinutes," Mins"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:"w-3 h-3"})," ",n.questions.length," Qs"]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>U(n),disabled:m==="UPCOMING",className:`flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${m==="LIVE"?"bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-500/30":"bg-slate-100 text-slate-400"}`,children:m==="LIVE"?e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-4 h-4 fill-white"})," Start Exam"]}):m==="UPCOMING"?`Starts ${b.toLocaleTimeString()}`:"View Result"})})]})]},n.id)}),i.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-400 text-sm",children:"No exams scheduled for your class."})})]})},Me=({user:t})=>{const[i,N]=a.useState([]),[h,f]=a.useState([]),[s,c]=a.useState(!0);a.useEffect(()=>{j()},[t]);const j=async()=>{c(!0);const l=await w.getFeeStructures(t.classId),r=await w.getStudentPayments(t.id);N(l),f(r),c(!1)},x=l=>{const r=h.find(P=>P.feeId===l.id);return r&&r.status==="PAID"?{label:"PAID",color:"text-green-600 bg-green-50 border-green-200",icon:_,paidAmount:r.amountPaid}:r&&r.status==="PARTIAL"?{label:"PARTIAL",color:"text-orange-600 bg-orange-50 border-orange-200",icon:$,paidAmount:r.amountPaid}:l.dueDate&&new Date(l.dueDate)<new Date?{label:"OVERDUE",color:"text-red-600 bg-red-50 border-red-200",icon:te,paidAmount:0}:{label:"PENDING",color:"text-slate-500 bg-slate-50 border-slate-200",icon:$,paidAmount:0}};if(s)return e.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Fees..."});const u=i.reduce((l,r)=>l+r.amount,0),v=h.reduce((l,r)=>l+(r.amountPaid||0),0);return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(D,{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white border-none",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(le,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"Fee Summary"}),e.jsx("p",{className:"text-xs text-emerald-100",children:"Academic Year 2024-25"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-emerald-200 uppercase mb-1",children:"Total Payable"}),e.jsxs("p",{className:"text-2xl font-black",children:["â‚¹",u]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-emerald-200 uppercase mb-1",children:"Paid So Far"}),e.jsxs("p",{className:"text-2xl font-black",children:["â‚¹",v]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/20 flex justify-between items-center text-sm font-bold",children:[e.jsx("span",{children:"Balance Due"}),e.jsxs("span",{className:u-v>0?"text-yellow-300":"text-white",children:["â‚¹",u-v]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-sm ml-1",children:"Payment History"}),i.length===0&&e.jsx("p",{className:"text-center text-slate-400 text-xs py-8",children:"No fees assigned to your class."}),i.map(l=>{const r=x(l),k=r.icon;return l.amount-(r.paidAmount||0),e.jsxs("div",{className:`p-4 rounded-xl border flex justify-between items-center bg-white dark:bg-slate-800 ${r.label==="OVERDUE"?"border-red-200 dark:border-red-900/50":"border-slate-100 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${r.color.split(" ")[1]} ${r.color.split(" ")[0]}`,children:e.jsx(k,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:l.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Due: ",l.dueDate?new Date(l.dueDate).toLocaleDateString():"N/A"]}),r.label==="PARTIAL"&&e.jsxs("p",{className:"text-[10px] text-orange-600 font-bold mt-1",children:["Paid: â‚¹",r.paidAmount]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-black text-slate-800 dark:text-white",children:["â‚¹",l.amount]}),e.jsx("div",{className:`inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold mt-1 uppercase ${r.color}`,children:r.label}),r.label==="PAID"&&e.jsxs("button",{className:"flex items-center gap-1 text-[10px] text-blue-600 font-bold mt-1 ml-auto hover:underline",children:[e.jsx(Pe,{className:"w-3 h-3"})," Receipt"]})]})]},l.id)})]})]})},Ie=({user:t})=>{const[i,N]=a.useState(null),[h,f]=a.useState(!0);return a.useEffect(()=>{(async()=>{const c=await w.getStudentAssessmentStats(t.id);N(c),f(!1)})()},[t]),h?e.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Reports..."}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(D,{className:"bg-gradient-to-br from-purple-600 to-indigo-600 text-white border-none",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 opacity-80",children:[e.jsx(V,{className:"w-4 h-4 text-yellow-300 fill-yellow-300"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Total Stars"})]}),e.jsx("h3",{className:"text-3xl font-black",children:i.history.reduce((s,c)=>s+(c.type==="STAR"?c.score:0),0)})]}),e.jsxs(D,{className:"bg-white dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-slate-500",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Activities"})]}),e.jsx("h3",{className:"text-3xl font-black text-slate-800 dark:text-white",children:i.history.length})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4 text-orange-500"})," Performance by Category"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[i.programs.map((s,c)=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-bold text-sm text-slate-800 dark:text-white truncate",children:s.name}),e.jsx("span",{className:"text-[10px] font-bold bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded text-slate-500",children:s.type})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("span",{className:"text-2xl font-black text-blue-600",children:s.totalScore}),e.jsxs("span",{className:"text-xs text-slate-400 mb-1",children:["points in ",s.entries," sessions"]})]})]},c)),i.programs.length===0&&e.jsx("p",{className:"col-span-full text-center text-xs text-slate-400",children:"No active assessments."})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-blue-500"})," Recent Logs"]}),e.jsx("div",{className:"space-y-2",children:i.history.slice(0,10).map((s,c)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-50 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-xs text-slate-700 dark:text-slate-300",children:s.program}),e.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(s.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.type==="STAR"&&e.jsx(V,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"font-black text-sm text-slate-800 dark:text-white",children:s.score}),e.jsxs("span",{className:"text-[10px] text-slate-400",children:["/ ",s.max]})]})]},c))})]})]})},Te=({user:t})=>{const[i,N]=a.useState([]),[h,f]=a.useState([]),[s,c]=a.useState(!0);a.useEffect(()=>{j()},[t]);const j=async()=>{c(!0);const l=await w.getStudentAttendanceStats(t.id);N(l.dailyStats),f(l.summaryStats),c(!1)};if(s)return e.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Attendance..."});const x=i.filter(l=>l.status==="PRESENT").length,u=i.length,v=u>0?Math.round(x/u*100):0;return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(D,{className:"bg-gradient-to-br from-green-600 to-emerald-700 text-white border-none",children:[e.jsx("p",{className:"text-xs font-bold opacity-80 uppercase mb-1",children:"Attendance"}),e.jsxs("h3",{className:"text-4xl font-black",children:[h.length>0?h[0].percentage:v,"%"]}),e.jsx("p",{className:"text-[10px] mt-2 bg-white/20 inline-block px-2 py-0.5 rounded",children:h.length>0?h[0].term:"Overall"})]}),e.jsxs(D,{className:"bg-white dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Days Present"}),e.jsx("h3",{className:"text-3xl font-black text-slate-800 dark:text-white",children:h.length>0?h[0].presentDays:x}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:["Out of ",h.length>0?h[0].workingDays:u," working days"]})]})]}),i.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-blue-500"})," Recent Activity"]}),e.jsx("div",{className:"space-y-2",children:i.slice(0,10).map((l,r)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:new Date(l.date).toLocaleDateString()}),e.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded flex items-center gap-1 ${l.status==="PRESENT"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.status==="PRESENT"?e.jsx(_,{className:"w-3 h-3"}):e.jsx(ae,{className:"w-3 h-3"}),l.status]})]},r))})]}),h.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 mt-6",children:"Term History"}),e.jsx("div",{className:"space-y-2",children:h.map((l,r)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:l.term}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"block text-sm font-black text-purple-600",children:[l.percentage,"%"]}),e.jsxs("span",{className:"text-[10px] text-slate-400",children:[l.presentDays,"/",l.workingDays," Days"]})]})]},r))})]}),i.length===0&&h.length===0&&e.jsx("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl",children:e.jsx("p",{className:"text-slate-400 text-sm",children:"No attendance records found."})})]})},$e=({user:t})=>{Ne();const[i,N]=a.useState("home"),[h,f]=a.useState(null),[s,c]=a.useState([]),[j,x]=a.useState([]),[u,v]=a.useState(null),[l,r]=a.useState([]),[k,P]=a.useState(!1),[I,A]=a.useState(0),[p,T]=a.useState(t),[M,g]=a.useState("Welcome"),[E,U]=a.useState({fees:!0,assessments:!0}),[F,L]=a.useState("bg-blue-600 shadow-blue-600/20");a.useEffect(()=>{T(t),B();const o=new Date().getHours();o<12?g("Good Morning"):o<18?g("Good Afternoon"):g("Good Evening")},[t]),a.useEffect(()=>{var y;switch(((y=(p.socialLinks||{})._preferences)==null?void 0:y.theme)||"DEFAULT"){case"NEON":L("bg-gradient-to-r from-purple-600 to-pink-600 shadow-purple-500/30");break;case"GOLD":L("bg-gradient-to-r from-yellow-600 to-amber-700 shadow-amber-500/30");break;case"DARK_ROYAL":L("bg-slate-900 shadow-slate-900/50");break;case"MINIMAL":L("bg-white border-b border-slate-200 !text-slate-900 shadow-sm");break;default:L(p.isPremium?"bg-slate-900 shadow-2xl shadow-yellow-900/20":"bg-blue-600 shadow-xl shadow-blue-600/20")}},[p]);const B=async()=>{const o=await w.getMarks(t.id,"Term 1");f(o);const m=await w.getStudentRequests(t.id);x(m);const y=await w.getSchoolConfig();v(y);const C=await w.getGlobalSettings();U({fees:C.MODULE_FEES!=="FALSE",assessments:C.MODULE_ASSESSMENTS!=="FALSE"});const S=await w.getAssessmentPrograms(void 0,t.classId);c(S),n()},n=async()=>{const o=localStorage.getItem("school_id");if(!o)return;const m=await w.getCampusPosts(o,"NOTICE");r(m.map(S=>({id:S.id,type:"NOTICE",title:S.title||"Official Notice",desc:S.message,date:S.createdAt,author:S.authorName})));const y=localStorage.getItem("notif_last_view"),C=m.some(S=>!y||new Date(S.createdAt).getTime()>parseInt(y));A(C?m.length:0)},d=()=>{P(!0),A(0),localStorage.setItem("notif_last_view",Date.now().toString())},b=F.includes("bg-white");return e.jsxs("div",{className:`pb-24 min-h-screen transition-all duration-500 font-sans ${p.isPremium&&!b?"bg-slate-950 text-white":"bg-slate-50 dark:bg-slate-900"}`,children:[e.jsxs("div",{className:`pt-10 pb-20 px-6 rounded-b-[40px] relative overflow-hidden transition-all duration-500 shadow-xl ${F}`,children:[!b&&e.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:`${b?"text-slate-500":"text-white/80"} text-xs font-bold mb-1 uppercase tracking-wide opacity-80`,children:M}),e.jsxs("h1",{className:`text-3xl font-black tracking-tight flex items-center gap-2 ${b?"text-slate-900":"text-white"}`,children:[(p.name||"Student").split(" ")[0],p.isPremium&&e.jsx(H,{className:"w-5 h-5 text-yellow-400 fill-yellow-400 animate-pulse"})]}),e.jsxs("p",{className:`${b?"text-slate-500 bg-slate-100":"text-white/60 bg-black/10"} text-xs font-mono mt-1 font-medium inline-block px-2 py-0.5 rounded`,children:["Reg: ",p.regNo]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:d,className:`relative p-2.5 rounded-full transition-colors backdrop-blur-sm ${b?"bg-slate-100 hover:bg-slate-200 text-slate-600":"bg-white/10 hover:bg-white/20 text-white"}`,children:[e.jsx(Y,{className:"w-5 h-5"}),I>0&&e.jsx("div",{className:"absolute top-0 right-0 w-2.5 h-2.5 bg-red-500 border-2 border-transparent rounded-full animate-pulse"})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:`w-14 h-14 rounded-full border-4 ${p.isPremium?"border-yellow-400":b?"border-slate-200":"border-white/30"} overflow-hidden bg-white shadow-lg`,children:p.photoUrl?e.jsx("img",{src:p.photoUrl,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:e.jsx(q,{className:"w-6 h-6"})})})})]})]})]}),e.jsx("div",{className:"px-6 -mt-8 relative z-20 mb-6",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 p-1.5 rounded-full shadow-lg flex justify-between gap-1 border border-slate-100 dark:border-slate-700 overflow-x-auto no-scrollbar",children:[{id:"home",label:"Home",icon:e.jsx(se,{className:"w-4 h-4"})},{id:"exams",label:"Exams",icon:e.jsx($,{className:"w-4 h-4"})},{id:"analytics",label:"Marks",icon:e.jsx(re,{className:"w-4 h-4"})},{id:"attendance",label:"Presence",icon:e.jsx(O,{className:"w-4 h-4"})},...E.fees?[{id:"fees",label:"Fees",icon:e.jsx(le,{className:"w-4 h-4"})}]:[],...E.assessments?[{id:"behavior",label:"Stars",icon:e.jsx(V,{className:"w-4 h-4"})}]:[],{id:"profile",label:"Profile",icon:e.jsx(q,{className:"w-4 h-4"})}].map(o=>e.jsxs("button",{onClick:()=>N(o.id),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-full text-xs font-bold transition-all min-w-[80px] ${i===o.id?"bg-slate-900 text-white shadow-md transform scale-105":"text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 dark:text-slate-400"}`,children:[o.icon,e.jsx("span",{children:o.label})]},o.id))})}),e.jsxs("div",{className:"px-4",children:[i==="home"&&e.jsx(Ae,{user:p,marks:h,assessments:s,schoolConfig:u}),i==="exams"&&e.jsx(De,{user:p}),i==="analytics"&&e.jsx(Ee,{marks:h,user:p}),i==="attendance"&&e.jsx(Te,{user:p}),i==="fees"&&e.jsx(Me,{user:p}),i==="behavior"&&e.jsx(Ie,{user:p}),i==="profile"&&e.jsx(Ce,{user:p,schoolConfig:u,onUpdateUser:o=>T(m=>({...m,...o}))})]}),k&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in-up",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-3xl p-6 h-[70vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5"})," Notifications"]}),e.jsx("button",{onClick:()=>P(!1),className:"text-slate-400 hover:text-slate-600",children:"Close"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 custom-scrollbar",children:l.length>0?l.map((o,m)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] font-bold bg-blue-100 text-blue-700 px-2 py-0.5 rounded uppercase",children:o.type}),e.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(o.date).toLocaleDateString()})]}),e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm mb-1",children:o.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed",children:o.desc}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 text-right",children:["- ",o.author]})]},m)):e.jsxs("div",{className:"text-center py-20 text-slate-400",children:[e.jsx(Y,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"No new notifications"})]})})]})})]})};export{$e as default};
