const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./OverviewTab-DmwBIfwX.js","./index-CAgeZUTc.js","./plus-DIeOG0JN.js","./clipboard-check-B68S_YZu.js","./ClassesTab-BFD208vB.js","./layout-grid-Ds9Q_Yb9.js","./plus-circle-DBUqNMgh.js","./trash-2-C9uBVfXZ.js","./thumbs-up-BfXvb8C5.js","./AssessmentsTab-BCHh7pbD.js","./clipboard-list-D2b9NoXt.js","./pen-square-BUSkRSQX.js","./clock-x2Co9Mkc.js","./target-D7oXoXYF.js","./FeesTab-BHGCh21J.js","./printer-BGvYz7kd.js","./SettingsTab-DCy6hiU9.js","./database-CKpq2GyI.js","./save-Dh3mLcKi.js","./BillingTab-DviuxOqx.js","./settings-8a1US88B.js","./ReportsTab-DoQVHSn-.js","./PromotionTab-BPGx8ygn.js","./TimetableTab-B2SDnYwS.js","./CalendarTab-BjU2PsIw.js"])))=>i.map(i=>d[i]);
import{c as U,u as ce,r as s,a as g,j as e,q as Ee,s as _e,t as Pe,X as $,G as N,H as xe,M as me,b as V,d as S,R as De,h as Te,l as J,v as Ae,w as Me,D as Re,g as he,A as Ie,x as Le,U as Oe,n as Fe,W as Ue,Z as $e,y as f,z as Ve,_ as j,E as Be,I as Ge}from"./index-CAgeZUTc.js";import{R as He,S as qe}from"./settings-8a1US88B.js";import{C as We}from"./clipboard-list-D2b9NoXt.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=U("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=U("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=U("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=U("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),Xe=({config:c,onNoticeClick:r})=>{const b=ce(),[a,p]=s.useState(""),[d,i]=s.useState([]),[n,E]=s.useState(!1),y=s.useRef(null);s.useEffect(()=>{const o=setTimeout(async()=>{if(a.length>=2){E(!0);const C=await g.searchAllStudents(a);i(C),E(!1)}else i([])},400);return()=>clearTimeout(o)},[a]),s.useEffect(()=>{const o=C=>{y.current&&!y.current.contains(C.target)&&i([])};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const _=o=>{i([]),p(""),alert(`Found Student ID: ${o}. (View Profile coming soon)`)};return e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4 bg-white dark:bg-slate-950 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm relative z-30",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-100 dark:border-blue-900/50 text-blue-600 dark:text-blue-400",children:c.logoUrl?e.jsx("img",{src:c.logoUrl,className:"w-8 h-8 object-contain",alt:"Logo"}):e.jsx(Ee,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white leading-tight tracking-tight",children:c.schoolName}),e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-wide mt-1",children:[e.jsx("span",{children:c.place}),e.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),e.jsx("span",{className:c.isPro?"text-emerald-600 flex items-center gap-1":"text-slate-400",children:c.isPro?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-3 h-3"})," PRO CAMPUS"]}):"FREE PLAN"})]})]})]}),e.jsxs("div",{className:"relative w-full md:w-64",ref:y,children:[e.jsxs("div",{className:"relative",children:[e.jsx(Pe,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),e.jsx("input",{className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg pl-9 pr-8 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 dark:text-slate-200",placeholder:"Search Student...",value:a,onChange:o=>p(o.target.value)}),a&&e.jsx("button",{onClick:()=>{p(""),i([])},className:"absolute right-2 top-2 text-slate-400 hover:text-slate-600 p-0.5 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:e.jsx($,{className:"w-3 h-3"})})]}),d.length>0&&e.jsx("div",{className:"absolute top-12 left-0 w-full bg-white dark:bg-slate-900 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50 max-h-64 overflow-y-auto custom-scrollbar animate-fade-in-up",children:d.map(o=>e.jsxs("div",{onClick:()=>_(o.id),className:"p-3 border-b border-slate-100 dark:border-slate-800 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors",children:[e.jsx("p",{className:"font-bold text-sm text-slate-800 dark:text-white",children:o.name}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-[10px] bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-1.5 py-0.5 rounded font-bold",children:o.className}),e.jsx("span",{className:"text-[10px] font-mono text-slate-400",children:o.regNo})]})]},o.id))}),a.length>=2&&!n&&d.length===0&&e.jsx("div",{className:"absolute top-12 left-0 w-full bg-white dark:bg-slate-900 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 p-4 text-center text-xs text-slate-500 z-50",children:"No students found."})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs(N,{onClick:()=>b(`/school/${c.slug||c.id}`),variant:"secondary",className:"flex-1 md:flex-none flex justify-center items-center gap-2 text-xs border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 hover:text-blue-600",children:[e.jsx(xe,{className:"w-4 h-4"})," Public Page"]}),e.jsxs(N,{onClick:r,className:"flex-1 md:flex-none flex justify-center items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-500/20",children:[e.jsx(me,{className:"w-4 h-4"})," Post Notice"]})]})]})},Ye=({onClose:c,data:r,setData:b,scheduleTime:a,setScheduleTime:p,onSubmit:d,loading:i})=>e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(V,{className:"w-full max-w-md border-t-4 border-t-slate-900 relative",children:[e.jsx("button",{onClick:c,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx($,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-4 mb-6 pb-4 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-zinc-900 rounded-full flex items-center justify-center shrink-0",children:e.jsx(me,{className:"w-6 h-6 text-slate-900 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white leading-tight",children:"Post Notice"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Broadcast to campus"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{placeholder:"Title (Optional)",value:r.title,onChange:n=>b({...r,title:n.target.value})}),e.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-lg p-3 text-sm h-32 resize-none outline-none focus:ring-2 focus:ring-slate-900",placeholder:"Message content...",value:r.message,onChange:n=>b({...r,message:n.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Schedule (Optional)"}),e.jsx(S,{type:"datetime-local",value:a,onChange:n=>p(n.target.value)})]}),e.jsx(N,{onClick:d,className:"w-full bg-slate-900 text-white hover:bg-slate-800",children:a?"Schedule Post":"Post Now"})]})]})}),et=({onClose:c,date:r,setDate:b,onSubmit:a,loading:p})=>e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(V,{className:"max-w-md w-full relative border-t-4 border-emerald-600",children:[e.jsx("button",{onClick:c,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx($,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-50 dark:bg-emerald-900/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-emerald-100 dark:border-emerald-800",children:e.jsx(De,{className:"w-8 h-8 text-emerald-600"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Publish Results"}),e.jsx("p",{className:"text-zinc-500 text-sm",children:"Make marks visible to public."})]}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Schedule Date (Optional)"}),e.jsx(S,{type:"datetime-local",value:r,onChange:d=>b(d.target.value)}),e.jsx("p",{className:"text-[10px] text-zinc-400 mt-1",children:"Leave empty for immediate release."})]})}),e.jsx(N,{onClick:a,disabled:p,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg shadow-emerald-900/20",children:p?"Processing...":r?"Schedule Publish":"Publish Now"})]})}),tt=({onClose:c,mode:r,setMode:b,classId:a,setClassId:p,classes:d,newStudent:i,setNewStudent:n,onSubmit:E,onCsv:y,setCsv:_,loading:o,saved:C,schoolId:T})=>{const[A,B]=s.useState([]),[P,M]=s.useState({});s.useEffect(()=>{(async()=>{var x;const h=await g.getSchoolConfig();h&&((x=h.admissionConfig)!=null&&x.customFields)&&B(h.admissionConfig.customFields)})()},[]),s.useEffect(()=>{n(t=>({...t,customData:P}))},[P]);const R=(t,h)=>{M(x=>({...x,[t]:h}))};return e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(V,{className:"max-w-md w-full relative h-[85vh] flex flex-col p-0 overflow-hidden bg-zinc-50 dark:bg-zinc-900",children:[e.jsxs("div",{className:"p-6 pb-2 bg-white dark:bg-zinc-950 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsx("button",{onClick:c,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-600",children:e.jsx($,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-zinc-900 rounded-full flex items-center justify-center shrink-0 border border-zinc-200 dark:border-zinc-800",children:e.jsx(Te,{className:"w-6 h-6 text-slate-900 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white leading-tight",children:"Add Students"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Manage admission"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(J,{value:a,onChange:t=>p(t.target.value),children:[e.jsx("option",{value:"",children:"-- Choose Class --"}),d.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})}),e.jsx("div",{className:"flex bg-zinc-100 dark:bg-zinc-900 p-1 rounded-lg border border-zinc-200 dark:border-zinc-800",children:["PUBLIC","DELEGATE","BULK","SINGLE"].map(t=>e.jsx("button",{onClick:()=>b(t),className:`flex-1 py-1.5 px-1 rounded text-[10px] font-bold whitespace-nowrap transition-all ${r===t?"bg-white dark:bg-zinc-800 shadow text-slate-900 dark:text-white":"text-zinc-500"}`,children:t==="DELEGATE"?"Invite":t},t))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 pt-4",children:[r==="PUBLIC"&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl border border-blue-100 dark:border-blue-900/50 mb-4",children:[e.jsx(Ae,{className:"w-10 h-10 text-blue-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Self Registration"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Share link for parents to apply."}),e.jsx("div",{className:"p-2 bg-white dark:bg-zinc-950 rounded border border-zinc-200 dark:border-zinc-800 text-[10px] text-zinc-500 font-mono mb-4 break-all",children:a?`${window.location.origin}#/register?schoolId=${T}&classId=${a}`:"Select Class First"}),e.jsx(N,{onClick:()=>{a&&navigator.clipboard.writeText(`${window.location.origin}#/register?schoolId=${T}&classId=${a}`)},className:"w-full bg-blue-600 text-white hover:bg-blue-700",children:"Copy Link"})]})}),r==="DELEGATE"&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs("div",{className:"bg-zinc-100 dark:bg-zinc-800 p-6 rounded-xl border border-zinc-200 dark:border-zinc-700",children:[e.jsx(Me,{className:"w-10 h-10 text-zinc-500 mx-auto mb-2"}),e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Invite Teacher"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Let the teacher manage admissions."}),e.jsx(N,{onClick:()=>{a&&navigator.clipboard.writeText(`${window.location.origin}#/login?invite=${a}`)},variant:"secondary",className:"w-full bg-white dark:bg-zinc-950 border border-zinc-300 dark:border-zinc-700",children:"Copy Invite"})]})}),r==="BULK"&&e.jsxs("div",{className:"space-y-4 pt-4 text-center",children:[e.jsxs("a",{href:"data:text/csv;charset=utf-8,Name,RegNo,Gender,DOB\\nStudent Name,1001,Male,2008-05-20",download:"template.csv",className:"text-xs font-bold text-blue-600 underline flex items-center justify-center gap-1",children:[e.jsx(Re,{className:"w-3 h-3"})," Download Template"]}),e.jsxs("div",{className:"border-2 border-dashed border-zinc-300 dark:border-zinc-700 rounded-xl p-6 bg-zinc-50 dark:bg-zinc-900",children:[e.jsx(Ke,{className:"w-10 h-10 text-emerald-600 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Upload CSV (Name, RegNo, Gender, DOB)"}),e.jsx("input",{type:"file",accept:".csv",onChange:t=>{var h;return _(((h=t.target.files)==null?void 0:h[0])||null)},className:"text-xs w-full"})]}),e.jsx(N,{onClick:y,disabled:o,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white",children:o?"Uploading...":"Upload CSV"})]}),r==="SINGLE"&&e.jsxs("form",{onSubmit:E,className:"space-y-4 pt-2 relative",children:[C&&e.jsxs("div",{className:"absolute -top-4 right-0 text-[10px] text-green-600 font-bold flex gap-1",children:[e.jsx(he,{className:"w-3 h-3"})," Saved Draft"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Name"}),e.jsx(S,{value:i.name,onChange:t=>n({...i,name:t.target.value.toUpperCase()}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Reg No"}),e.jsx(S,{value:i.regNo,onChange:t=>n({...i,regNo:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Roll No"}),e.jsx(S,{value:i.rollNo,onChange:t=>n({...i,rollNo:t.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"Gender"}),e.jsxs(J,{value:i.gender,onChange:t=>n({...i,gender:t.target.value}),children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:"DOB"}),e.jsx(S,{type:"date",value:i.dob,onChange:t=>n({...i,dob:t.target.value})})]})]}),A.length>0&&e.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-3 mt-2",children:[e.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase mb-2",children:"Additional Info"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.map(t=>{var h;return e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase block mb-1",children:t.label}),t.type==="SELECT"?e.jsxs(J,{value:P[t.id]||"",onChange:x=>R(t.id,x.target.value),children:[e.jsx("option",{value:"",children:"Select"}),(h=t.options)==null?void 0:h.map(x=>e.jsx("option",{value:x,children:x},x))]}):e.jsx(S,{type:t.type==="NUMBER"?"number":t.type==="DATE"?"date":"text",value:P[t.id]||"",onChange:x=>R(t.id,x.target.value)})]},t.id)})})]}),e.jsx(N,{type:"submit",disabled:o,className:"w-full mt-4 bg-slate-900 text-white hover:bg-slate-800",children:o?"Saving...":"Save Student"})]})]})]})})};class st extends s.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,b){console.error("Uncaught error:",r,b)}render(){var r;return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900 p-4",children:e.jsxs(V,{className:"max-w-md w-full text-center border-t-4 border-red-500",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ie,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"The application encountered an unexpected error. Please try reloading to resolve the issue."}),e.jsx("div",{className:"bg-slate-100 dark:bg-slate-950 p-3 rounded-lg text-xs font-mono text-red-500 text-left mb-6 overflow-auto max-h-32 border border-slate-200 dark:border-slate-800",children:((r=this.state.error)==null?void 0:r.message)||"Unknown Error"}),e.jsxs(N,{onClick:()=>window.location.reload(),className:"w-full flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-500/20",children:[e.jsx(He,{className:"w-4 h-4"})," Reload Application"]})]})}):this.props.children}}const at=f.lazy(()=>j(()=>import("./OverviewTab-DmwBIfwX.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),lt=f.lazy(()=>j(()=>import("./ClassesTab-BFD208vB.js"),__vite__mapDeps([4,1,5,6,7,8]),import.meta.url)),rt=f.lazy(()=>j(()=>import("./AssessmentsTab-BCHh7pbD.js"),__vite__mapDeps([9,1,10,7,2,11,12,13,8]),import.meta.url)),nt=f.lazy(()=>j(()=>import("./FeesTab-BHGCh21J.js"),__vite__mapDeps([14,1,2,15]),import.meta.url)),it=f.lazy(()=>j(()=>import("./SettingsTab-DCy6hiU9.js"),__vite__mapDeps([16,1,17,18,7,6,10]),import.meta.url)),ot=f.lazy(()=>j(()=>import("./BillingTab-DviuxOqx.js"),__vite__mapDeps([19,1,2,20]),import.meta.url)),dt=f.lazy(()=>j(()=>import("./ReportsTab-DoQVHSn-.js"),__vite__mapDeps([21,1,20,15]),import.meta.url)),ct=f.lazy(()=>j(()=>import("./PromotionTab-BPGx8ygn.js"),__vite__mapDeps([22,1]),import.meta.url)),xt=f.lazy(()=>j(()=>import("./TimetableTab-B2SDnYwS.js"),__vite__mapDeps([23,1,2,7,15,20,10]),import.meta.url)),mt=f.lazy(()=>j(()=>import("./CalendarTab-BjU2PsIw.js"),__vite__mapDeps([24,1,2,7]),import.meta.url)),ht=()=>{const c=ce(),[r,b]=s.useState(!0),[a,p]=s.useState("home"),[d,i]=s.useState(null),[n,E]=s.useState([]),[y,_]=s.useState([]),[o,C]=s.useState([]),[T,A]=s.useState([]),[B,P]=s.useState(null),[M,R]=s.useState({fees:!0,assessments:!0}),[t,h]=s.useState(!1),[x,K]=s.useState({title:"",message:""}),[G,ue]=s.useState(""),[be,Q]=s.useState(!1),[pe,H]=s.useState(!1),[X,Y]=s.useState(""),[ge,ee]=s.useState(!1),[q,W]=s.useState(!1),[te,fe]=s.useState("PUBLIC"),[z,se]=s.useState(""),[w,Z]=s.useState({name:"",regNo:"",rollNo:"",dob:"",gender:"Male",fatherName:"",motherName:"",photoUrl:""}),[je,I]=s.useState(!1),[ae,le]=s.useState(null),[ve,re]=s.useState(!1),[ne,k]=s.useState(""),[ut,Ne]=s.useState(null),[m,ie]=s.useState(null);s.useEffect(()=>{v(),g.runAutoMaintenance().then(l=>{l&&console.log("System optimized automatically.")})},[]),s.useEffect(()=>{const l=localStorage.getItem("student_draft");if(l)try{const u=JSON.parse(l);Z(u),u.classId&&se(u.classId)}catch{}},[]),s.useEffect(()=>{if(q&&te==="SINGLE"&&w.name){localStorage.setItem("student_draft",JSON.stringify({...w,classId:z})),re(!0);const l=setTimeout(()=>re(!1),2e3);return()=>clearTimeout(l)}},[w,z,q]);const v=async()=>{b(!0);const[l,u]=await Promise.all([g.getSchoolConfig(),g.getGlobalSettings()]);if(!l){c("/login");return}i(l),R({fees:u.MODULE_FEES!=="FALSE",assessments:u.MODULE_ASSESSMENTS!=="FALSE"}),l.scheduledPublishDate&&Y(l.scheduledPublishDate.slice(0,16));const[L,D,O,F]=await Promise.all([g.getClasses(),g.getAssessmentPrograms(),g.getFeeStructures(),g.getSchoolPendingAdmissions()]);E(L),_(D),A(O),C(F),b(!1)},we=async()=>{if(!x.message)return alert("Message required");Q(!0);const l=await g.createCampusPost(d.id,d.schoolName,x.message,"ADMIN","NOTICE",x.title,G?new Date(G).toISOString():void 0);Q(!1),l.success?(h(!1),K({title:"",message:""}),k("Notice Posted!"),setTimeout(()=>k(""),2e3)):alert(l.message)},ke=async()=>{ee(!0);const l=X||new Date(Date.now()-6e4).toISOString(),u=await g.updateSchoolSettings({scheduledPublishDate:l});ee(!1),u.success&&(i({...d,scheduledPublishDate:l}),H(!1),k("Results Published!"),setTimeout(()=>k(""),2e3))},Se=async l=>{if(l.preventDefault(),!z||!w.name||!w.regNo)return alert("Missing info");I(!0);const u=await g.createStudent(z,{...w,addedBy:"Admin"});I(!1),u.success?(k(`${w.name} Added`),setTimeout(()=>k(""),2e3),Z({name:"",regNo:"",rollNo:"",dob:"",gender:"Male",fatherName:"",motherName:"",photoUrl:""}),localStorage.removeItem("student_draft"),v()):alert(u.message)},ye=async()=>{if(!ae||!z)return alert("Select File & Class");I(!0);const u=(await ae.text()).split(`
`);let L=0;for(let D=1;D<u.length;D++){const[O,F,oe,de]=Be(u[D]);O&&F&&(await g.createStudent(z,{name:O.trim(),regNo:F.trim(),gender:oe?oe.trim():"Male",dob:de?Ge(de.trim()):"2000-01-01",fatherName:"-",motherName:"-",addedBy:"CSV"}),L++)}I(!1),le(null),W(!1),v(),k(`${L} Students Imported`),setTimeout(()=>k(""),2e3)},Ce=()=>{if(!m)return;const l=`*FEE RECEIPT*

Student: *${m.studentName}*
Class: ${m.className}
Fee: ${m.feeName}
Amount Paid: ₹${m.paidAmount}
Status: ${m.status}

Date: ${m.date}
Txn ID: ${m.txnId}

*${m.schoolName}*`;window.open(`https://wa.me/?text=${encodeURIComponent(l)}`,"_blank")};if(r)return e.jsx(Le,{});if(!d)return null;const ze=[{id:"home",label:"Overview",icon:xe},{id:"classes",label:"Classes",icon:Oe},{id:"timetable",label:"Timetable",icon:Je},{id:"calendar",label:"Calendar",icon:Fe},{id:"reports",label:"Reports",icon:Qe},...M.assessments?[{id:"assessments",label:"Assessments",icon:We}]:[],...M.fees?[{id:"fees",label:"Fees",icon:Ue}]:[],{id:"settings",label:"Settings",icon:qe},{id:"billing",label:"Credits",icon:$e},{id:"promotion",label:"Promotion",icon:Ze}];return e.jsx(st,{children:e.jsxs("div",{className:"pb-20 animate-fade-in-up",children:[ne&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-slate-900/90 text-white px-6 py-4 rounded-xl shadow-2xl flex flex-col items-center animate-fade-in-up",children:[e.jsx(he,{className:"w-10 h-10 text-emerald-500 mb-2"}),e.jsx("span",{className:"font-bold",children:ne})]})}),e.jsx(Xe,{config:d,onNoticeClick:()=>h(!0)}),e.jsx("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-xl mb-6 overflow-x-auto border border-slate-200 dark:border-slate-800 custom-scrollbar",children:ze.map(l=>e.jsxs("button",{onClick:()=>p(l.id),className:`flex-1 px-4 py-2.5 rounded-lg text-xs font-bold transition-all flex justify-center items-center gap-2 whitespace-nowrap ${a===l.id?"bg-white dark:bg-slate-800 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(l.icon,{className:`w-4 h-4 ${l.id==="billing"?"fill-current":""}`})," ",l.label]},l.id))}),e.jsxs(s.Suspense,{fallback:e.jsx("div",{className:"flex justify-center py-20 text-slate-400 text-sm",children:"Loading..."}),children:[a==="home"&&e.jsx(at,{setActiveTab:p,stats:B,classes:n,pendingAdmissions:o,onRefresh:v,setShowPublishModal:H,setShowStudentEntryModal:W}),a==="classes"&&e.jsx(lt,{classes:n,onRefresh:v,onShowShare:l=>Ne(l)}),a==="timetable"&&e.jsx(xt,{classes:n,onRefresh:v,schoolName:d.schoolName}),a==="calendar"&&e.jsx(mt,{}),a==="reports"&&e.jsx(dt,{}),a==="assessments"&&e.jsx(rt,{assessments:y,classes:n,onRefresh:v}),a==="fees"&&e.jsx(nt,{feeStructures:T,classes:n,schoolConfig:d,onRefresh:v,onShowReceipt:ie}),a==="settings"&&e.jsx(it,{schoolConfig:d,onUpdate:i}),a==="billing"&&e.jsx(ot,{schoolConfig:d}),a==="promotion"&&e.jsx(ct,{classes:n,onRefresh:v})]}),t&&e.jsx(Ye,{onClose:()=>h(!1),data:x,setData:K,scheduleTime:G,setScheduleTime:ue,onSubmit:we,loading:be}),pe&&e.jsx(et,{onClose:()=>H(!1),date:X,setDate:Y,onSubmit:ke,loading:ge}),q&&e.jsx(tt,{onClose:()=>W(!1),mode:te,setMode:fe,classId:z,setClassId:se,classes:n,newStudent:w,setNewStudent:Z,onSubmit:Se,onCsv:ye,setCsv:le,loading:je,saved:ve,schoolId:d.id}),m&&e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 p-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-full max-w-sm relative",children:[e.jsx("button",{onClick:()=>ie(null),className:"absolute top-2 right-2 text-slate-400 hover:text-slate-600 font-bold",children:"✕"}),e.jsx("h3",{className:"font-bold text-center border-b pb-2 mb-4 text-slate-900",children:"FEE RECEIPT"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:"font-bold text-lg text-slate-800",children:m.schoolName}),e.jsx("p",{className:"text-xs text-gray-500",children:m.place})]}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Name:"}),e.jsx("span",{className:"font-bold",children:m.studentName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Class:"}),e.jsx("span",{children:m.className})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fee:"}),e.jsx("span",{children:m.feeName})]}),e.jsxs("div",{className:"border-t my-2 pt-2 flex justify-between font-bold text-lg text-slate-900",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["₹",m.amount||m.paidAmount]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsxs("button",{onClick:Ce,className:"flex-1 bg-[#25D366] hover:bg-[#20bd5a] text-white py-2.5 rounded-lg text-xs font-bold flex items-center justify-center gap-2 shadow-lg shadow-green-500/20",children:[e.jsx(Ve,{className:"w-4 h-4"})," WhatsApp"]}),e.jsx("button",{onClick:()=>window.print(),className:"flex-1 bg-slate-900 hover:bg-slate-800 text-white py-2.5 rounded-lg text-xs font-bold no-print",children:"Print"})]})]})})]})})},ft=Object.freeze(Object.defineProperty({__proto__:null,default:ht},Symbol.toStringTag,{value:"Module"}));export{Je as C,ft as D};
